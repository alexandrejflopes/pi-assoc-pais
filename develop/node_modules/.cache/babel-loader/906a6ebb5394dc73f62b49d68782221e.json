{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\profile\\\\UserInfo.js\";\nimport React from \"react\";\nimport { Button, Card, CardHeader, Col, Form, FormFeedback, FormGroup, FormInput, FormTextarea, ListGroup, ListGroupItem, Row } from \"shards-react\";\nimport { languageCode, newParametersEntities, notAvailableDesignation, parentsParameters, showToast, studentsParameters, toastTypes } from \"../../utils/general_utils\";\nimport { saveChanges, cancel, updateProfile } from \"../../utils/common_strings\";\nimport { profileInfoFormTitle } from \"../../utils/page_titles_strings\";\nimport { changesCommitSuccess, childDeleteError, childDeleteSuccess, fillRequiredFieldMessage, invalidZipMessage, parentUpdateError, parentUpdateSuccess, provideRequiredFieldsMessage } from \"../../utils/messages_strings\";\nimport { firebase_auth } from \"../../firebase-config\";\nimport { updateParent as _updateParent } from \"../../firebase_scripts/profile_functions\";\nimport UserOverview from \"./UserOverview\";\nimport UsersOverview from \"../blog/UsersOverview\";\nimport UserActions from \"../layout/MainNavbar/NavbarNav/UserActions\";\nimport { validZip } from \"../../firebase_scripts/installation\";\n\nvar UserInfo = /*#__PURE__*/function (_React$Component) {\n  _inherits(UserInfo, _React$Component);\n\n  var _super = _createSuper(UserInfo);\n\n  function UserInfo(props) {\n    var _feedbacks;\n\n    var _this;\n\n    _classCallCheck(this, UserInfo);\n\n    _this = _super.call(this, props);\n    var parent,\n        newParamsTypesD = null;\n    var noValueString = notAvailableDesignation[languageCode];\n    var infoFormTitle = profileInfoFormTitle[languageCode];\n\n    if (_this.props.userD != null) {\n      parent = _this.props.userD;\n      newParamsTypesD = _this.props.newParamsTypesD;\n    } //const {phone, nif, email, name, cc, job, street, city} = this.props.user;\n\n\n    _this.state = {\n      title: infoFormTitle,\n      parent: parent,\n      editing: false,\n      disabled: true,\n      newParamsTypesD: newParamsTypesD,\n      // feedbacks\n      feedbacks: (_feedbacks = {}, _defineProperty(_feedbacks, parentsParameters.NAME[languageCode], false), _defineProperty(_feedbacks, parentsParameters.PHONE[languageCode], false), _defineProperty(_feedbacks, parentsParameters.JOB[languageCode], false), _defineProperty(_feedbacks, parentsParameters.STREET[languageCode], false), _defineProperty(_feedbacks, parentsParameters.CITY[languageCode], false), _defineProperty(_feedbacks, parentsParameters.ZIPCODE[languageCode], false), _defineProperty(_feedbacks, parentsParameters.NIF[languageCode], false), _feedbacks),\n      oldParent: null,\n      onUpdateButtonsDisabled: false\n    };\n    _this.handleChangeParam = _this.handleChangeParam.bind(_assertThisInitialized(_this));\n    _this.enableEditableInputs = _this.enableEditableInputs.bind(_assertThisInitialized(_this));\n    _this.disableEditableInputs = _this.disableEditableInputs.bind(_assertThisInitialized(_this));\n    _this.disableUpdateButtons = _this.disableUpdateButtons.bind(_assertThisInitialized(_this));\n    _this.enableUpdateButtons = _this.enableUpdateButtons.bind(_assertThisInitialized(_this));\n    _this.editForm = _this.editForm.bind(_assertThisInitialized(_this));\n    _this.cancelEditing = _this.cancelEditing.bind(_assertThisInitialized(_this));\n    _this.lockFormAfterSubmit = _this.lockFormAfterSubmit.bind(_assertThisInitialized(_this));\n    _this.updateParent = _this.updateParent.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /*********************************** LIFECYCLE ***********************************/\n\n\n  _createClass(UserInfo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      console.log(\"atualizar info\");\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n    /*********************************** HANDLERS ***********************************/\n\n  }, {\n    key: \"updateParent\",\n    value: function updateParent() {\n      var this_ = this;\n      var validResult = this_.validForm();\n\n      if (!validResult) {\n        showToast(provideRequiredFieldsMessage[languageCode], 5000, toastTypes.ERROR);\n      } else {\n        this_.disableEditableInputs();\n        this_.disableUpdateButtons(); //this.cancelEditing();\n        //showToast(changesCommitSuccess[languageCode], 5000, toastTypes.SUCCESS);\n\n        _updateParent(firebase_auth.currentUser.email, this.state.parent).then(function (updatedParent) {\n          var upParentString = JSON.stringify(updatedParent);\n          console.log(\"updatedParent recebido depois do update info -> \" + upParentString); // update user data in localstorage\n\n          window.localStorage.setItem(\"userDoc\", upParentString);\n          this_.lockFormAfterSubmit();\n          this_.props.componentDidMount(true); // TODO: update navbar instantaneously\n\n          showToast(parentUpdateSuccess[languageCode], 5000, toastTypes.SUCCESS);\n        }).catch(function (error) {\n          if (Object.keys(error).length !== 0) {\n            console.log(\"update error: \" + JSON.stringify(error));\n            showToast(parentUpdateError[languageCode], 5000, toastTypes.ERROR);\n            this_.cancelEditing();\n            this_.enableUpdateButtons();\n          }\n        });\n      }\n    }\n  }, {\n    key: \"lockFormAfterSubmit\",\n    value: function lockFormAfterSubmit() {\n      //this.resetFeedbacks();\n      this.disableEditableInputs();\n      this.enableUpdateButtons();\n      this.setState({\n        editing: false\n      }); // save new parent data\n\n      var parent = _objectSpread({}, this.state.parent);\n\n      this.setState({\n        oldParent: parent\n      });\n    }\n  }, {\n    key: \"disableUpdateButtons\",\n    value: function disableUpdateButtons() {\n      this.setState({\n        onUpdateButtonsDisabled: true\n      });\n    }\n  }, {\n    key: \"enableUpdateButtons\",\n    value: function enableUpdateButtons() {\n      this.setState({\n        onUpdateButtonsDisabled: false\n      });\n    }\n  }, {\n    key: \"validForm\",\n    value: function validForm() {\n      // remove all feedbacks at the beginning\n      this.resetFeedbacks(); // check if all inputs are filled\n\n      var changedFeedbacks = _objectSpread({}, this.state.feedbacks);\n\n      var allValid = true;\n\n      for (var field in this.state.feedbacks) {\n        var value = this.state.parent[field];\n\n        if (value == null || value.trim() === \"\") {\n          changedFeedbacks[field] = true;\n          allValid = false;\n        }\n      }\n\n      var zip = this.state.parent[parentsParameters.ZIPCODE[languageCode]];\n\n      if (!validZip(zip)) {\n        changedFeedbacks[parentsParameters.ZIPCODE[languageCode]] = true;\n        allValid = false;\n        showToast(invalidZipMessage[languageCode], 5000, toastTypes.ERROR);\n      }\n\n      this.state.feedbacks = changedFeedbacks;\n      this.forceUpdate();\n      return allValid;\n    }\n  }, {\n    key: \"resetFeedbacks\",\n    value: function resetFeedbacks() {\n      var changedFeedbacks = _objectSpread({}, this.state.feedbacks);\n\n      for (var field in changedFeedbacks) {\n        changedFeedbacks[field] = false;\n      }\n\n      this.state.feedbacks = changedFeedbacks;\n      this.forceUpdate();\n    }\n  }, {\n    key: \"handleChangeParam\",\n    value: function handleChangeParam(e) {\n      var parent = this.state.parent;\n      var paramName = e.target.name; //console.log(\"paramName to change: \" + paramName);\n      // update the param with the new value\n\n      parent[paramName] = e.target.value; //console.log(\"parent with new values: \" + JSON.stringify(parent));\n\n      this.setState({\n        parent: parent\n      });\n    }\n  }, {\n    key: \"savePreviousParentData\",\n    value: function savePreviousParentData() {\n      var parent = _objectSpread({}, this.state.parent);\n\n      console.log(\"parent inicialmente na info -> \" + JSON.stringify(parent));\n      this.setState({\n        oldParent: parent\n      }); //console.log(\"parent saved: \" + JSON.stringify(parent));\n    }\n  }, {\n    key: \"restorePreviousParentData\",\n    value: function restorePreviousParentData() {\n      var oldParent = _objectSpread({}, this.state.oldParent);\n\n      this.setState({\n        parent: oldParent\n      }); //console.log(\"parent restored: \" + JSON.stringify(oldParent));\n    }\n  }, {\n    key: \"enableEditableInputs\",\n    value: function enableEditableInputs() {\n      this.setState({\n        disabled: false\n      });\n    }\n  }, {\n    key: \"disableEditableInputs\",\n    value: function disableEditableInputs() {\n      this.setState({\n        disabled: true\n      });\n    }\n  }, {\n    key: \"editForm\",\n    value: function editForm() {\n      var this_ = this;\n      var localUser = JSON.parse(window.localStorage.getItem(\"userDoc\")); // get the latest changes to parent from local storage\n\n      if (localUser != null) {\n        this_.setState({\n          parent: localUser\n        }, function () {\n          return this_.savePreviousParentData();\n        });\n      }\n\n      this.setState({\n        editing: true\n      });\n      this.enableEditableInputs();\n    }\n  }, {\n    key: \"cancelEditing\",\n    value: function cancelEditing() {\n      this.restorePreviousParentData();\n      this.setState({\n        editing: false\n      });\n      this.disableEditableInputs();\n    }\n  }, {\n    key: \"renderExtra\",\n    value: function renderExtra() {\n      var extraInputs = [];\n      var parentParamsTypes = this.state.newParamsTypesD[newParametersEntities.parent[languageCode]];\n\n      if (parentParamsTypes != null) {\n        // is null when there are no parent parameters\n        for (var param in parentParamsTypes) {\n          if (this.state.parent[param] == null\n          /*in case of a child param*/\n          ) continue;\n          var idx = \"parent\" + param;\n          var type = parentParamsTypes[param].type;\n          var step = parentParamsTypes[param].step; // add feedback control variable\n\n          var updatedFeedbacks = _objectSpread({}, this.state.feedbacks);\n\n          updatedFeedbacks[param] = false;\n          this.state.feedbacks = updatedFeedbacks;\n          var feedbackIdx = \"child\" + param + \"Feedback\";\n          var newInput = /*#__PURE__*/React.createElement(FormGroup, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"label\", {\n            htmlFor: idx,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 13\n            }\n          }, param), /*#__PURE__*/React.createElement(FormInput, {\n            id: idx,\n            type: type,\n            step: step,\n            name: param,\n            placeholder: \"\",\n            value: this.state.parent[param],\n            onChange: this.handleChangeParam,\n            required: true,\n            disabled: this.state.disabled ? \"disabled\" : \"\",\n            invalid: this.state.feedbacks[param],\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 13\n            }\n          }), /*#__PURE__*/React.createElement(FormFeedback, {\n            id: feedbackIdx,\n            valid: false,\n            style: {\n              display: \"none\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 13\n            }\n          }, fillRequiredFieldMessage[languageCode]));\n          extraInputs.push(newInput);\n        }\n      }\n\n      return extraInputs;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Card, {\n        small: true,\n        className: \"mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }\n      }, this.state.title)), /*#__PURE__*/React.createElement(ListGroup, {\n        flush: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        form: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"12\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"parentName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 23\n        }\n      }, parentsParameters.NAME[languageCode]), /*#__PURE__*/React.createElement(FormInput, {\n        required: true,\n        id: \"feName\",\n        name: parentsParameters.NAME[languageCode],\n        placeholder: parentsParameters.NAME[languageCode],\n        value: this.state.parent[parentsParameters.NAME[languageCode]],\n        onChange: this.handleChangeParam,\n        invalid: this.state.feedbacks[parentsParameters.NAME[languageCode]],\n        disabled: this.state.disabled ? \"disabled\" : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 23\n        }\n      }))), /*#__PURE__*/React.createElement(Row, {\n        form: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"parentPhone\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 23\n        }\n      }, parentsParameters.PHONE[languageCode]), /*#__PURE__*/React.createElement(FormInput, {\n        required: true,\n        type: \"tel\",\n        id: \"parentPhone\",\n        name: parentsParameters.PHONE[languageCode],\n        placeholder: parentsParameters.PHONE[languageCode],\n        value: this.state.parent[parentsParameters.PHONE[languageCode]],\n        onChange: this.handleChangeParam,\n        invalid: this.state.feedbacks[parentsParameters.PHONE[languageCode]],\n        disabled: this.state.disabled ? \"disabled\" : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"parentJob\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 23\n        }\n      }, parentsParameters.JOB[languageCode]), /*#__PURE__*/React.createElement(FormInput, {\n        id: \"parentJob\",\n        name: parentsParameters.JOB[languageCode],\n        placeholder: parentsParameters.JOB[languageCode],\n        value: this.state.parent[parentsParameters.JOB[languageCode]],\n        onChange: this.handleChangeParam,\n        invalid: this.state.feedbacks[parentsParameters.JOB[languageCode]],\n        disabled: this.state.disabled ? \"disabled\" : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 23\n        }\n      }))), /*#__PURE__*/React.createElement(Row, {\n        form: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"parentStreet\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 23\n        }\n      }, parentsParameters.STREET[languageCode]), /*#__PURE__*/React.createElement(FormInput, {\n        required: true,\n        id: \"parentStreet\",\n        name: parentsParameters.STREET[languageCode],\n        placeholder: parentsParameters.STREET[languageCode],\n        value: this.state.parent[parentsParameters.STREET[languageCode]],\n        onChange: this.handleChangeParam,\n        invalid: this.state.feedbacks[parentsParameters.STREET[languageCode]],\n        disabled: this.state.disabled ? \"disabled\" : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        md: \"4\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"parentCity\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 23\n        }\n      }, parentsParameters.CITY[languageCode]), /*#__PURE__*/React.createElement(FormInput, {\n        required: true,\n        id: \"parentCity\",\n        name: parentsParameters.CITY[languageCode],\n        placeholder: parentsParameters.CITY[languageCode],\n        value: this.state.parent[parentsParameters.CITY[languageCode]],\n        onChange: this.handleChangeParam,\n        invalid: this.state.feedbacks[parentsParameters.CITY[languageCode]],\n        disabled: this.state.disabled ? \"disabled\" : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        md: \"2\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"parentZipCode\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 23\n        }\n      }, parentsParameters.ZIPCODE[languageCode]), /*#__PURE__*/React.createElement(FormInput, {\n        required: true,\n        id: \"parentZipCode\",\n        name: parentsParameters.ZIPCODE[languageCode],\n        placeholder: parentsParameters.ZIPCODE[languageCode],\n        value: this.state.parent[parentsParameters.ZIPCODE[languageCode]],\n        onChange: this.handleChangeParam,\n        invalid: this.state.feedbacks[parentsParameters.ZIPCODE[languageCode]],\n        disabled: this.state.disabled ? \"disabled\" : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 23\n        }\n      }))), /*#__PURE__*/React.createElement(Row, {\n        form: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"parentNIF\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 23\n        }\n      }, parentsParameters.NIF[languageCode]), /*#__PURE__*/React.createElement(FormInput, {\n        required: true,\n        id: \"parentNIF\",\n        name: parentsParameters.NIF[languageCode],\n        placeholder: parentsParameters.NIF[languageCode],\n        value: this.state.parent[parentsParameters.NIF[languageCode]],\n        onChange: this.handleChangeParam,\n        invalid: this.state.feedbacks[parentsParameters.NIF[languageCode]],\n        disabled: this.state.disabled ? \"disabled\" : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"parentCC\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 23\n        }\n      }, parentsParameters.CC[languageCode]), /*#__PURE__*/React.createElement(FormInput, {\n        id: \"parentCC\",\n        name: parentsParameters.CC[languageCode],\n        placeholder: parentsParameters.CC[languageCode],\n        value: this.state.parent[parentsParameters.CC[languageCode]],\n        onChange: this.handleChangeParam //invalid={this.state.feedbacks[parentsParameters.CC[languageCode]]}\n        ,\n        disabled: this.state.disabled ? \"disabled\" : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 23\n        }\n      }))), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 19\n        }\n      }), this.renderExtra(), this.state.editing ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 42\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        theme: \"danger\",\n        onClick: this.cancelEditing,\n        disabled: this.state.onUpdateButtonsDisabled,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 47\n        }\n      }, cancel[languageCode]), \" \", /*#__PURE__*/React.createElement(Button, {\n        theme: \"success\",\n        className: \"float-right\",\n        onClick: this.updateParent,\n        disabled: this.state.onUpdateButtonsDisabled,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 177\n        }\n      }, saveChanges[languageCode]), \" \") : /*#__PURE__*/React.createElement(Button, {\n        theme: \"accent\",\n        onClick: this.editForm,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 23\n        }\n      }, updateProfile[languageCode])))))));\n    }\n  }]);\n\n  return UserInfo;\n}(React.Component);\n\nexport default UserInfo;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/profile/UserInfo.js"],"names":["React","Button","Card","CardHeader","Col","Form","FormFeedback","FormGroup","FormInput","FormTextarea","ListGroup","ListGroupItem","Row","languageCode","newParametersEntities","notAvailableDesignation","parentsParameters","showToast","studentsParameters","toastTypes","saveChanges","cancel","updateProfile","profileInfoFormTitle","changesCommitSuccess","childDeleteError","childDeleteSuccess","fillRequiredFieldMessage","invalidZipMessage","parentUpdateError","parentUpdateSuccess","provideRequiredFieldsMessage","firebase_auth","updateParent","UserOverview","UsersOverview","UserActions","validZip","UserInfo","props","parent","newParamsTypesD","noValueString","infoFormTitle","userD","state","title","editing","disabled","feedbacks","NAME","PHONE","JOB","STREET","CITY","ZIPCODE","NIF","oldParent","onUpdateButtonsDisabled","handleChangeParam","bind","enableEditableInputs","disableEditableInputs","disableUpdateButtons","enableUpdateButtons","editForm","cancelEditing","lockFormAfterSubmit","_isMounted","console","log","this_","validResult","validForm","ERROR","currentUser","email","then","updatedParent","upParentString","JSON","stringify","window","localStorage","setItem","componentDidMount","SUCCESS","catch","error","Object","keys","length","setState","resetFeedbacks","changedFeedbacks","allValid","field","value","trim","zip","forceUpdate","e","paramName","target","name","localUser","parse","getItem","savePreviousParentData","restorePreviousParentData","extraInputs","parentParamsTypes","param","idx","type","step","updatedFeedbacks","feedbackIdx","newInput","display","push","CC","renderExtra","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardHeader,\r\n  Col,\r\n  Form,\r\n  FormFeedback,\r\n  FormGroup,\r\n  FormInput,\r\n  FormTextarea,\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Row\r\n} from \"shards-react\";\r\nimport {\r\n  languageCode, newParametersEntities,\r\n  notAvailableDesignation,\r\n  parentsParameters, showToast, studentsParameters, toastTypes\r\n} from \"../../utils/general_utils\";\r\nimport {saveChanges, cancel, updateProfile} from \"../../utils/common_strings\";\r\nimport {profileInfoFormTitle} from \"../../utils/page_titles_strings\";\r\nimport {\r\n  changesCommitSuccess,\r\n  childDeleteError,\r\n  childDeleteSuccess,\r\n  fillRequiredFieldMessage,\r\n  invalidZipMessage,\r\n  parentUpdateError,\r\n  parentUpdateSuccess,\r\n  provideRequiredFieldsMessage\r\n} from \"../../utils/messages_strings\";\r\nimport {firebase_auth} from \"../../firebase-config\";\r\nimport {updateParent} from \"../../firebase_scripts/profile_functions\";\r\nimport UserOverview from \"./UserOverview\";\r\nimport UsersOverview from \"../blog/UsersOverview\";\r\nimport UserActions from \"../layout/MainNavbar/NavbarNav/UserActions\";\r\nimport {validZip} from \"../../firebase_scripts/installation\";\r\n\r\n\r\nclass UserInfo extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    let parent, newParamsTypesD = null;\r\n    const noValueString = notAvailableDesignation[languageCode];\r\n    const infoFormTitle = profileInfoFormTitle[languageCode];\r\n\r\n    if(this.props.userD!=null){\r\n      parent = this.props.userD;\r\n      newParamsTypesD = this.props.newParamsTypesD;\r\n    }\r\n\r\n    //const {phone, nif, email, name, cc, job, street, city} = this.props.user;\r\n    this.state = {\r\n      title: infoFormTitle,\r\n      parent : parent,\r\n      editing : false,\r\n      disabled: true,\r\n      newParamsTypesD : newParamsTypesD,\r\n      // feedbacks\r\n      feedbacks : {\r\n        [parentsParameters.NAME[languageCode]] : false,\r\n        //[parentsParameters.EMAIL[languageCode]] : false,\r\n        [parentsParameters.PHONE[languageCode]] : false,\r\n        [parentsParameters.JOB[languageCode]] : false,\r\n        [parentsParameters.STREET[languageCode]] : false,\r\n        [parentsParameters.CITY[languageCode]] : false,\r\n        [parentsParameters.ZIPCODE[languageCode]] : false,\r\n        [parentsParameters.NIF[languageCode]] : false,\r\n        //[parentsParameters.CC[languageCode]] : false\r\n      },\r\n      oldParent: null,\r\n      onUpdateButtonsDisabled : false\r\n    };\r\n\r\n    this.handleChangeParam = this.handleChangeParam.bind(this);\r\n    this.enableEditableInputs = this.enableEditableInputs.bind(this);\r\n    this.disableEditableInputs = this.disableEditableInputs.bind(this);\r\n    this.disableUpdateButtons = this.disableUpdateButtons.bind(this);\r\n    this.enableUpdateButtons = this.enableUpdateButtons.bind(this);\r\n    this.editForm = this.editForm.bind(this);\r\n    this.cancelEditing = this.cancelEditing.bind(this);\r\n    this.lockFormAfterSubmit = this.lockFormAfterSubmit.bind(this);\r\n\r\n    this.updateParent = this.updateParent.bind(this);\r\n\r\n\r\n  }\r\n\r\n  /*********************************** LIFECYCLE ***********************************/\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n\r\n    console.log(\"atualizar info\");\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  /*********************************** HANDLERS ***********************************/\r\n\r\n  updateParent(){\r\n    const this_ = this;\r\n    const validResult = this_.validForm();\r\n    if(!validResult){\r\n      showToast(provideRequiredFieldsMessage[languageCode], 5000, toastTypes.ERROR);\r\n    }\r\n    else{\r\n      this_.disableEditableInputs();\r\n      this_.disableUpdateButtons();\r\n      //this.cancelEditing();\r\n      //showToast(changesCommitSuccess[languageCode], 5000, toastTypes.SUCCESS);\r\n      updateParent(firebase_auth.currentUser.email, this.state.parent)\r\n        .then((updatedParent) => {\r\n          const upParentString = JSON.stringify(updatedParent);\r\n          console.log(\"updatedParent recebido depois do update info -> \" + upParentString);\r\n          // update user data in localstorage\r\n          window.localStorage.setItem(\"userDoc\", upParentString);\r\n          this_.lockFormAfterSubmit();\r\n          this_.props.componentDidMount(true);\r\n          // TODO: update navbar instantaneously\r\n          showToast(parentUpdateSuccess[languageCode], 5000, toastTypes.SUCCESS);\r\n        })\r\n        .catch((error) => {\r\n          if(Object.keys(error).length!==0){\r\n            console.log(\"update error: \" + JSON.stringify(error));\r\n            showToast(parentUpdateError[languageCode], 5000, toastTypes.ERROR);\r\n            this_.cancelEditing();\r\n            this_.enableUpdateButtons();\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  lockFormAfterSubmit(){\r\n    //this.resetFeedbacks();\r\n    this.disableEditableInputs();\r\n    this.enableUpdateButtons();\r\n    this.setState({ editing: false });\r\n    // save new parent data\r\n    const parent = {...this.state.parent};\r\n    this.setState({ oldParent: parent });\r\n  }\r\n\r\n  disableUpdateButtons(){\r\n    this.setState({ onUpdateButtonsDisabled: true });\r\n  }\r\n\r\n  enableUpdateButtons(){\r\n    this.setState({ onUpdateButtonsDisabled: false });\r\n  }\r\n\r\n  validForm(){\r\n    // remove all feedbacks at the beginning\r\n    this.resetFeedbacks();\r\n\r\n    // check if all inputs are filled\r\n    let changedFeedbacks = {...this.state.feedbacks};\r\n    let allValid = true;\r\n\r\n    for(let field in this.state.feedbacks){\r\n      const value = this.state.parent[field];\r\n      if(value==null || value.trim()===\"\"){\r\n        changedFeedbacks[field] = true;\r\n        allValid = false;\r\n      }\r\n    }\r\n\r\n    const zip = this.state.parent[parentsParameters.ZIPCODE[languageCode]];\r\n    if(!validZip(zip)){\r\n      changedFeedbacks[parentsParameters.ZIPCODE[languageCode]] = true;\r\n      allValid = false;\r\n      showToast(invalidZipMessage[languageCode], 5000, toastTypes.ERROR);\r\n    }\r\n\r\n    this.state.feedbacks = changedFeedbacks;\r\n    this.forceUpdate();\r\n    return allValid;\r\n  }\r\n\r\n  resetFeedbacks(){\r\n    let changedFeedbacks = {...this.state.feedbacks};\r\n    for(let field in changedFeedbacks){\r\n      changedFeedbacks[field] = false;\r\n    }\r\n    this.state.feedbacks = changedFeedbacks;\r\n    this.forceUpdate();\r\n  }\r\n\r\n  handleChangeParam(e) {\r\n    let parent = this.state.parent;\r\n    let paramName = e.target.name;\r\n    //console.log(\"paramName to change: \" + paramName);\r\n    // update the param with the new value\r\n    parent[paramName] = e.target.value;\r\n    //console.log(\"parent with new values: \" + JSON.stringify(parent));\r\n    this.setState({ parent: parent });\r\n  }\r\n\r\n  savePreviousParentData() {\r\n    const parent = {...this.state.parent};\r\n    console.log(\"parent inicialmente na info -> \" + JSON.stringify(parent));\r\n    this.setState({ oldParent: parent });\r\n    //console.log(\"parent saved: \" + JSON.stringify(parent));\r\n  };\r\n\r\n  restorePreviousParentData() {\r\n    const oldParent = {...this.state.oldParent};\r\n    this.setState({ parent: oldParent });\r\n    //console.log(\"parent restored: \" + JSON.stringify(oldParent));\r\n  };\r\n\r\n  enableEditableInputs() {\r\n    this.setState({ disabled: false });\r\n  }\r\n\r\n  disableEditableInputs() {\r\n    this.setState({ disabled: true });\r\n  }\r\n\r\n  editForm(){\r\n    const this_ = this;\r\n    const localUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\r\n    // get the latest changes to parent from local storage\r\n    if(localUser!=null){\r\n      this_.setState({parent : localUser}, () => this_.savePreviousParentData());\r\n    }\r\n    this.setState({editing : true});\r\n    this.enableEditableInputs();\r\n  }\r\n\r\n  cancelEditing() {\r\n    this.restorePreviousParentData();\r\n    this.setState({ editing: false });\r\n    this.disableEditableInputs();\r\n  }\r\n\r\n  renderExtra() {\r\n    let extraInputs = [];\r\n\r\n    const parentParamsTypes = this.state.newParamsTypesD[newParametersEntities.parent[languageCode]];\r\n\r\n    if(parentParamsTypes!=null){ // is null when there are no parent parameters\r\n      for (let param in parentParamsTypes) {\r\n        if (this.state.parent[param] == null /*in case of a child param*/)\r\n          continue;\r\n\r\n        const idx = \"parent\" + param;\r\n        const type = parentParamsTypes[param].type;\r\n        const step = parentParamsTypes[param].step;\r\n\r\n        // add feedback control variable\r\n        let updatedFeedbacks = {...this.state.feedbacks};\r\n        updatedFeedbacks[param] = false;\r\n        this.state.feedbacks = updatedFeedbacks;\r\n        const feedbackIdx = \"child\" + param + \"Feedback\";\r\n\r\n        const newInput = (\r\n          <FormGroup>\r\n            <label htmlFor={idx}>{param}</label>\r\n            <FormInput\r\n              id={idx}\r\n              type={type}\r\n              step={step}\r\n              name={param}\r\n              placeholder=\"\"\r\n              value={this.state.parent[param]}\r\n              onChange={this.handleChangeParam}\r\n              required\r\n              disabled={this.state.disabled ? \"disabled\" : \"\"}\r\n              invalid={this.state.feedbacks[param]}\r\n            />\r\n            <FormFeedback\r\n              id={feedbackIdx}\r\n              valid={false}\r\n              style={{ display: \"none\" }}\r\n            >\r\n              {fillRequiredFieldMessage[languageCode]}\r\n            </FormFeedback>\r\n          </FormGroup>\r\n        );\r\n        extraInputs.push(newInput);\r\n      }\r\n    }\r\n\r\n\r\n    return extraInputs;\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Card small className=\"mb-4\">\r\n        <CardHeader className=\"border-bottom\">\r\n          <h6 className=\"m-0\">{this.state.title}</h6>\r\n        </CardHeader>\r\n        <ListGroup flush>\r\n          <ListGroupItem className=\"p-3\">\r\n            <Row>\r\n              <Col>\r\n                <Form>\r\n                  <Row form>\r\n                    {/* First Name */}\r\n                    <Col md=\"12\" className=\"form-group\">\r\n                      <label htmlFor=\"parentName\">{parentsParameters.NAME[languageCode]}</label>\r\n                      <FormInput\r\n                        required\r\n                        id=\"feName\"\r\n                        name={parentsParameters.NAME[languageCode]}\r\n                        placeholder={parentsParameters.NAME[languageCode]}\r\n                        value={\r\n                          this.state.parent[\r\n                            parentsParameters.NAME[languageCode]\r\n                            ]\r\n                        }\r\n                        onChange={this.handleChangeParam}\r\n                        invalid={this.state.feedbacks[parentsParameters.NAME[languageCode]]}\r\n                        disabled={this.state.disabled ? \"disabled\" : \"\"}\r\n                      />\r\n                    </Col>\r\n                  </Row>\r\n                  <Row form>\r\n                    {/* Phone */}\r\n                    <Col md=\"6\" className=\"form-group\">\r\n                      <label htmlFor=\"parentPhone\">{parentsParameters.PHONE[languageCode]}</label>\r\n                      <FormInput\r\n                        required\r\n                        type=\"tel\"\r\n                        id=\"parentPhone\"\r\n                        name={parentsParameters.PHONE[languageCode]}\r\n                        placeholder={parentsParameters.PHONE[languageCode]}\r\n                        value={\r\n                          this.state.parent[parentsParameters.PHONE[languageCode]]\r\n                        }\r\n                        onChange={this.handleChangeParam}\r\n                        invalid={this.state.feedbacks[parentsParameters.PHONE[languageCode]]}\r\n                        disabled={this.state.disabled ? \"disabled\" : \"\"}\r\n                      />\r\n                    </Col>\r\n                    {/* Job */}\r\n                    <Col md=\"6\" className=\"form-group\">\r\n                      <label htmlFor=\"parentJob\">{parentsParameters.JOB[languageCode]}</label>\r\n                      <FormInput\r\n                        id=\"parentJob\"\r\n                        name={parentsParameters.JOB[languageCode]}\r\n                        placeholder={parentsParameters.JOB[languageCode]}\r\n                        value={\r\n                          this.state.parent[parentsParameters.JOB[languageCode]]\r\n                        }\r\n                        onChange={this.handleChangeParam}\r\n                        invalid={this.state.feedbacks[parentsParameters.JOB[languageCode]]}\r\n                        disabled={this.state.disabled ? \"disabled\" : \"\"}\r\n                      />\r\n                    </Col>\r\n                  </Row>\r\n                  <Row form>\r\n                    {/* Address | Street */}\r\n                    <Col md=\"6\" className=\"form-group\">\r\n                      <label htmlFor=\"parentStreet\">{parentsParameters.STREET[languageCode]}</label>\r\n                      <FormInput\r\n                        required\r\n                        id=\"parentStreet\"\r\n                        name={parentsParameters.STREET[languageCode]}\r\n                        placeholder={parentsParameters.STREET[languageCode]}\r\n                        value={\r\n                          this.state.parent[parentsParameters.STREET[languageCode]]\r\n                        }\r\n                        onChange={this.handleChangeParam}\r\n                        invalid={this.state.feedbacks[parentsParameters.STREET[languageCode]]}\r\n                        disabled={this.state.disabled ? \"disabled\" : \"\"}\r\n                      />\r\n                    </Col>\r\n                    {/* City */}\r\n                    <Col md=\"4\" className=\"form-group\">\r\n                      <label htmlFor=\"parentCity\">{parentsParameters.CITY[languageCode]}</label>\r\n                      <FormInput\r\n                        required\r\n                        id=\"parentCity\"\r\n                        name={parentsParameters.CITY[languageCode]}\r\n                        placeholder={parentsParameters.CITY[languageCode]}\r\n                        value={\r\n                          this.state.parent[parentsParameters.CITY[languageCode]]\r\n                        }\r\n                        onChange={this.handleChangeParam}\r\n                        invalid={this.state.feedbacks[parentsParameters.CITY[languageCode]]}\r\n                        disabled={this.state.disabled ? \"disabled\" : \"\"}\r\n                      />\r\n                    </Col>\r\n                    {/* Zip Code */}\r\n                    <Col md=\"2\" className=\"form-group\">\r\n                      <label htmlFor=\"parentZipCode\">{parentsParameters.ZIPCODE[languageCode]}</label>\r\n                      <FormInput\r\n                        required\r\n                        id=\"parentZipCode\"\r\n                        name={parentsParameters.ZIPCODE[languageCode]}\r\n                        placeholder={parentsParameters.ZIPCODE[languageCode]}\r\n                        value={\r\n                          this.state.parent[parentsParameters.ZIPCODE[languageCode]]\r\n                        }\r\n                        onChange={this.handleChangeParam}\r\n                        invalid={this.state.feedbacks[parentsParameters.ZIPCODE[languageCode]]}\r\n                        disabled={this.state.disabled ? \"disabled\" : \"\"}\r\n                      />\r\n                    </Col>\r\n                  </Row>\r\n                  <Row form>\r\n                    {/* Finance number */}\r\n                    <Col md=\"6\" className=\"form-group\">\r\n                      <label htmlFor=\"parentNIF\">{parentsParameters.NIF[languageCode]}</label>\r\n                      <FormInput\r\n                        required\r\n                        id=\"parentNIF\"\r\n                        name={parentsParameters.NIF[languageCode]}\r\n                        placeholder={parentsParameters.NIF[languageCode]}\r\n                        value={\r\n                          this.state.parent[parentsParameters.NIF[languageCode]]\r\n                        }\r\n                        onChange={this.handleChangeParam}\r\n                        invalid={this.state.feedbacks[parentsParameters.NIF[languageCode]]}\r\n                        disabled={this.state.disabled ? \"disabled\" : \"\"}\r\n                      />\r\n                    </Col>\r\n                    {/* Citizen Card */}\r\n                    <Col md=\"6\" className=\"form-group\">\r\n                      <label htmlFor=\"parentCC\">{parentsParameters.CC[languageCode]}</label>\r\n                      <FormInput\r\n                        id=\"parentCC\"\r\n                        name={parentsParameters.CC[languageCode]}\r\n                        placeholder={parentsParameters.CC[languageCode]}\r\n                        value={\r\n                          this.state.parent[parentsParameters.CC[languageCode]]\r\n                        }\r\n                        onChange={this.handleChangeParam}\r\n                        //invalid={this.state.feedbacks[parentsParameters.CC[languageCode]]}\r\n                        disabled={this.state.disabled ? \"disabled\" : \"\"}\r\n                      />\r\n                    </Col>\r\n                  </Row>\r\n                  <hr />\r\n                  {this.renderExtra()}\r\n\r\n                  { this.state.editing ? <div><Button theme=\"danger\" onClick={this.cancelEditing} disabled={this.state.onUpdateButtonsDisabled}>{cancel[languageCode]}</Button> <Button theme=\"success\" className=\"float-right\" onClick={this.updateParent} disabled={this.state.onUpdateButtonsDisabled}>{saveChanges[languageCode]}</Button> </div>\r\n                    : <Button theme=\"accent\" onClick={this.editForm}>{updateProfile[languageCode]}</Button>\r\n                  }\r\n                </Form>\r\n              </Col>\r\n            </Row>\r\n          </ListGroupItem>\r\n        </ListGroup>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default UserInfo;\r\n"]},"metadata":{},"sourceType":"module"}