{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\approval-page\\\\ApprovalPage.js\";\nimport React, { Component, Fragment } from \"react\";\nimport { ListGroup, ListGroupItem, Row, Col, Card, CardBody, CardFooter, FormInput, FormGroup, Button, FormFeedback } from \"shards-react\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { Redirect } from \"react-router-dom\";\nimport { firestore, firebaseConfig } from \"../../firebase-config\";\nimport ApprovalModal from \"./ApprovalModal\";\nimport { cleanButton, languageCode, assocParameters, approvalPageLoading, parentsParameters } from \"../../utils/general_utils\";\nimport { deleteAccount } from \"../../firebase_scripts/profile_functions\";\n\nvar Approval_Page = /*#__PURE__*/function (_Component) {\n  _inherits(Approval_Page, _Component);\n\n  var _super = _createSuper(Approval_Page);\n\n  function Approval_Page(props) {\n    var _this;\n\n    _classCallCheck(this, Approval_Page);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      resgistosPorAprovar: null,\n      dicionarioRegistos: null,\n      blocking: false,\n      errors: {},\n      timer: null,\n      redirect: null,\n      extraParent: null,\n      extraStudent: null,\n      moreStudents: null,\n      studentNumber: 1,\n      //Counts number of students\n      extraVars: [{}],\n      extraPai: 0,\n      //Counts number of extra parameters that belong to the parent part -> they are stored in extraVars[0] along with the extra values from the first student\n      daysToDelete: 7\n    };\n    _this.renderExtra = _this.renderExtra.bind(_assertThisInitialized(_this));\n    _this.deletePassedRegisters = _this.deletePassedRegisters.bind(_assertThisInitialized(_this));\n    _this.reload = _this.reload.bind(_assertThisInitialized(_this));\n    _this.addStudent = _this.addStudent.bind(_assertThisInitialized(_this));\n    _this.getParentsToApprove = _this.getParentsToApprove.bind(_assertThisInitialized(_this));\n    _this.componentDidMount = _this.componentDidMount.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /*********************************** LIFECYCLE ***********************************/\n\n\n  _createClass(Approval_Page, [{\n    key: \"reload\",\n    value: function reload() {\n      this.setState({\n        dicionarioRegistos: null,\n        resgistosPorAprovar: null\n      });\n      this.getParentsToApprove();\n      this.renderExtra();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //this._isMounted = true;\n      var assocDoc = JSON.parse(window.localStorage.getItem(\"assocDoc\"));\n\n      if (assocDoc != null) {\n        var daysToDelete = assocDoc[assocParameters.DAYS_TO_DELETE_REGISTRATION[languageCode]];\n        daysToDelete = parseInt(daysToDelete, 10);\n\n        if (daysToDelete != null) {\n          this.setState({\n            daysToDelete: daysToDelete\n          });\n        }\n      }\n\n      this.getParentsToApprove();\n      this.renderExtra(); //var timer = setInterval(() => this.deletePassedRegisters(), 1000 * 30 * 1);\n      //this.setState({ timer: timer });\n\n      var this_ = this;\n      var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n\n      if (currentUser != null) {} else {\n        //Redirect to login\n        var redirect = /*#__PURE__*/React.createElement(Redirect, {\n          to: {\n            pathname: \"/\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 9\n          }\n        });\n        this.setState({\n          redirect: redirect\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.state.timer);\n      this._isMounted = false;\n    }\n  }, {\n    key: \"deletePassedRegisters\",\n    value: function deletePassedRegisters() {\n      var _this$state = this.state,\n          resgistosPorAprovar = _this$state.resgistosPorAprovar,\n          daysToDelete = _this$state.daysToDelete;\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n\n      if (resgistosPorAprovar != null) {\n        var _loop = function _loop(i) {\n          var json = resgistosPorAprovar[i];\n          var data = json[\"Data inscricao\"];\n\n          if (data != null) {\n            var date = new Date(data._seconds * 1000);\n            var days = daysToDelete;\n            var compareDate = new Date(date.getTime() + days * 86400000);\n            var today = new Date();\n\n            if (compareDate.getTime() < today.getTime()) {\n              deleteAccount(json[parentsParameters.EMAIL[languageCode]]).then(function () {\n                var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/sendRejectedEmail?\" + \"email=\" + json[parentsParameters.EMAIL[languageCode]] + \"&\" + \"nome=\" + json[parentsParameters.NAME[languageCode]];\n\n                var request = /*#__PURE__*/function () {\n                  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                    var resposta;\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return fetch(uri).then(function (resp) {\n                              return resp.json();\n                            }).then(function (data) {\n                              resposta = data;\n                            }).catch(function (error) {\n                              console.log(error);\n                            });\n\n                          case 2:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function request() {\n                    return _ref.apply(this, arguments);\n                  };\n                }();\n\n                return request();\n              });\n            }\n          }\n        };\n\n        for (var i = 0; i < resgistosPorAprovar.length; i++) {\n          _loop(i);\n        }\n      }\n    }\n    /**\r\n      Function to add new student to form\r\n     */\n\n  }, {\n    key: \"addStudent\",\n    value: function addStudent() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          studentNumber = _this$state2.studentNumber,\n          nomeAluno = _this$state2.nomeAluno,\n          nomeAlunoFeedBack = _this$state2.nomeAlunoFeedBack,\n          anoEscolaridade = _this$state2.anoEscolaridade,\n          anoEscolaridadeFeedBack = _this$state2.anoEscolaridadeFeedBack,\n          extraStudent = _this$state2.extraStudent,\n          moreStudents = _this$state2.moreStudents;\n      var this_ = this;\n      var dadosFinaisAluno = null; //Get student parameters from database\n\n      var extrasDoc = firestore.doc(\"initialConfigs/newParameters\");\n      extrasDoc.get().then(function (doc) {\n        if (doc.exists === true) {\n          var dataDoc = doc.data();\n          var studentData = dataDoc[\"aluno\"];\n\n          if (studentData !== undefined) {\n            var keys = Object.keys(studentData);\n            var dadosAluno = [];\n\n            var _loop2 = function _loop2() {\n              valS = keys[i];\n              type = studentData[valS];\n              step = null;\n\n              if (type.includes(\"text\")) {\n                type = \"text\";\n              } else if (type.includes(\"int\")) {\n                type = \"number\";\n                step = \"1\";\n              } else if (type.includes(\"decimal\")) {\n                type = \"number\";\n                step = \"0.1\";\n              }\n\n              idS = valS + \"-\" + studentNumber; //Id now contains a unique number to identify it\n              //Create dictionary for this student's values and add it to extraVars\n\n              newArrayExtras1 = _this2.state.extraVars; //Get array of dictionaries\n\n              if (i == 0) {\n                newVar = _defineProperty({}, idS, \"\");\n              } else {\n                newVar = _objectSpread({}, _this2.state.extraVars[studentNumber], _defineProperty({}, idS, \"\"));\n              }\n\n              newArrayExtras1[studentNumber] = newVar;\n\n              _this2.setState({\n                extraVars: newArrayExtras1\n              });\n\n              var n = studentNumber; //Object to render\n\n              dado = /*#__PURE__*/React.createElement(FormGroup, {\n                __self: _this2,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 17\n                }\n              }, /*#__PURE__*/React.createElement(\"label\", {\n                htmlFor: idS,\n                __self: _this2,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 19\n                }\n              }, valS), /*#__PURE__*/React.createElement(FormInput, {\n                id: idS,\n                type: type,\n                step: step,\n                placeholder: valS,\n                onChange: function onChange(e) {\n                  var extrasArray = _this2.state.extraVars;\n\n                  var newExtraVars = _objectSpread({}, _this2.state.extraVars[n], _defineProperty({}, e.target.id, e.target.value));\n\n                  extrasArray[n] = newExtraVars;\n\n                  _this2.setState({\n                    extraVars: extrasArray\n                  });\n                },\n                __self: _this2,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 19\n                }\n              }));\n              dadosAluno.push(dado);\n            };\n\n            for (var i = 0; i < keys.length; i++) {\n              var valS;\n              var type;\n              var step;\n              var idS;\n              var newArrayExtras1;\n              var newVar;\n              var dado;\n\n              _loop2();\n            }\n\n            dadosFinaisAluno = dadosAluno; //Similar process to name and year of student\n\n            var novoArrayAlunos = nomeAluno.concat(\"\");\n            var novoArrayNomeAlunoFeedBack = nomeAlunoFeedBack.concat(null); //not working, we are using alert method\n\n            var novoArrayAnoEscolaridade = anoEscolaridade.concat(\"\");\n            var novoArrayAnoEscolaridadeFeedBack = anoEscolaridadeFeedBack.concat(null);\n            this_.setState({\n              nomeAluno: novoArrayAlunos,\n              nomeAlunoFeedBack: novoArrayNomeAlunoFeedBack,\n              anoEscolaridade: novoArrayAnoEscolaridade,\n              anoEscolaridadeFeedBack: novoArrayAnoEscolaridadeFeedBack\n            });\n            var newName = \"studentName-\" + studentNumber;\n            var newNameFeedback = newName + \"FeedBack\";\n            var newYear = \"studentYear-\" + studentNumber;\n            var newYearFeedback = newYear + \"FeedBack\";\n            var x = studentNumber;\n            var add = /*#__PURE__*/React.createElement(Fragment, {\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 15\n              }\n            }, /*#__PURE__*/React.createElement(\"hr\", {\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }\n            }), /*#__PURE__*/React.createElement(FormGroup, {\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 17\n              }\n            }, /*#__PURE__*/React.createElement(\"label\", {\n              htmlFor: \"studentName\",\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 19\n              }\n            }, \"Nome Aluno\"), /*#__PURE__*/React.createElement(FormInput, {\n              invalid: this_.state.nomeAlunoFeedBack[x],\n              onChange: function onChange(e) {\n                var newAdd = novoArrayAlunos;\n                var n = e.target.id.split(\"-\")[1];\n                newAdd[n] = e.target.value;\n\n                _this2.setState({\n                  nomeAluno: newAdd\n                });\n              },\n              id: newName,\n              type: \"text\",\n              placeholder: \"Nome\",\n              required: true,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 19\n              }\n            }), /*#__PURE__*/React.createElement(FormFeedback, {\n              id: newNameFeedback,\n              valid: false,\n              style: {\n                display: \"d-block\"\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 19\n              }\n            }, \"Por favor, preencha este campo\")), /*#__PURE__*/React.createElement(FormGroup, {\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }\n            }, /*#__PURE__*/React.createElement(\"label\", {\n              htmlFor: \"studentYear\",\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 19\n              }\n            }, \"Ano Escolaridade\"), /*#__PURE__*/React.createElement(FormInput, {\n              invalid: this_.state.anoEscolaridadeFeedBack[x],\n              onChange: function onChange(e) {\n                var newAdd = novoArrayAnoEscolaridade;\n                var n = e.target.id.split(\"-\")[1];\n                newAdd[n] = e.target.value;\n\n                _this2.setState({\n                  anoEscolaridade: newAdd\n                });\n              },\n              id: newYear,\n              type: \"text\",\n              placeholder: \"5\\xBA\",\n              required: true,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 19\n              }\n            }), /*#__PURE__*/React.createElement(FormFeedback, {\n              id: newYearFeedback,\n              valid: false,\n              style: {\n                display: \"d-block\"\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 19\n              }\n            }, \"Por favor, preencha este campo\")), dadosFinaisAluno);\n            studentNumber++; //Increase studentNumber\n\n            var arrayAnterior = moreStudents;\n\n            if (moreStudents == null) {\n              arrayAnterior = [add];\n            } else {\n              arrayAnterior = [moreStudents].concat(add);\n            }\n\n            this_.setState({\n              moreStudents: arrayAnterior,\n              studentNumber: studentNumber\n            });\n          }\n        } else {\n          console.log(\"doc não existe\");\n        }\n      }).catch(function (err) {\n        alert(err);\n      });\n    }\n  }, {\n    key: \"getParentsToApprove\",\n    value: function getParentsToApprove() {\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getParents\";\n\n      var request = /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n          var resposta;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return fetch(uri).then(function (resp) {\n                    return resp.json();\n                  }) // Transform the data into json\n                  .then(function (data) {\n                    //console.log(\"ShowEmaildata: \", data);\n                    var resgistosPorAprovar = [];\n                    var dicionarioRegistos = {};\n\n                    for (var i = 0; i < data.length; i++) {\n                      if (data[i][\"Validated\"] != undefined && data[i][\"Validated\"] != null && data[i][\"Validated\"].toString() == \"false\") {\n                        if (data[i][\"Quotas pagas\"] != undefined && data[i][\"Quotas pagas\"] != null && (data[i][\"Quotas pagas\"].toString() == \"Não\" || data[i][\"Quotas pagas\"].toString() == \"false\")) {\n                          resgistosPorAprovar.push(data[i]);\n                          var title = data[i][\"Email\"];\n                          dicionarioRegistos[title] = data[i];\n                        }\n                      }\n                    }\n\n                    this_.setState({\n                      dicionarioRegistos: dicionarioRegistos,\n                      resgistosPorAprovar: resgistosPorAprovar\n                    });\n                  }).catch(function (error) {\n                    console.log(error);\n                  });\n\n                case 2:\n                  return _context2.abrupt(\"return\", resposta);\n\n                case 3:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function request() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n\n      var dados = request();\n    }\n  }, {\n    key: \"showDetails\",\n    value: function showDetails(e) {}\n    /**\r\n      Function to get extra parameters for parent and students from firestore and load them\r\n     */\n\n  }, {\n    key: \"renderExtra\",\n    value: function renderExtra() {\n      var _this3 = this;\n\n      var _this$state3 = this.state,\n          extraParent = _this$state3.extraParent,\n          extraStudent = _this$state3.extraStudent,\n          moreStudents = _this$state3.moreStudents,\n          extraVars = _this$state3.extraVars;\n      var this_ = this;\n      var dadosFinaisPai = null;\n      var dadosFinaisAluno = null;\n      var extrasDoc = firestore.doc(\"initialConfigs/newParameters\");\n      extrasDoc.get().then(function (doc) {\n        if (doc.exists === true) {\n          var dataDoc = doc.data(); //console.log(\"dados extras: \" + JSON.stringify(dataDoc));\n\n          var eeData = dataDoc[\"EE\"]; // Get parent dictionary of extra parameters\n\n          if (eeData !== undefined) {\n            var keys = Object.keys(eeData);\n            var extraPai = 0; // Counts number of extra parameters that belong to the parent part of the registry\n\n            var dadosPai = []; // Will store all objects to render from the parent side\n\n            for (var i = 0; i < keys.length; i++) {\n              extraPai++;\n              var val = keys[i]; // Actual name of parameter\n\n              var type = eeData[val]; //Type of parameter (text, inteiro, etc)\n              //Change type to html equivalent\n\n              if (type.includes(\"text\")) {\n                type = \"text\";\n              } else if (type.includes(\"int\")) {\n                type = \"number\";\n              } //These following lines add parameter to extraVars array of dictionaries (extraVars stores the actual user input)\n\n\n              var newArrayExtras = _this3.state.extraVars; // Array of dictionaries\n\n              var newVar = _objectSpread({}, _this3.state.extraVars[0], _defineProperty({}, val, \"\")); // Add parameter(val) to first dictionary\n\n\n              newArrayExtras[0] = newVar;\n\n              _this3.setState({\n                extraVars: newArrayExtras\n              }); // Objects to render\n\n\n              var dado = /*#__PURE__*/React.createElement(FormGroup, {\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 17\n                }\n              }, /*#__PURE__*/React.createElement(\"label\", {\n                htmlFor: val,\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 19\n                }\n              }, val), /*#__PURE__*/React.createElement(FormInput, {\n                id: val,\n                type: type,\n                placeholder: val,\n                onChange: function onChange(e) {\n                  var extrasArray = _this3.state.extraVars;\n\n                  var newExtraVars = _objectSpread({}, _this3.state.extraVars[0], _defineProperty({}, e.target.id, e.target.value));\n\n                  extrasArray[0] = newExtraVars;\n\n                  _this3.setState({\n                    extraVars: extrasArray\n                  });\n                },\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 19\n                }\n              }), /*#__PURE__*/React.createElement(FormFeedback, {\n                id: val + \"Feedback\",\n                valid: false,\n                style: {\n                  display: \"d-block\"\n                },\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 19\n                }\n              }, \"Por favor, preencha este campo\"));\n              dadosPai.push(dado); //Add object to array\n            }\n\n            dadosFinaisPai = dadosPai;\n          } // The following code follows the same parent logic, just for the student\n\n\n          var studentData = dataDoc[\"aluno\"];\n\n          if (studentData !== undefined) {\n            var keys = Object.keys(studentData);\n            var dadosAluno = [];\n\n            for (var i = 0; i < keys.length; i++) {\n              var valS = keys[i];\n              var type = studentData[valS];\n              var step = null;\n\n              if (type.includes(\"text\")) {\n                type = \"text\";\n              } else if (type.includes(\"int\")) {\n                type = \"number\";\n                step = \"1\";\n              } else if (type.includes(\"decimal\")) {\n                type = \"number\";\n                step = \"0.1\";\n              }\n\n              var newArrayExtras1 = _this3.state.extraVars;\n\n              var newVar = _objectSpread({}, _this3.state.extraVars[0], _defineProperty({}, keys[i], \"\"));\n\n              newArrayExtras1[0] = newVar;\n\n              _this3.setState({\n                extraVars: newArrayExtras1\n              }); //newVar\n\n\n              var dado = /*#__PURE__*/React.createElement(FormGroup, {\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 17\n                }\n              }, /*#__PURE__*/React.createElement(\"label\", {\n                htmlFor: valS,\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 501,\n                  columnNumber: 19\n                }\n              }, valS), /*#__PURE__*/React.createElement(FormInput, {\n                id: valS,\n                type: type,\n                step: step,\n                placeholder: valS,\n                onChange: function onChange(e) {\n                  var extrasArray = _this3.state.extraVars;\n\n                  var newExtraVars = _objectSpread({}, _this3.state.extraVars[0], _defineProperty({}, e.target.id, e.target.value));\n\n                  extrasArray[0] = newExtraVars;\n\n                  _this3.setState({\n                    extraVars: extrasArray\n                  });\n                },\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 502,\n                  columnNumber: 19\n                }\n              }));\n              dadosAluno.push(dado);\n            }\n\n            dadosFinaisAluno = dadosAluno;\n          } // Save data to state\n\n\n          this_.setState({\n            extraParent: dadosFinaisPai,\n            extraStudent: dadosFinaisAluno,\n            extraPai: extraPai\n          });\n        } else {\n          console.log(\"doc não existe\");\n        }\n      }).catch(function (err) {\n        alert(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/React.createElement(ListGroup, {\n        flush: true,\n        value: \"titulo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 13\n        }\n      }, this.state.resgistosPorAprovar && this.state.dicionarioRegistos ? this.state.resgistosPorAprovar.map(function (post, idx) {\n        return /*#__PURE__*/React.createElement(Col, {\n          lg: \"4\",\n          key: idx,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 550,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(Card, {\n          small: true,\n          className: \"card-post mb-4\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(CardBody, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"h5\", {\n          className: \"card-title\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 25\n          }\n        }, post.Nome), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"card-text text-muted\",\n          style: {\n            whiteSpace: \"nowrap\",\n            width: \"inherit\",\n            overflow: \"hidden\",\n            textOverflow: \"ellipsis\"\n          },\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 25\n          }\n        }, post.Email)), /*#__PURE__*/React.createElement(CardFooter, {\n          className: \"border-top d-flex\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"card-post__author d-flex\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"my-auto ml-auto\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(ApprovalModal, {\n          dados: _this4.state.dicionarioRegistos ? _this4.state.dicionarioRegistos[post.Email] : \"\",\n          parentComponent: _this4,\n          componentDidMount: _this4.componentDidMount,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 27\n          }\n        })))));\n      }) : /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 17\n        }\n      }, approvalPageLoading[languageCode]))), this.state.redirect, /*#__PURE__*/React.createElement(Button, {\n        theme: \"danger\",\n        onClick: this.deletePassedRegisters,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 11\n        }\n      }, cleanButton[languageCode])));\n    }\n  }]);\n\n  return Approval_Page;\n}(Component);\n\nexport default Approval_Page;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/approval-page/ApprovalPage.js"],"names":["React","Component","Fragment","ListGroup","ListGroupItem","Row","Col","Card","CardBody","CardFooter","FormInput","FormGroup","Button","FormFeedback","Redirect","firestore","firebaseConfig","ApprovalModal","cleanButton","languageCode","assocParameters","approvalPageLoading","parentsParameters","deleteAccount","Approval_Page","props","state","resgistosPorAprovar","dicionarioRegistos","blocking","errors","timer","redirect","extraParent","extraStudent","moreStudents","studentNumber","extraVars","extraPai","daysToDelete","renderExtra","bind","deletePassedRegisters","reload","addStudent","getParentsToApprove","componentDidMount","setState","assocDoc","JSON","parse","window","localStorage","getItem","DAYS_TO_DELETE_REGISTRATION","parseInt","this_","currentUser","pathname","clearInterval","_isMounted","project_id","projectId","i","json","data","date","Date","_seconds","days","compareDate","getTime","today","EMAIL","then","uri","NAME","request","fetch","resp","resposta","catch","error","console","log","length","nomeAluno","nomeAlunoFeedBack","anoEscolaridade","anoEscolaridadeFeedBack","dadosFinaisAluno","extrasDoc","doc","get","exists","dataDoc","studentData","undefined","keys","Object","dadosAluno","valS","type","step","includes","idS","newArrayExtras1","newVar","n","dado","e","extrasArray","newExtraVars","target","id","value","push","novoArrayAlunos","concat","novoArrayNomeAlunoFeedBack","novoArrayAnoEscolaridade","novoArrayAnoEscolaridadeFeedBack","newName","newNameFeedback","newYear","newYearFeedback","x","add","newAdd","split","display","arrayAnterior","err","alert","toString","title","dados","dadosFinaisPai","eeData","dadosPai","val","newArrayExtras","map","post","idx","Nome","whiteSpace","width","overflow","textOverflow","Email"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\r\nimport {\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  FormInput,\r\n  FormGroup,\r\n  Button,\r\n  FormFeedback,\r\n} from \"shards-react\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport {  Redirect } from \"react-router-dom\";\r\nimport {\r\n  firestore,\r\n  firebaseConfig,\r\n} from \"../../firebase-config\";\r\nimport ApprovalModal from \"./ApprovalModal\";\r\nimport {\r\n  cleanButton,\r\n  languageCode,\r\n  assocParameters,\r\n  approvalPageLoading, parentsParameters,\r\n} from \"../../utils/general_utils\";\r\nimport {deleteAccount} from \"../../firebase_scripts/profile_functions\";\r\n\r\nclass Approval_Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resgistosPorAprovar: null,\r\n      dicionarioRegistos: null,\r\n      blocking: false,\r\n      errors: {},\r\n      timer: null,\r\n      redirect: null,\r\n\r\n      extraParent: null,\r\n      extraStudent: null,\r\n      moreStudents: null,\r\n      studentNumber: 1, //Counts number of students\r\n      extraVars: [{}],\r\n      extraPai: 0, //Counts number of extra parameters that belong to the parent part -> they are stored in extraVars[0] along with the extra values from the first student\r\n      daysToDelete: 7,\r\n    };\r\n\r\n    this.renderExtra = this.renderExtra.bind(this);\r\n    this.deletePassedRegisters = this.deletePassedRegisters.bind(this);\r\n    this.reload = this.reload.bind(this);\r\n    this.addStudent = this.addStudent.bind(this);\r\n    this.getParentsToApprove = this.getParentsToApprove.bind(this);\r\n    this.componentDidMount = this.componentDidMount.bind(this);\r\n  }\r\n\r\n  /*********************************** LIFECYCLE ***********************************/\r\n  reload() {\r\n    this.setState({\r\n      dicionarioRegistos: null,\r\n      resgistosPorAprovar: null,\r\n    });\r\n    this.getParentsToApprove();\r\n    this.renderExtra();\r\n  }\r\n\r\n  componentDidMount() {\r\n    //this._isMounted = true;\r\n\r\n    const assocDoc = JSON.parse(window.localStorage.getItem(\"assocDoc\"));\r\n    if (assocDoc != null) {\r\n      let daysToDelete =\r\n        assocDoc[assocParameters.DAYS_TO_DELETE_REGISTRATION[languageCode]];\r\n      daysToDelete = parseInt(daysToDelete, 10);\r\n\r\n      if (daysToDelete != null) {\r\n        this.setState({ daysToDelete: daysToDelete });\r\n      }\r\n    }\r\n\r\n    this.getParentsToApprove();\r\n    this.renderExtra();\r\n\r\n    //var timer = setInterval(() => this.deletePassedRegisters(), 1000 * 30 * 1);\r\n    //this.setState({ timer: timer });\r\n\r\n    const this_ = this;\r\n    var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\r\n    if (currentUser != null) {\r\n    } else {\r\n      //Redirect to login\r\n      var redirect = (\r\n        <Redirect\r\n          to={{\r\n            pathname: \"/\",\r\n          }}\r\n        />\r\n      );\r\n      this.setState({ redirect: redirect });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.state.timer);\r\n    this._isMounted = false;\r\n  }\r\n\r\n  deletePassedRegisters() {\r\n    const { resgistosPorAprovar, daysToDelete } = this.state;\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    if (resgistosPorAprovar != null) {\r\n      for (let i = 0; i < resgistosPorAprovar.length; i++) {\r\n        let json = resgistosPorAprovar[i];\r\n\r\n        let data = json[\"Data inscricao\"];\r\n\r\n        if (data != null) {\r\n          let date = new Date(data._seconds * 1000);\r\n          let days = daysToDelete;\r\n          let compareDate = new Date(date.getTime() + days * 86400000);\r\n          let today = new Date();\r\n\r\n          if (compareDate.getTime() < today.getTime()) {\r\n            deleteAccount(json[parentsParameters.EMAIL[languageCode]]).then(() => {\r\n              let uri =\r\n                \"https://us-central1-\" +\r\n                project_id +\r\n                \".cloudfunctions.net/api/sendRejectedEmail?\" +\r\n                \"email=\" +\r\n                json[parentsParameters.EMAIL[languageCode]] +\r\n                \"&\" +\r\n                \"nome=\" +\r\n                json[parentsParameters.NAME[languageCode]];\r\n              const request = async () => {\r\n                let resposta;\r\n                await fetch(uri)\r\n                  .then((resp) => resp.json())\r\n                  .then(function (data) {\r\n                    resposta = data;\r\n                  })\r\n                  .catch(function (error) {\r\n                    console.log(error);\r\n                  });\r\n              };\r\n              return request();\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n    Function to add new student to form\r\n   */\r\n  addStudent() {\r\n    var {\r\n      studentNumber,\r\n      nomeAluno,\r\n      nomeAlunoFeedBack,\r\n      anoEscolaridade,\r\n      anoEscolaridadeFeedBack,\r\n      extraStudent,\r\n      moreStudents,\r\n    } = this.state;\r\n\r\n    var this_ = this;\r\n\r\n    var dadosFinaisAluno = null;\r\n\r\n    //Get student parameters from database\r\n    const extrasDoc = firestore.doc(\"initialConfigs/newParameters\");\r\n    extrasDoc\r\n      .get()\r\n      .then((doc) => {\r\n        if (doc.exists === true) {\r\n          const dataDoc = doc.data();\r\n\r\n          const studentData = dataDoc[\"aluno\"];\r\n          if (studentData !== undefined) {\r\n            var keys = Object.keys(studentData);\r\n\r\n            var dadosAluno = [];\r\n            for (var i = 0; i < keys.length; i++) {\r\n              var valS = keys[i];\r\n              var type = studentData[valS];\r\n              var step = null;\r\n\r\n              if (type.includes(\"text\")) {\r\n                type = \"text\";\r\n              } else if (type.includes(\"int\")) {\r\n                type = \"number\";\r\n                step = \"1\";\r\n              } else if (type.includes(\"decimal\")) {\r\n                type = \"number\";\r\n                step = \"0.1\";\r\n              }\r\n\r\n              var idS = valS + \"-\" + studentNumber; //Id now contains a unique number to identify it\r\n\r\n              //Create dictionary for this student's values and add it to extraVars\r\n              var newArrayExtras1 = this.state.extraVars; //Get array of dictionaries\r\n              var newVar;\r\n              if (i == 0) {\r\n                newVar = { [idS]: \"\" };\r\n              } else {\r\n                newVar = { ...this.state.extraVars[studentNumber], [idS]: \"\" };\r\n              }\r\n              newArrayExtras1[studentNumber] = newVar;\r\n              this.setState({ extraVars: newArrayExtras1 });\r\n\r\n              const n = studentNumber;\r\n\r\n              //Object to render\r\n              var dado = (\r\n                <FormGroup>\r\n                  <label htmlFor={idS}>{valS}</label>\r\n                  <FormInput\r\n                    id={idS}\r\n                    type={type}\r\n                    step={step}\r\n                    placeholder={valS}\r\n                    onChange={(e) => {\r\n                      var extrasArray = this.state.extraVars;\r\n                      var newExtraVars = {\r\n                        ...this.state.extraVars[n],\r\n                        [e.target.id]: e.target.value,\r\n                      };\r\n                      extrasArray[n] = newExtraVars;\r\n                      this.setState({\r\n                        extraVars: extrasArray,\r\n                      });\r\n                    }}\r\n                  />\r\n                </FormGroup>\r\n              );\r\n              dadosAluno.push(dado);\r\n            }\r\n\r\n            dadosFinaisAluno = dadosAluno;\r\n\r\n            //Similar process to name and year of student\r\n            var novoArrayAlunos = nomeAluno.concat(\"\");\r\n            var novoArrayNomeAlunoFeedBack = nomeAlunoFeedBack.concat(null); //not working, we are using alert method\r\n            var novoArrayAnoEscolaridade = anoEscolaridade.concat(\"\");\r\n            var novoArrayAnoEscolaridadeFeedBack = anoEscolaridadeFeedBack.concat(\r\n              null\r\n            );\r\n\r\n            this_.setState({\r\n              nomeAluno: novoArrayAlunos,\r\n              nomeAlunoFeedBack: novoArrayNomeAlunoFeedBack,\r\n              anoEscolaridade: novoArrayAnoEscolaridade,\r\n              anoEscolaridadeFeedBack: novoArrayAnoEscolaridadeFeedBack,\r\n            });\r\n\r\n            var newName = \"studentName-\" + studentNumber;\r\n            var newNameFeedback = newName + \"FeedBack\";\r\n            var newYear = \"studentYear-\" + studentNumber;\r\n            var newYearFeedback = newYear + \"FeedBack\";\r\n            const x = studentNumber;\r\n\r\n            var add = (\r\n              <Fragment>\r\n                <hr />\r\n                <FormGroup>\r\n                  <label htmlFor=\"studentName\">Nome Aluno</label>\r\n                  <FormInput\r\n                    invalid={this_.state.nomeAlunoFeedBack[x]}\r\n                    onChange={(e) => {\r\n                      var newAdd = novoArrayAlunos;\r\n                      var n = e.target.id.split(\"-\")[1];\r\n                      newAdd[n] = e.target.value;\r\n                      this.setState({\r\n                        nomeAluno: newAdd,\r\n                      });\r\n                    }}\r\n                    id={newName}\r\n                    type=\"text\"\r\n                    placeholder=\"Nome\"\r\n                    required\r\n                  />\r\n                  <FormFeedback\r\n                    id={newNameFeedback}\r\n                    valid={false}\r\n                    style={{ display: \"d-block\" }}\r\n                  >\r\n                    Por favor, preencha este campo\r\n                  </FormFeedback>\r\n                </FormGroup>\r\n\r\n                {/* Descricao Textarea */}\r\n                <FormGroup>\r\n                  <label htmlFor=\"studentYear\">Ano Escolaridade</label>\r\n                  <FormInput\r\n                    invalid={this_.state.anoEscolaridadeFeedBack[x]}\r\n                    onChange={(e) => {\r\n                      var newAdd = novoArrayAnoEscolaridade;\r\n                      var n = e.target.id.split(\"-\")[1];\r\n                      newAdd[n] = e.target.value;\r\n                      this.setState({\r\n                        anoEscolaridade: newAdd,\r\n                      });\r\n                    }}\r\n                    id={newYear}\r\n                    type=\"text\"\r\n                    placeholder=\"5º\"\r\n                    required\r\n                  />\r\n                  <FormFeedback\r\n                    id={newYearFeedback}\r\n                    valid={false}\r\n                    style={{ display: \"d-block\" }}\r\n                  >\r\n                    Por favor, preencha este campo\r\n                  </FormFeedback>\r\n                </FormGroup>\r\n                {dadosFinaisAluno}\r\n              </Fragment>\r\n            );\r\n\r\n            studentNumber++; //Increase studentNumber\r\n\r\n            var arrayAnterior = moreStudents;\r\n            if (moreStudents == null) {\r\n              arrayAnterior = [add];\r\n            } else {\r\n              arrayAnterior = [moreStudents].concat(add);\r\n            }\r\n\r\n            this_.setState({\r\n              moreStudents: arrayAnterior,\r\n              studentNumber: studentNumber,\r\n            });\r\n          }\r\n        } else {\r\n          console.log(\"doc não existe\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n      });\r\n  }\r\n\r\n  getParentsToApprove() {\r\n    var this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n    let uri =\r\n      \"https://us-central1-\" +\r\n      project_id +\r\n      \".cloudfunctions.net/api/getParents\";\r\n    const request = async () => {\r\n      let resposta;\r\n      await fetch(uri)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          //console.log(\"ShowEmaildata: \", data);\r\n          var resgistosPorAprovar = [];\r\n          var dicionarioRegistos = {};\r\n          for (var i = 0; i < data.length; i++) {\r\n            if (\r\n              data[i][\"Validated\"] != undefined &&\r\n              data[i][\"Validated\"] != null &&\r\n              data[i][\"Validated\"].toString() == \"false\"\r\n            ) {\r\n              if (\r\n                data[i][\"Quotas pagas\"] != undefined &&\r\n                data[i][\"Quotas pagas\"] != null &&\r\n                (data[i][\"Quotas pagas\"].toString() == \"Não\" ||\r\n                  data[i][\"Quotas pagas\"].toString() == \"false\")\r\n              ) {\r\n                resgistosPorAprovar.push(data[i]);\r\n                var title = data[i][\"Email\"];\r\n                dicionarioRegistos[title] = data[i];\r\n              }\r\n            }\r\n          }\r\n          this_.setState({\r\n            dicionarioRegistos: dicionarioRegistos,\r\n            resgistosPorAprovar: resgistosPorAprovar,\r\n          });\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n      return resposta;\r\n    };\r\n\r\n    var dados = request();\r\n  }\r\n\r\n  showDetails(e) {}\r\n  /**\r\n    Function to get extra parameters for parent and students from firestore and load them\r\n   */\r\n  renderExtra() {\r\n    var { extraParent, extraStudent, moreStudents, extraVars } = this.state;\r\n    var this_ = this;\r\n\r\n    var dadosFinaisPai = null;\r\n    var dadosFinaisAluno = null;\r\n\r\n    const extrasDoc = firestore.doc(\"initialConfigs/newParameters\");\r\n    extrasDoc\r\n      .get()\r\n      .then((doc) => {\r\n        if (doc.exists === true) {\r\n          const dataDoc = doc.data();\r\n          //console.log(\"dados extras: \" + JSON.stringify(dataDoc));\r\n\r\n          const eeData = dataDoc[\"EE\"]; // Get parent dictionary of extra parameters\r\n          if (eeData !== undefined) {\r\n            var keys = Object.keys(eeData);\r\n\r\n            var extraPai = 0; // Counts number of extra parameters that belong to the parent part of the registry\r\n\r\n            var dadosPai = []; // Will store all objects to render from the parent side\r\n            for (var i = 0; i < keys.length; i++) {\r\n              extraPai++;\r\n              var val = keys[i]; // Actual name of parameter\r\n              var type = eeData[val]; //Type of parameter (text, inteiro, etc)\r\n\r\n              //Change type to html equivalent\r\n              if (type.includes(\"text\")) {\r\n                type = \"text\";\r\n              } else if (type.includes(\"int\")) {\r\n                type = \"number\";\r\n              }\r\n\r\n              //These following lines add parameter to extraVars array of dictionaries (extraVars stores the actual user input)\r\n              var newArrayExtras = this.state.extraVars; // Array of dictionaries\r\n              var newVar = { ...this.state.extraVars[0], [val]: \"\" }; // Add parameter(val) to first dictionary\r\n              newArrayExtras[0] = newVar;\r\n              this.setState({ extraVars: newArrayExtras });\r\n\r\n              // Objects to render\r\n              var dado = (\r\n                <FormGroup>\r\n                  <label htmlFor={val}>{val}</label>\r\n                  <FormInput\r\n                    id={val}\r\n                    type={type}\r\n                    placeholder={val}\r\n                    onChange={(e) => {\r\n                      var extrasArray = this.state.extraVars;\r\n                      var newExtraVars = {\r\n                        ...this.state.extraVars[0],\r\n                        [e.target.id]: e.target.value,\r\n                      };\r\n                      extrasArray[0] = newExtraVars;\r\n                      this.setState({\r\n                        extraVars: extrasArray,\r\n                      });\r\n                    }}\r\n                  />\r\n                  <FormFeedback\r\n                    id={val + \"Feedback\"}\r\n                    valid={false}\r\n                    style={{ display: \"d-block\" }}\r\n                  >\r\n                    Por favor, preencha este campo\r\n                  </FormFeedback>\r\n                </FormGroup>\r\n              );\r\n              dadosPai.push(dado); //Add object to array\r\n            }\r\n            dadosFinaisPai = dadosPai;\r\n          }\r\n\r\n          // The following code follows the same parent logic, just for the student\r\n          const studentData = dataDoc[\"aluno\"];\r\n          if (studentData !== undefined) {\r\n            var keys = Object.keys(studentData);\r\n\r\n            var dadosAluno = [];\r\n            for (var i = 0; i < keys.length; i++) {\r\n              var valS = keys[i];\r\n              var type = studentData[valS];\r\n              var step = null;\r\n\r\n              if (type.includes(\"text\")) {\r\n                type = \"text\";\r\n              } else if (type.includes(\"int\")) {\r\n                type = \"number\";\r\n                step = \"1\";\r\n              } else if (type.includes(\"decimal\")) {\r\n                type = \"number\";\r\n                step = \"0.1\";\r\n              }\r\n\r\n              var newArrayExtras1 = this.state.extraVars;\r\n              var newVar = { ...this.state.extraVars[0], [keys[i]]: \"\" };\r\n              newArrayExtras1[0] = newVar;\r\n              this.setState({ extraVars: newArrayExtras1 }); //newVar\r\n\r\n              var dado = (\r\n                <FormGroup>\r\n                  <label htmlFor={valS}>{valS}</label>\r\n                  <FormInput\r\n                    id={valS}\r\n                    type={type}\r\n                    step={step}\r\n                    placeholder={valS}\r\n                    onChange={(e) => {\r\n                      var extrasArray = this.state.extraVars;\r\n                      var newExtraVars = {\r\n                        ...this.state.extraVars[0],\r\n                        [e.target.id]: e.target.value,\r\n                      };\r\n                      extrasArray[0] = newExtraVars;\r\n                      this.setState({\r\n                        extraVars: extrasArray,\r\n                      });\r\n                    }}\r\n                  />\r\n                </FormGroup>\r\n              );\r\n              dadosAluno.push(dado);\r\n            }\r\n            dadosFinaisAluno = dadosAluno;\r\n          }\r\n\r\n          // Save data to state\r\n          this_.setState({\r\n            extraParent: dadosFinaisPai,\r\n            extraStudent: dadosFinaisAluno,\r\n            extraPai: extraPai,\r\n          });\r\n        } else {\r\n          console.log(\"doc não existe\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ListGroup flush value={\"titulo\"}>\r\n        <ListGroupItem className=\"p-3\">\r\n          <Col>\r\n            <Row>\r\n              {this.state.resgistosPorAprovar &&\r\n              this.state.dicionarioRegistos ? (\r\n                this.state.resgistosPorAprovar.map((post, idx) => (\r\n                  <Col lg=\"4\" key={idx}>\r\n                    <Card small className=\"card-post mb-4\">\r\n                      <CardBody>\r\n                        <h5 className=\"card-title\">{post.Nome}</h5>\r\n                        <p\r\n                          className=\"card-text text-muted\"\r\n                          style={{\r\n                            whiteSpace: \"nowrap\",\r\n                            width: \"inherit\",\r\n                            overflow: \"hidden\",\r\n                            textOverflow: \"ellipsis\",\r\n                          }}\r\n                        >\r\n                          {post.Email}\r\n                        </p>\r\n                      </CardBody>\r\n                      <CardFooter className=\"border-top d-flex\">\r\n                        <div className=\"card-post__author d-flex\"></div>\r\n                        <div className=\"my-auto ml-auto\">\r\n                          <ApprovalModal\r\n                            dados={\r\n                              this.state.dicionarioRegistos\r\n                                ? this.state.dicionarioRegistos[post.Email]\r\n                                : \"\"\r\n                            }\r\n                            parentComponent={this}\r\n                            componentDidMount={this.componentDidMount}\r\n                          />\r\n                        </div>\r\n                      </CardFooter>\r\n                    </Card>\r\n                  </Col>\r\n                ))\r\n              ) : (\r\n                <div>{approvalPageLoading[languageCode]}</div>\r\n              )}\r\n            </Row>\r\n          </Col>\r\n          {this.state.redirect}\r\n          <Button theme=\"danger\" onClick={this.deletePassedRegisters}>\r\n            {cleanButton[languageCode]}\r\n          </Button>\r\n        </ListGroupItem>\r\n      </ListGroup>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Approval_Page;\r\n"]},"metadata":{},"sourceType":"module"}