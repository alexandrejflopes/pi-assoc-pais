{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\login-page\\\\LoginPage.js\";\nimport React, { Component, Fragment } from \"react\";\nimport { Col, Row, Button, Form, FormGroup, FormFeedback, Input } from \"reactstrap\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport BlockUi from \"react-block-ui\";\nimport { Loader } from \"react-loaders\";\nimport { firestore, firebase_auth, firebase, firebaseConfig } from \"../../firebase-config\";\nimport { toast, Bounce } from \"react-toastify\"; //import * as UsersService from \"../../services/users/api_user\";\n\nimport CostumForm from \"../../common/Form/form\";\nimport bg1 from \"../../assets/mother.png\";\nimport { languageCode, parentsParameters, showToast, toastTypes } from \"../../utils/general_utils\";\nimport { errorLoginFB, errorLoginGoogle, errorNoLogedInUser } from \"../../utils/messages_strings\";\nimport { signInWithFacebook, signInWithGoogle, signInWithLink, signInWithMicrosoft } from \"../../utils/common_strings\";\n\nvar Login = /*#__PURE__*/function (_CostumForm) {\n  _inherits(Login, _CostumForm);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n\n    _this.doSubmit = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n        var credentials, this_, project_id, data, message, uri, request, dados;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                e.preventDefault();\n                credentials = _this.state.credentials;\n                this_ = _assertThisInitialized(_this);\n                project_id = firebaseConfig.projectId;\n                data = {};\n\n                if (credentials.email === \"\") {\n                  alert(\"Insira o seu email!\");\n                } else {\n                  firebase.auth().getRedirectResult().then(function (result) {\n                    if (result.credential) {\n                      // This gives you a Google Access Token. You can use it to access the Google API.\n                      var token = result.credential.accessToken; // ...\n                    } // The signed-in user info.\n\n\n                    var user = result.user; //console.dir(\"User login: \" + JSON.stringify(result));\n                  }).catch(function (error) {\n                    // Handle Errors here.\n                    var errorCode = error.code;\n                    var errorMessage = error.message; // The email of the user's account used.\n\n                    var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n                    var credential = error.credential; // ...\n                  }); //Passar para api_user.js\n                  //console.log(credentials.email);\n\n                  message = \"A carregar...\";\n                  toast.configure();\n                  toast(message, {\n                    transition: Bounce,\n                    closeButton: true,\n                    autoClose: 5000,\n                    position: \"top-right\",\n                    type: \"info\"\n                  });\n                  uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getParent?\" + \"id=\" + credentials.email;\n\n                  request = /*#__PURE__*/function () {\n                    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n                      var resposta;\n                      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                        while (1) {\n                          switch (_context3.prev = _context3.next) {\n                            case 0:\n                              _context3.next = 2;\n                              return fetch(uri).then(function (resp) {\n                                return resp.json();\n                              }) // Transform the data into json\n                              .then(function (data) {\n                                var dataDoc = data; //console.log(data);\n\n                                if (dataDoc === undefined) {\n                                  var message = errorNoLogedInUser[languageCode];\n                                  toast.configure();\n                                  toast(message, {\n                                    transition: Bounce,\n                                    closeButton: true,\n                                    autoClose: 2000,\n                                    position: \"top-right\",\n                                    type: \"warning\"\n                                  });\n                                } else {\n                                  if (credentials.email === dataDoc.Email && dataDoc[\"Validated\"] === false) {\n                                    var _uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/sendAuthenticationEmail?\" + \"email=\" + dataDoc.Email + \"&\" + \"nome=\" + dataDoc.Nome;\n\n                                    var _request = /*#__PURE__*/function () {\n                                      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                                        var resposta;\n                                        return _regeneratorRuntime.wrap(function _callee$(_context) {\n                                          while (1) {\n                                            switch (_context.prev = _context.next) {\n                                              case 0:\n                                                _context.next = 2;\n                                                return fetch(_uri).then(function (resp) {\n                                                  return resp.json();\n                                                }) // Transform the data into json\n                                                .then(function (data) {\n                                                  resposta = data;\n                                                }).catch(function (error) {});\n\n                                              case 2:\n                                                return _context.abrupt(\"return\", resposta);\n\n                                              case 3:\n                                              case \"end\":\n                                                return _context.stop();\n                                            }\n                                          }\n                                        }, _callee);\n                                      }));\n\n                                      return function _request() {\n                                        return _ref3.apply(this, arguments);\n                                      };\n                                    }();\n\n                                    _request();\n\n                                    var hStyle = {\n                                      color: \"green\"\n                                    };\n                                    var mensagem = /*#__PURE__*/React.createElement(\"div\", {\n                                      __self: this,\n                                      __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 652,\n                                        columnNumber: 19\n                                      }\n                                    }, /*#__PURE__*/React.createElement(\"p\", {\n                                      style: hStyle,\n                                      __self: this,\n                                      __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 653,\n                                        columnNumber: 21\n                                      }\n                                    }, \"Foi-lhe enviado email com link para efetuar o login\"));\n                                    this_.setState({\n                                      msg: mensagem\n                                    });\n                                  } else if (credentials.email === dataDoc.Email && dataDoc[\"Validated\"] === true) {\n                                    var _uri2 = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/sendAuthenticationEmail?\" + \"email=\" + dataDoc.Email + \"&\" + \"nome=\" + dataDoc.Nome;\n\n                                    var _request2 = /*#__PURE__*/function () {\n                                      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                                        var resposta;\n                                        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                                          while (1) {\n                                            switch (_context2.prev = _context2.next) {\n                                              case 0:\n                                                _context2.next = 2;\n                                                return fetch(_uri2).then(function (resp) {\n                                                  return resp.json();\n                                                }) // Transform the data into json\n                                                .then(function (data) {\n                                                  resposta = data;\n                                                }).catch(function (error) {});\n\n                                              case 2:\n                                                return _context2.abrupt(\"return\", resposta);\n\n                                              case 3:\n                                              case \"end\":\n                                                return _context2.stop();\n                                            }\n                                          }\n                                        }, _callee2);\n                                      }));\n\n                                      return function _request2() {\n                                        return _ref4.apply(this, arguments);\n                                      };\n                                    }();\n\n                                    _request2();\n\n                                    var _hStyle = {\n                                      color: \"green\"\n                                    };\n                                    var mensagem = /*#__PURE__*/React.createElement(\"div\", {\n                                      __self: this,\n                                      __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 689,\n                                        columnNumber: 19\n                                      }\n                                    }, /*#__PURE__*/React.createElement(\"p\", {\n                                      style: _hStyle,\n                                      __self: this,\n                                      __source: {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 690,\n                                        columnNumber: 21\n                                      }\n                                    }, \"Foi-lhe enviado email com link para efetuar o login\"));\n                                    this_.setState({\n                                      msg: mensagem\n                                    });\n                                  } else {\n                                    showToast(errorNoLogedInUser[languageCode], 3000, toastTypes.WARNING);\n                                  }\n                                }\n                              }).catch(function (error) {\n                                //console.log(\"error2\");\n                                alert(error);\n                              });\n\n                            case 2:\n                              return _context3.abrupt(\"return\", resposta);\n\n                            case 3:\n                            case \"end\":\n                              return _context3.stop();\n                          }\n                        }\n                      }, _callee3);\n                    }));\n\n                    return function request() {\n                      return _ref2.apply(this, arguments);\n                    };\n                  }();\n\n                  dados = request();\n                }\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    var msg = _this.props.msg;\n\n    if (msg == undefined) {\n      msg = null;\n    } else {\n      var hStyle = {\n        color: \"green\"\n      };\n      msg = /*#__PURE__*/React.createElement(\"div\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: hStyle,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }\n      }, msg));\n    }\n\n    _this.state = {\n      blocking: false,\n      credentials: {\n        email: \"\",\n        password: \"\"\n      },\n      errors: {},\n      redirect: null,\n      msg: msg\n    };\n    _this.googleSignIn = _this.googleSignIn.bind(_assertThisInitialized(_this));\n    _this.FBSignIn = _this.FBSignIn.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /*********************************** LIFECYCLE ***********************************/\n\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true; // const user = UsersService.getCurrentUser();\n\n      var this_ = this;\n      window.localStorage.removeItem(\"admin\");\n      window.localStorage.removeItem(\"email\");\n      var currentUser = firebase_auth.currentUser;\n      var project_id = firebaseConfig.projectId;\n\n      if (currentUser != null) {\n        //alert(currentUser.email);\n        var email = currentUser.email;\n        var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getParent?\" + \"id=\" + email;\n\n        var request = /*#__PURE__*/function () {\n          var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n            var resposta;\n            return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n              while (1) {\n                switch (_context5.prev = _context5.next) {\n                  case 0:\n                    _context5.next = 2;\n                    return fetch(uri).then(function (resp) {\n                      return resp.json();\n                    }) // Transform the data into json\n                    .then(function (data) {\n                      var dataDoc = data; //console.log(data);\n\n                      if (dataDoc === undefined) {\n                        showToast(errorNoLogedInUser[languageCode], 3000, toastTypes.WARNING);\n                      } else {\n                        if (email === dataDoc.Email && dataDoc[\"Validated\"] === false) {\n                          var red;\n\n                          if (dataDoc[parentsParameters.PAYED_FEE[languageCode]] === false) {\n                            red = /*#__PURE__*/React.createElement(Redirect, {\n                              to: {\n                                pathname: \"/payment\",\n                                state: {\n                                  Email: dataDoc.Email,\n                                  payment: false\n                                }\n                              },\n                              __self: this,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 119,\n                                columnNumber: 21\n                              }\n                            });\n                          } else {\n                            red = /*#__PURE__*/React.createElement(Redirect, {\n                              to: {\n                                pathname: \"/payment\",\n                                state: {\n                                  Email: dataDoc.Email,\n                                  payment: true\n                                }\n                              },\n                              __self: this,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 128,\n                                columnNumber: 21\n                              }\n                            });\n                          } //Redirecionar para página de pagamento\n\n\n                          this_.setState({\n                            redirect: red\n                          });\n                        } else if (email === dataDoc.Email && dataDoc[\"Validated\"] === true) {\n                          if (dataDoc.Admin != undefined && dataDoc.Admin != null && dataDoc.Admin === true) {\n                            window.localStorage.setItem(\"admin\", dataDoc.Admin.toString());\n                          }\n\n                          window.localStorage.setItem(\"email\", dataDoc.Email);\n                          var red = /*#__PURE__*/React.createElement(Redirect, {\n                            to: {\n                              pathname: \"/profile\",\n                              state: {\n                                userEmail: currentUser.email,\n                                userProvided: true\n                              }\n                            },\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 155,\n                              columnNumber: 19\n                            }\n                          });\n                          this_.setState({\n                            redirect: red\n                          });\n                        }\n                      }\n                    }).catch(function (error) {\n                      //console.log(\"error3\");\n                      alert(error);\n                    });\n\n                  case 2:\n                    return _context5.abrupt(\"return\", resposta);\n\n                  case 3:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }\n            }, _callee5);\n          }));\n\n          return function request() {\n            return _ref5.apply(this, arguments);\n          };\n        }();\n\n        var dados = request();\n      } else if (firebase_auth.isSignInWithEmailLink(window.location.href)) {\n        var email = window.localStorage.getItem(\"emailForSignIn\");\n\n        if (!email) {\n          email = window.prompt(\"Por favor, forneça o seu email para confirmação.\");\n        }\n\n        var message = \"A carregar...\";\n        toast.configure();\n        toast(message, {\n          transition: Bounce,\n          closeButton: true,\n          autoClose: 10000,\n          position: \"top-right\",\n          type: \"info\"\n        });\n        firebase.auth().signInWithEmailLink(email, window.location.href).then(function (result) {\n          // Clear email from storage.\n          window.localStorage.removeItem(\"emailForSignIn\");\n          var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getParent?\" + \"id=\" + email;\n\n          var request = /*#__PURE__*/function () {\n            var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n              var resposta;\n              return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                while (1) {\n                  switch (_context6.prev = _context6.next) {\n                    case 0:\n                      _context6.next = 2;\n                      return fetch(uri).then(function (resp) {\n                        return resp.json();\n                      }) // Transform the data into json\n                      .then(function (data) {\n                        console.log(data);\n\n                        if (data === undefined || data.error) {\n                          var message = errorNoLogedInUser[languageCode];\n                          toast.configure();\n                          toast(message, {\n                            transition: Bounce,\n                            closeButton: true,\n                            autoClose: 2000,\n                            position: \"top-right\",\n                            type: \"warning\"\n                          });\n                        } else {\n                          if (email == data.Email && data[\"Validated\"] == false) {\n                            var red;\n\n                            if (data[parentsParameters.PAYED_FEE[languageCode]] === false) {\n                              red = /*#__PURE__*/React.createElement(Redirect, {\n                                to: {\n                                  pathname: \"/payment\",\n                                  state: {\n                                    Email: data.Email,\n                                    payment: false\n                                  }\n                                },\n                                __self: this,\n                                __source: {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 230,\n                                  columnNumber: 25\n                                }\n                              });\n                            } else {\n                              red = /*#__PURE__*/React.createElement(Redirect, {\n                                to: {\n                                  pathname: \"/payment\",\n                                  state: {\n                                    Email: data.Email,\n                                    payment: true\n                                  }\n                                },\n                                __self: this,\n                                __source: {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 239,\n                                  columnNumber: 25\n                                }\n                              });\n                            } //Redirecionar para página de pagamento\n\n\n                            this_.setState({\n                              redirect: red\n                            });\n                          } else if (email == data.Email && data[\"Validated\"] == true) {\n                            if (data.Admin != undefined && data.Admin != null && data.Admin === true) {\n                              window.localStorage.setItem(\"admin\", data.Admin.toString());\n                            }\n\n                            window.localStorage.setItem(\"email\", data.Email);\n                            var red = /*#__PURE__*/React.createElement(Redirect, {\n                              to: {\n                                pathname: \"/profile\",\n                                state: {\n                                  userEmail: email,\n                                  userProvided: true\n                                }\n                              },\n                              __self: this,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 263,\n                                columnNumber: 23\n                              }\n                            });\n                            this_.setState({\n                              redirect: red\n                            });\n                          }\n                        }\n                      }).catch(function (error) {\n                        alert(error);\n                      });\n\n                    case 2:\n                      return _context6.abrupt(\"return\", resposta);\n\n                    case 3:\n                    case \"end\":\n                      return _context6.stop();\n                  }\n                }\n              }, _callee6);\n            }));\n\n            return function request() {\n              return _ref6.apply(this, arguments);\n            };\n          }();\n\n          var dados = request();\n        }).catch(function (error) {\n          // Some error occurred, you can inspect the code: error.code\n          // Common errors could be invalid email and invalid or expired OTPs.\n          alert(\"Erro: \" + error);\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n    /*********************************** HANDLERS ***********************************/\n\n  }, {\n    key: \"googleSignIn\",\n    value: function googleSignIn() {\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var provider = new firebase.auth.GoogleAuthProvider();\n      firebase.auth().signInWithPopup(provider).then(function (result) {\n        var email = result.user.email;\n        var message = \"A carregar...\";\n        toast.configure();\n        toast(message, {\n          transition: Bounce,\n          closeButton: true,\n          autoClose: 5000,\n          position: \"top-right\",\n          type: \"info\"\n        });\n        var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getParent?\" + \"id=\" + email;\n\n        var request = /*#__PURE__*/function () {\n          var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n            var resposta;\n            return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n              while (1) {\n                switch (_context7.prev = _context7.next) {\n                  case 0:\n                    _context7.next = 2;\n                    return fetch(uri).then(function (resp) {\n                      return resp.json();\n                    }) // Transform the data into json\n                    .then(function (data) {\n                      var dataDoc = data;\n\n                      if (dataDoc === undefined || dataDoc.error) {\n                        var message = errorNoLogedInUser[languageCode];\n                        toast.configure();\n                        toast(message, {\n                          transition: Bounce,\n                          closeButton: true,\n                          autoClose: 2000,\n                          position: \"top-right\",\n                          type: \"warning\"\n                        }); //Sign out por precaução\n\n                        firebase_auth.signOut().then(function () {// Sign-out successful.\n                        }).catch(function (error) {});\n                      } else {\n                        if (email == dataDoc.Email && dataDoc[\"Validated\"] == false) {\n                          var red;\n\n                          if (dataDoc[parentsParameters.PAYED_FEE[languageCode]] === false) {\n                            red = /*#__PURE__*/React.createElement(Redirect, {\n                              to: {\n                                pathname: \"/payment\",\n                                state: {\n                                  Email: dataDoc.Email,\n                                  payment: false\n                                }\n                              },\n                              __self: this,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 357,\n                                columnNumber: 23\n                              }\n                            });\n                          } else {\n                            red = /*#__PURE__*/React.createElement(Redirect, {\n                              to: {\n                                pathname: \"/payment\",\n                                state: {\n                                  Email: dataDoc.Email,\n                                  payment: true\n                                }\n                              },\n                              __self: this,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 366,\n                                columnNumber: 23\n                              }\n                            });\n                          } //Redirecionar para página de pagamento\n\n\n                          this_.setState({\n                            redirect: red\n                          });\n                        } else if (email == dataDoc.Email && dataDoc[\"Validated\"] == true) {\n                          if (dataDoc.Admin != undefined && dataDoc.Admin != null && dataDoc.Admin === true) {\n                            window.localStorage.setItem(\"admin\", dataDoc.Admin.toString());\n                          }\n\n                          window.localStorage.setItem(\"email\", dataDoc.Email);\n                          var red = /*#__PURE__*/React.createElement(Redirect, {\n                            to: {\n                              pathname: \"/profile\",\n                              state: {\n                                userEmail: email,\n                                userProvided: true\n                              }\n                            },\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 393,\n                              columnNumber: 21\n                            }\n                          });\n                          this_.setState({\n                            redirect: red\n                          });\n                        }\n                      }\n                    }).catch(function (error) {\n                      console.log(\"error1\");\n                      alert(error);\n                    });\n\n                  case 2:\n                    return _context7.abrupt(\"return\", resposta);\n\n                  case 3:\n                  case \"end\":\n                    return _context7.stop();\n                }\n              }\n            }, _callee7);\n          }));\n\n          return function request() {\n            return _ref7.apply(this, arguments);\n          };\n        }();\n\n        var dados = request();\n      }).catch(function (error) {\n        console.log(error);\n        var message = errorLoginGoogle[languageCode];\n        toast.configure();\n        toast(message, {\n          transition: Bounce,\n          closeButton: true,\n          autoClose: 2000,\n          position: \"top-right\",\n          type: \"error\"\n        });\n      });\n    }\n  }, {\n    key: \"FBSignIn\",\n    value: function FBSignIn() {\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var provider = new firebase.auth.FacebookAuthProvider();\n      firebase.auth().signInWithPopup(provider).then(function (result) {\n        var email = result.user.email;\n        var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getParent?\" + \"id=\" + email;\n\n        var request = /*#__PURE__*/function () {\n          var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n            var resposta;\n            return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n              while (1) {\n                switch (_context8.prev = _context8.next) {\n                  case 0:\n                    _context8.next = 2;\n                    return fetch(uri).then(function (resp) {\n                      return resp.json();\n                    }) // Transform the data into json\n                    .then(function (data) {\n                      var dataDoc = data;\n\n                      if (dataDoc === undefined || dataDoc.error) {\n                        var message = errorNoLogedInUser[languageCode];\n                        toast.configure();\n                        toast(message, {\n                          transition: Bounce,\n                          closeButton: true,\n                          autoClose: 2000,\n                          position: \"top-right\",\n                          type: \"warning\"\n                        }); //Sign out por precaução\n\n                        firebase_auth.signOut().then(function () {// Sign-out successful.\n                        }).catch(function (error) {});\n                      } else {\n                        if (email == dataDoc.Email && dataDoc[\"Validated\"] == false) {\n                          var red;\n\n                          if (dataDoc[parentsParameters.PAYED_FEE[languageCode]] === false) {\n                            red = /*#__PURE__*/React.createElement(Redirect, {\n                              to: {\n                                pathname: \"/payment\",\n                                state: {\n                                  Email: dataDoc.Email,\n                                  payment: false\n                                }\n                              },\n                              __self: this,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 477,\n                                columnNumber: 23\n                              }\n                            });\n                          } else {\n                            red = /*#__PURE__*/React.createElement(Redirect, {\n                              to: {\n                                pathname: \"/payment\",\n                                state: {\n                                  Email: dataDoc.Email,\n                                  payment: true\n                                }\n                              },\n                              __self: this,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 486,\n                                columnNumber: 23\n                              }\n                            });\n                          } //Redirecionar para página de pagamento\n\n\n                          this_.setState({\n                            redirect: red\n                          });\n                        } else if (email == dataDoc.Email && dataDoc[\"Validated\"] == true) {\n                          if (dataDoc.Admin != undefined && dataDoc.Admin != null && dataDoc.Admin === true) {\n                            window.localStorage.setItem(\"admin\", dataDoc.Admin.toString());\n                          }\n\n                          window.localStorage.setItem(\"email\", dataDoc.Email);\n                          var red = /*#__PURE__*/React.createElement(Redirect, {\n                            to: {\n                              pathname: \"/profile\",\n                              state: {\n                                userEmail: email,\n                                userProvided: true\n                              }\n                            },\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 513,\n                              columnNumber: 21\n                            }\n                          });\n                          this_.setState({\n                            redirect: red\n                          });\n                        }\n                      }\n                    }).catch(function (error) {\n                      console.log(\"error1\");\n                      alert(error);\n                    });\n\n                  case 2:\n                    return _context8.abrupt(\"return\", resposta);\n\n                  case 3:\n                  case \"end\":\n                    return _context8.stop();\n                }\n              }\n            }, _callee8);\n          }));\n\n          return function request() {\n            return _ref8.apply(this, arguments);\n          };\n        }();\n\n        var dados = request();\n      }).catch(function (error) {\n        console.log(error);\n        var message = errorLoginFB[languageCode];\n        toast.configure();\n        toast(message, {\n          transition: Bounce,\n          closeButton: true,\n          autoClose: 2000,\n          position: \"top-right\",\n          type: \"error\"\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(BlockUi, {\n        tag: \"div\",\n        blocking: this.state.blocking,\n        loader: /*#__PURE__*/React.createElement(Loader, {\n          active: true,\n          type: \"line-scale-pulse-out\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 722,\n            columnNumber: 19\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 719,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"h-100 bg-animation\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex h-100 justify-content-center align-items-center\",\n        style: {\n          background: \"url(\" + bg1 + \")\",\n          backgroundRepeat: \"no-repeat\",\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 725,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"8\",\n        className: \"mx-auto app-login-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-dialog w-100 mx-auto\",\n        style: {\n          boxShadow: \"0px 1px 10px 0px rgba(52, 58, 64, 0.3)\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 735,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-content\",\n        style: {\n          border: \"none\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 741,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-body\",\n        style: {\n          padding: \"2.5rem\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 742,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"h6 modal-title text-center mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"mb-4\",\n        src: bg1,\n        style: {\n          height: \"100px\",\n          width: \"auto\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 744,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 25\n        }\n      }, \"Insira os seus dados\")), this.state.msg, /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.doSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 754,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        form: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: 12,\n        style: this.state.msg ? {\n          margin: \"8px\"\n        } : {\n          margin: \"0px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 27\n        }\n      }, this.renderInput(\"email\", \"email\", \"Email\", \"Insira o email\")), /*#__PURE__*/React.createElement(Col, {\n        md: 12,\n        style: {\n          textAlign: \"center\",\n          margin: \"3px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 772,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"info\",\n        style: {\n          width: \"200px\",\n          textAlign: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 776,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-envelope\",\n        style: {\n          marginRight: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 31\n        }\n      }), signInWithLink[languageCode])), /*#__PURE__*/React.createElement(Col, {\n        md: 12,\n        style: {\n          textAlign: \"center\",\n          margin: \"3px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 791,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"danger\",\n        onClick: this.googleSignIn,\n        style: {\n          width: \"200px\",\n          textAlign: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 795,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fab fa-google\",\n        style: {\n          marginRight: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 803,\n          columnNumber: 31\n        }\n      }), signInWithGoogle[languageCode])), /*#__PURE__*/React.createElement(Col, {\n        md: 12,\n        style: {\n          textAlign: \"center\",\n          margin: \"3px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 811,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.FBSignIn,\n        style: {\n          width: \"200px\",\n          textAlign: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 815,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fab fa-facebook-f\",\n        style: {\n          marginRight: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 823,\n          columnNumber: 31\n        }\n      }), signInWithFacebook[languageCode])), /*#__PURE__*/React.createElement(Col, {\n        md: 12,\n        style: {\n          textAlign: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 845,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 846,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 848,\n          columnNumber: 29\n        }\n      }, \"N\\xE3o tem conta?\", \" \", /*#__PURE__*/React.createElement(Link, {\n        to: \"/register\",\n        className: \"text-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 850,\n          columnNumber: 31\n        }\n      }, \"Registe-se\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 854,\n          columnNumber: 29\n        }\n      }))))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center text-black opacity-8 mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 861,\n          columnNumber: 17\n        }\n      }, \"Copyright \\xA9\"), this.state.redirect)))));\n    }\n  }]);\n\n  return Login;\n}(CostumForm);\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/login-page/LoginPage.js"],"names":["React","Component","Fragment","Col","Row","Button","Form","FormGroup","FormFeedback","Input","Link","Redirect","BlockUi","Loader","firestore","firebase_auth","firebase","firebaseConfig","toast","Bounce","CostumForm","bg1","languageCode","parentsParameters","showToast","toastTypes","errorLoginFB","errorLoginGoogle","errorNoLogedInUser","signInWithFacebook","signInWithGoogle","signInWithLink","signInWithMicrosoft","Login","props","doSubmit","e","preventDefault","credentials","state","this_","project_id","projectId","data","email","alert","auth","getRedirectResult","then","result","credential","token","accessToken","user","catch","error","errorCode","code","errorMessage","message","configure","transition","closeButton","autoClose","position","type","uri","request","fetch","resp","json","dataDoc","undefined","Email","Nome","resposta","hStyle","color","mensagem","setState","msg","WARNING","dados","blocking","password","errors","redirect","googleSignIn","bind","FBSignIn","_isMounted","window","localStorage","removeItem","currentUser","red","PAYED_FEE","pathname","payment","Admin","setItem","toString","userEmail","userProvided","isSignInWithEmailLink","location","href","getItem","prompt","signInWithEmailLink","console","log","provider","GoogleAuthProvider","signInWithPopup","signOut","FacebookAuthProvider","background","backgroundRepeat","backgroundSize","backgroundPosition","boxShadow","border","padding","height","width","margin","renderInput","textAlign","marginRight"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\r\nimport {\r\n  Col,\r\n  Row,\r\n  Button,\r\n  Form,\r\n  FormGroup,\r\n  FormFeedback,\r\n  Input,\r\n} from \"reactstrap\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport BlockUi from \"react-block-ui\";\r\nimport { Loader } from \"react-loaders\";\r\nimport {\r\n  firestore,\r\n  firebase_auth,\r\n  firebase,\r\n  firebaseConfig,\r\n} from \"../../firebase-config\";\r\nimport { toast, Bounce } from \"react-toastify\";\r\n\r\n//import * as UsersService from \"../../services/users/api_user\";\r\nimport CostumForm from \"../../common/Form/form\";\r\nimport bg1 from \"../../assets/mother.png\";\r\nimport {\r\n  languageCode,\r\n  parentsParameters,\r\n  showToast,\r\n  toastTypes,\r\n} from \"../../utils/general_utils\";\r\nimport {\r\n  errorLoginFB,\r\n  errorLoginGoogle,\r\n  errorNoLogedInUser,\r\n} from \"../../utils/messages_strings\";\r\nimport {\r\n  signInWithFacebook,\r\n  signInWithGoogle,\r\n  signInWithLink,\r\n  signInWithMicrosoft,\r\n} from \"../../utils/common_strings\";\r\n\r\nclass Login extends CostumForm {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    var msg = this.props.msg;\r\n    if (msg == undefined) {\r\n      msg = null;\r\n    } else {\r\n      const hStyle = { color: \"green\" };\r\n\r\n      msg = (\r\n        <div>\r\n          <p style={hStyle}>{msg}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    this.state = {\r\n      blocking: false,\r\n      credentials: {\r\n        email: \"\",\r\n        password: \"\",\r\n      },\r\n      errors: {},\r\n      redirect: null,\r\n      msg: msg,\r\n    };\r\n\r\n    this.googleSignIn = this.googleSignIn.bind(this);\r\n    this.FBSignIn = this.FBSignIn.bind(this);\r\n  }\r\n\r\n  /*********************************** LIFECYCLE ***********************************/\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n    // const user = UsersService.getCurrentUser();\r\n\r\n    const this_ = this;\r\n\r\n    window.localStorage.removeItem(\"admin\");\r\n    window.localStorage.removeItem(\"email\");\r\n\r\n    const currentUser = firebase_auth.currentUser;\r\n\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    if (currentUser != null) {\r\n      //alert(currentUser.email);\r\n      var email = currentUser.email;\r\n      let uri =\r\n        \"https://us-central1-\" +\r\n        project_id +\r\n        \".cloudfunctions.net/api/getParent?\" +\r\n        \"id=\" +\r\n        email;\r\n      const request = async () => {\r\n        let resposta;\r\n        await fetch(uri)\r\n          .then((resp) => resp.json()) // Transform the data into json\r\n          .then(function (data) {\r\n            var dataDoc = data;\r\n\r\n            //console.log(data);\r\n            if (dataDoc === undefined) {\r\n              showToast(\r\n                errorNoLogedInUser[languageCode],\r\n                3000,\r\n                toastTypes.WARNING\r\n              );\r\n            } else {\r\n              if (email === dataDoc.Email && dataDoc[\"Validated\"] === false) {\r\n                var red;\r\n                if (\r\n                  dataDoc[parentsParameters.PAYED_FEE[languageCode]] === false\r\n                ) {\r\n                  red = (\r\n                    <Redirect\r\n                      to={{\r\n                        pathname: \"/payment\",\r\n                        state: { Email: dataDoc.Email, payment: false },\r\n                      }}\r\n                    />\r\n                  );\r\n                } else {\r\n                  red = (\r\n                    <Redirect\r\n                      to={{\r\n                        pathname: \"/payment\",\r\n                        state: { Email: dataDoc.Email, payment: true },\r\n                      }}\r\n                    />\r\n                  );\r\n                }\r\n                //Redirecionar para página de pagamento\r\n                this_.setState({ redirect: red });\r\n              } else if (\r\n                email === dataDoc.Email &&\r\n                dataDoc[\"Validated\"] === true\r\n              ) {\r\n                if (\r\n                  dataDoc.Admin != undefined &&\r\n                  dataDoc.Admin != null &&\r\n                  dataDoc.Admin === true\r\n                ) {\r\n                  window.localStorage.setItem(\r\n                    \"admin\",\r\n                    dataDoc.Admin.toString()\r\n                  );\r\n                }\r\n                window.localStorage.setItem(\"email\", dataDoc.Email);\r\n\r\n                var red = (\r\n                  <Redirect\r\n                    to={{\r\n                      pathname: \"/profile\",\r\n                      state: {\r\n                        userEmail: currentUser.email,\r\n                        userProvided: true,\r\n                      },\r\n                    }}\r\n                  />\r\n                );\r\n                this_.setState({ redirect: red });\r\n              }\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            //console.log(\"error3\");\r\n            alert(error);\r\n          });\r\n        return resposta;\r\n      };\r\n\r\n      var dados = request();\r\n    } else if (firebase_auth.isSignInWithEmailLink(window.location.href)) {\r\n      var email = window.localStorage.getItem(\"emailForSignIn\");\r\n      if (!email) {\r\n        email = window.prompt(\r\n          \"Por favor, forneça o seu email para confirmação.\"\r\n        );\r\n      }\r\n      var message = \"A carregar...\";\r\n      toast.configure();\r\n      toast(message, {\r\n        transition: Bounce,\r\n        closeButton: true,\r\n        autoClose: 10000,\r\n        position: \"top-right\",\r\n        type: \"info\",\r\n      });\r\n\r\n      firebase\r\n        .auth()\r\n        .signInWithEmailLink(email, window.location.href)\r\n        .then(function (result) {\r\n          // Clear email from storage.\r\n          window.localStorage.removeItem(\"emailForSignIn\");\r\n\r\n          let uri =\r\n            \"https://us-central1-\" +\r\n            project_id +\r\n            \".cloudfunctions.net/api/getParent?\" +\r\n            \"id=\" +\r\n            email;\r\n          const request = async () => {\r\n            let resposta;\r\n            await fetch(uri)\r\n              .then((resp) => resp.json()) // Transform the data into json\r\n              .then(function (data) {\r\n                console.log(data);\r\n                if (data === undefined || data.error) {\r\n                  var message = errorNoLogedInUser[languageCode];\r\n                  toast.configure();\r\n                  toast(message, {\r\n                    transition: Bounce,\r\n                    closeButton: true,\r\n                    autoClose: 2000,\r\n                    position: \"top-right\",\r\n                    type: \"warning\",\r\n                  });\r\n                } else {\r\n                  if (email == data.Email && data[\"Validated\"] == false) {\r\n                    var red;\r\n                    if (\r\n                      data[parentsParameters.PAYED_FEE[languageCode]] === false\r\n                    ) {\r\n                      red = (\r\n                        <Redirect\r\n                          to={{\r\n                            pathname: \"/payment\",\r\n                            state: { Email: data.Email, payment: false },\r\n                          }}\r\n                        />\r\n                      );\r\n                    } else {\r\n                      red = (\r\n                        <Redirect\r\n                          to={{\r\n                            pathname: \"/payment\",\r\n                            state: { Email: data.Email, payment: true },\r\n                          }}\r\n                        />\r\n                      );\r\n                    }\r\n                    //Redirecionar para página de pagamento\r\n                    this_.setState({ redirect: red });\r\n                  } else if (email == data.Email && data[\"Validated\"] == true) {\r\n                    if (\r\n                      data.Admin != undefined &&\r\n                      data.Admin != null &&\r\n                      data.Admin === true\r\n                    ) {\r\n                      window.localStorage.setItem(\r\n                        \"admin\",\r\n                        data.Admin.toString()\r\n                      );\r\n                    }\r\n                    window.localStorage.setItem(\"email\", data.Email);\r\n\r\n                    var red = (\r\n                      <Redirect\r\n                        to={{\r\n                          pathname: \"/profile\",\r\n                          state: {\r\n                            userEmail: email,\r\n                            userProvided: true,\r\n                          },\r\n                        }}\r\n                      />\r\n                    );\r\n                    this_.setState({ redirect: red });\r\n                  }\r\n                }\r\n              })\r\n              .catch(function (error) {\r\n                alert(error);\r\n              });\r\n            return resposta;\r\n          };\r\n\r\n          var dados = request();\r\n        })\r\n        .catch(function (error) {\r\n          // Some error occurred, you can inspect the code: error.code\r\n          // Common errors could be invalid email and invalid or expired OTPs.\r\n          alert(\"Erro: \" + error);\r\n        });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  /*********************************** HANDLERS ***********************************/\r\n\r\n  googleSignIn() {\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    var provider = new firebase.auth.GoogleAuthProvider();\r\n    firebase\r\n      .auth()\r\n      .signInWithPopup(provider)\r\n      .then(function (result) {\r\n        var email = result.user.email;\r\n\r\n        var message = \"A carregar...\";\r\n        toast.configure();\r\n        toast(message, {\r\n          transition: Bounce,\r\n          closeButton: true,\r\n          autoClose: 5000,\r\n          position: \"top-right\",\r\n          type: \"info\",\r\n        });\r\n\r\n        let uri =\r\n          \"https://us-central1-\" +\r\n          project_id +\r\n          \".cloudfunctions.net/api/getParent?\" +\r\n          \"id=\" +\r\n          email;\r\n        const request = async () => {\r\n          let resposta;\r\n          await fetch(uri)\r\n            .then((resp) => resp.json()) // Transform the data into json\r\n            .then(function (data) {\r\n              var dataDoc = data;\r\n\r\n              if (dataDoc === undefined || dataDoc.error) {\r\n                var message = errorNoLogedInUser[languageCode];\r\n                toast.configure();\r\n                toast(message, {\r\n                  transition: Bounce,\r\n                  closeButton: true,\r\n                  autoClose: 2000,\r\n                  position: \"top-right\",\r\n                  type: \"warning\",\r\n                });\r\n                //Sign out por precaução\r\n                firebase_auth\r\n                  .signOut()\r\n                  .then(function () {\r\n                    // Sign-out successful.\r\n                  })\r\n                  .catch(function (error) {});\r\n              } else {\r\n                if (email == dataDoc.Email && dataDoc[\"Validated\"] == false) {\r\n                  var red;\r\n                  if (\r\n                    dataDoc[parentsParameters.PAYED_FEE[languageCode]] === false\r\n                  ) {\r\n                    red = (\r\n                      <Redirect\r\n                        to={{\r\n                          pathname: \"/payment\",\r\n                          state: { Email: dataDoc.Email, payment: false },\r\n                        }}\r\n                      />\r\n                    );\r\n                  } else {\r\n                    red = (\r\n                      <Redirect\r\n                        to={{\r\n                          pathname: \"/payment\",\r\n                          state: { Email: dataDoc.Email, payment: true },\r\n                        }}\r\n                      />\r\n                    );\r\n                  }\r\n                  //Redirecionar para página de pagamento\r\n                  this_.setState({ redirect: red });\r\n                } else if (\r\n                  email == dataDoc.Email &&\r\n                  dataDoc[\"Validated\"] == true\r\n                ) {\r\n                  if (\r\n                    dataDoc.Admin != undefined &&\r\n                    dataDoc.Admin != null &&\r\n                    dataDoc.Admin === true\r\n                  ) {\r\n                    window.localStorage.setItem(\r\n                      \"admin\",\r\n                      dataDoc.Admin.toString()\r\n                    );\r\n                  }\r\n                  window.localStorage.setItem(\"email\", dataDoc.Email);\r\n\r\n                  var red = (\r\n                    <Redirect\r\n                      to={{\r\n                        pathname: \"/profile\",\r\n                        state: {\r\n                          userEmail: email,\r\n                          userProvided: true,\r\n                        },\r\n                      }}\r\n                    />\r\n                  );\r\n                  this_.setState({ redirect: red });\r\n                }\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              console.log(\"error1\");\r\n              alert(error);\r\n            });\r\n          return resposta;\r\n        };\r\n\r\n        var dados = request();\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        var message = errorLoginGoogle[languageCode];\r\n        toast.configure();\r\n        toast(message, {\r\n          transition: Bounce,\r\n          closeButton: true,\r\n          autoClose: 2000,\r\n          position: \"top-right\",\r\n          type: \"error\",\r\n        });\r\n      });\r\n  }\r\n\r\n  FBSignIn() {\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n    var provider = new firebase.auth.FacebookAuthProvider();\r\n    firebase\r\n      .auth()\r\n      .signInWithPopup(provider)\r\n      .then(function (result) {\r\n        var email = result.user.email;\r\n\r\n        let uri =\r\n          \"https://us-central1-\" +\r\n          project_id +\r\n          \".cloudfunctions.net/api/getParent?\" +\r\n          \"id=\" +\r\n          email;\r\n        const request = async () => {\r\n          let resposta;\r\n          await fetch(uri)\r\n            .then((resp) => resp.json()) // Transform the data into json\r\n            .then(function (data) {\r\n              var dataDoc = data;\r\n\r\n              if (dataDoc === undefined || dataDoc.error) {\r\n                var message = errorNoLogedInUser[languageCode];\r\n                toast.configure();\r\n                toast(message, {\r\n                  transition: Bounce,\r\n                  closeButton: true,\r\n                  autoClose: 2000,\r\n                  position: \"top-right\",\r\n                  type: \"warning\",\r\n                });\r\n                //Sign out por precaução\r\n                firebase_auth\r\n                  .signOut()\r\n                  .then(function () {\r\n                    // Sign-out successful.\r\n                  })\r\n                  .catch(function (error) {});\r\n              } else {\r\n                if (email == dataDoc.Email && dataDoc[\"Validated\"] == false) {\r\n                  var red;\r\n                  if (\r\n                    dataDoc[parentsParameters.PAYED_FEE[languageCode]] === false\r\n                  ) {\r\n                    red = (\r\n                      <Redirect\r\n                        to={{\r\n                          pathname: \"/payment\",\r\n                          state: { Email: dataDoc.Email, payment: false },\r\n                        }}\r\n                      />\r\n                    );\r\n                  } else {\r\n                    red = (\r\n                      <Redirect\r\n                        to={{\r\n                          pathname: \"/payment\",\r\n                          state: { Email: dataDoc.Email, payment: true },\r\n                        }}\r\n                      />\r\n                    );\r\n                  }\r\n                  //Redirecionar para página de pagamento\r\n                  this_.setState({ redirect: red });\r\n                } else if (\r\n                  email == dataDoc.Email &&\r\n                  dataDoc[\"Validated\"] == true\r\n                ) {\r\n                  if (\r\n                    dataDoc.Admin != undefined &&\r\n                    dataDoc.Admin != null &&\r\n                    dataDoc.Admin === true\r\n                  ) {\r\n                    window.localStorage.setItem(\r\n                      \"admin\",\r\n                      dataDoc.Admin.toString()\r\n                    );\r\n                  }\r\n                  window.localStorage.setItem(\"email\", dataDoc.Email);\r\n\r\n                  var red = (\r\n                    <Redirect\r\n                      to={{\r\n                        pathname: \"/profile\",\r\n                        state: {\r\n                          userEmail: email,\r\n                          userProvided: true,\r\n                        },\r\n                      }}\r\n                    />\r\n                  );\r\n                  this_.setState({ redirect: red });\r\n                }\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              console.log(\"error1\");\r\n              alert(error);\r\n            });\r\n          return resposta;\r\n        };\r\n\r\n        var dados = request();\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        var message = errorLoginFB[languageCode];\r\n        toast.configure();\r\n        toast(message, {\r\n          transition: Bounce,\r\n          closeButton: true,\r\n          autoClose: 2000,\r\n          position: \"top-right\",\r\n          type: \"error\",\r\n        });\r\n      });\r\n  }\r\n\r\n  doSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const { credentials } = this.state;\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    const data = {};\r\n\r\n    if (credentials.email === \"\") {\r\n      alert(\"Insira o seu email!\");\r\n    } else {\r\n      firebase\r\n        .auth()\r\n        .getRedirectResult()\r\n        .then(function (result) {\r\n          if (result.credential) {\r\n            // This gives you a Google Access Token. You can use it to access the Google API.\r\n            var token = result.credential.accessToken;\r\n            // ...\r\n          }\r\n          // The signed-in user info.\r\n          var user = result.user;\r\n          //console.dir(\"User login: \" + JSON.stringify(result));\r\n        })\r\n        .catch(function (error) {\r\n          // Handle Errors here.\r\n          var errorCode = error.code;\r\n          var errorMessage = error.message;\r\n          // The email of the user's account used.\r\n          var email = error.email;\r\n          // The firebase.auth.AuthCredential type that was used.\r\n          var credential = error.credential;\r\n          // ...\r\n        });\r\n\r\n      //Passar para api_user.js\r\n      //console.log(credentials.email);\r\n      var message = \"A carregar...\";\r\n      toast.configure();\r\n      toast(message, {\r\n        transition: Bounce,\r\n        closeButton: true,\r\n        autoClose: 5000,\r\n        position: \"top-right\",\r\n        type: \"info\",\r\n      });\r\n\r\n      let uri =\r\n        \"https://us-central1-\" +\r\n        project_id +\r\n        \".cloudfunctions.net/api/getParent?\" +\r\n        \"id=\" +\r\n        credentials.email;\r\n      const request = async () => {\r\n        let resposta;\r\n        await fetch(uri)\r\n          .then((resp) => resp.json()) // Transform the data into json\r\n          .then(function (data) {\r\n            var dataDoc = data;\r\n            //console.log(data);\r\n            if (dataDoc === undefined) {\r\n              var message = errorNoLogedInUser[languageCode];\r\n              toast.configure();\r\n              toast(message, {\r\n                transition: Bounce,\r\n                closeButton: true,\r\n                autoClose: 2000,\r\n                position: \"top-right\",\r\n                type: \"warning\",\r\n              });\r\n            } else {\r\n              if (\r\n                credentials.email === dataDoc.Email &&\r\n                dataDoc[\"Validated\"] === false\r\n              ) {\r\n                let uri =\r\n                  \"https://us-central1-\" +\r\n                  project_id +\r\n                  \".cloudfunctions.net/api/sendAuthenticationEmail?\" +\r\n                  \"email=\" +\r\n                  dataDoc.Email +\r\n                  \"&\" +\r\n                  \"nome=\" +\r\n                  dataDoc.Nome;\r\n                const request = async () => {\r\n                  let resposta;\r\n                  await fetch(uri)\r\n                    .then((resp) => resp.json()) // Transform the data into json\r\n                    .then(function (data) {\r\n                      resposta = data;\r\n                    })\r\n                    .catch(function (error) {});\r\n\r\n                  return resposta;\r\n                };\r\n\r\n                request();\r\n\r\n                const hStyle = { color: \"green\" };\r\n\r\n                var mensagem = (\r\n                  <div>\r\n                    <p style={hStyle}>\r\n                      Foi-lhe enviado email com link para efetuar o login\r\n                    </p>\r\n                  </div>\r\n                );\r\n                this_.setState({ msg: mensagem });\r\n              } else if (\r\n                credentials.email === dataDoc.Email &&\r\n                dataDoc[\"Validated\"] === true\r\n              ) {\r\n                let uri =\r\n                  \"https://us-central1-\" +\r\n                  project_id +\r\n                  \".cloudfunctions.net/api/sendAuthenticationEmail?\" +\r\n                  \"email=\" +\r\n                  dataDoc.Email +\r\n                  \"&\" +\r\n                  \"nome=\" +\r\n                  dataDoc.Nome;\r\n                const request = async () => {\r\n                  let resposta;\r\n                  await fetch(uri)\r\n                    .then((resp) => resp.json()) // Transform the data into json\r\n                    .then(function (data) {\r\n                      resposta = data;\r\n                    })\r\n                    .catch(function (error) {});\r\n\r\n                  return resposta;\r\n                };\r\n\r\n                request();\r\n\r\n                const hStyle = { color: \"green\" };\r\n\r\n                var mensagem = (\r\n                  <div>\r\n                    <p style={hStyle}>\r\n                      Foi-lhe enviado email com link para efetuar o login\r\n                    </p>\r\n                  </div>\r\n                );\r\n                this_.setState({ msg: mensagem });\r\n              } else {\r\n                showToast(\r\n                  errorNoLogedInUser[languageCode],\r\n                  3000,\r\n                  toastTypes.WARNING\r\n                );\r\n              }\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            //console.log(\"error2\");\r\n            alert(error);\r\n          });\r\n        return resposta;\r\n      };\r\n\r\n      var dados = request();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <BlockUi\r\n          tag=\"div\"\r\n          blocking={this.state.blocking}\r\n          loader={<Loader active type=\"line-scale-pulse-out\" />}\r\n        >\r\n          <div className=\"h-100 bg-animation\">\r\n            <div\r\n              className=\"d-flex h-100 justify-content-center align-items-center\"\r\n              style={{\r\n                background: \"url(\" + bg1 + \")\",\r\n                backgroundRepeat: \"no-repeat\",\r\n                backgroundSize: \"cover\",\r\n                backgroundPosition: \"center center\",\r\n              }}\r\n            >\r\n              <Col md=\"8\" className=\"mx-auto app-login-box\">\r\n                <div\r\n                  className=\"modal-dialog w-100 mx-auto\"\r\n                  style={{\r\n                    boxShadow: \"0px 1px 10px 0px rgba(52, 58, 64, 0.3)\",\r\n                  }}\r\n                >\r\n                  <div className=\"modal-content\" style={{ border: \"none\" }}>\r\n                    <div className=\"modal-body\" style={{ padding: \"2.5rem\" }}>\r\n                      <div className=\"h6 modal-title text-center mb-4\">\r\n                        <img\r\n                          className=\"mb-4\"\r\n                          src={bg1}\r\n                          style={{ height: \"100px\", width: \"auto\" }}\r\n                        />\r\n                        <p>Insira os seus dados</p>\r\n                      </div>\r\n\r\n                      {this.state.msg}\r\n\r\n                      <Form onSubmit={this.doSubmit}>\r\n                        <Row form>\r\n                          <Col\r\n                            md={12}\r\n                            style={\r\n                              this.state.msg\r\n                                ? { margin: \"8px\" }\r\n                                : { margin: \"0px\" }\r\n                            }\r\n                          >\r\n                            {this.renderInput(\r\n                              \"email\",\r\n                              \"email\",\r\n                              \"Email\",\r\n                              \"Insira o email\"\r\n                            )}\r\n                          </Col>\r\n\r\n                          <Col\r\n                            md={12}\r\n                            style={{ textAlign: \"center\", margin: \"3px\" }}\r\n                          >\r\n                            <Button\r\n                              color=\"info\"\r\n                              style={{\r\n                                width: \"200px\",\r\n                                textAlign: \"center\",\r\n                              }}\r\n                            >\r\n                              <i\r\n                                className=\"fas fa-envelope\"\r\n                                style={{ marginRight: \"10px\" }}\r\n                              />\r\n                              {signInWithLink[languageCode]}\r\n                            </Button>\r\n                          </Col>\r\n\r\n                          <Col\r\n                            md={12}\r\n                            style={{ textAlign: \"center\", margin: \"3px\" }}\r\n                          >\r\n                            <Button\r\n                              color=\"danger\"\r\n                              onClick={this.googleSignIn}\r\n                              style={{\r\n                                width: \"200px\",\r\n                                textAlign: \"center\",\r\n                              }}\r\n                            >\r\n                              <i\r\n                                className=\"fab fa-google\"\r\n                                style={{ marginRight: \"10px\" }}\r\n                              />\r\n                              {signInWithGoogle[languageCode]}\r\n                            </Button>\r\n                          </Col>\r\n\r\n                          <Col\r\n                            md={12}\r\n                            style={{ textAlign: \"center\", margin: \"3px\" }}\r\n                          >\r\n                            <Button\r\n                              color=\"primary\"\r\n                              onClick={this.FBSignIn}\r\n                              style={{\r\n                                width: \"200px\",\r\n                                textAlign: \"center\",\r\n                              }}\r\n                            >\r\n                              <i\r\n                                className=\"fab fa-facebook-f\"\r\n                                style={{ marginRight: \"10px\" }}\r\n                              />\r\n                              {signInWithFacebook[languageCode]}\r\n                            </Button>\r\n                          </Col>\r\n\r\n                          {/*<Col md={12} style={{ textAlign: \"center\", margin : \"3px\" }}>\r\n                            <Button\r\n                              color=\"success\"\r\n                              onClick={() => {}}\r\n                              style={{\r\n                                width: \"200px\",\r\n                                textAlign: \"center\",\r\n                              }}\r\n                            >\r\n                              <i className=\"fab fa-microsoft\" style={{marginRight: \"10px\"}}/>\r\n                              {signInWithMicrosoft[languageCode]}\r\n                            </Button>\r\n                          </Col>*/}\r\n\r\n                          <Col md={12} style={{ textAlign: \"center\" }}>\r\n                            <br></br>\r\n\r\n                            <h5 className=\"mb-0\">\r\n                              Não tem conta?{\" \"}\r\n                              <Link to=\"/register\" className=\"text-primary\">\r\n                                Registe-se\r\n                              </Link>\r\n                            </h5>\r\n                            <br></br>\r\n                          </Col>\r\n                        </Row>\r\n                      </Form>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-center text-black opacity-8 mt-3\">\r\n                  Copyright &copy;\r\n                </div>\r\n                {this.state.redirect}\r\n              </Col>\r\n            </div>\r\n          </div>\r\n        </BlockUi>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}