{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\cargos-page\\\\CargosPage.js\";\nimport React, { Component } from \"react\";\nimport { Container, Row, Col, Button, Card, CardHeader, CardBody } from \"shards-react\";\nimport ConfirmationDialog from \"../../components/dialog/ConfirmationDialog\";\nimport { Redirect } from \"react-router-dom\";\nimport { aceitarCargoPrompt, loading } from \"../../utils/common_strings\";\nimport { sucessoGeral, erroUpdateCargos, confirmAceitarCargo, semTransicoesDeCargos } from \"../../utils/messages_strings\";\nimport { cargoDocKey, languageCode, parentsParameters, showToast, toastTypes } from \"../../utils/general_utils\";\nimport { firebaseConfig } from \"../../firebase-config\";\nimport CargosModal from \"./CargosModal\";\nimport { userLogOut } from \"../../firebase_scripts/profile_functions\";\nimport { Table } from \"react-bootstrap\";\n\nvar Cargos_Page = /*#__PURE__*/function (_Component) {\n  _inherits(Cargos_Page, _Component);\n\n  var _super = _createSuper(Cargos_Page);\n\n  function Cargos_Page(props) {\n    var _this;\n\n    _classCallCheck(this, Cargos_Page);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      redirect: null,\n      transitions: null,\n      // array\n      email: \"\",\n      cargoIdAceitar: \"\",\n      dialogOpen: false,\n      blocking: false,\n      errors: {},\n      nome: null,\n      admin: null,\n      cargosCollection: {},\n      permissionChanged: false,\n      newCargo: \"\",\n      numAdminRoles: -1\n    };\n    _this.componentDidMount = _this.componentDidMount.bind(_assertThisInitialized(_this));\n    _this.getTransitions = _this.getTransitions.bind(_assertThisInitialized(_this));\n    _this.aceitarSelectedCargo = _this.aceitarSelectedCargo.bind(_assertThisInitialized(_this));\n    _this.openAceitarCargoDialog = _this.openAceitarCargoDialog.bind(_assertThisInitialized(_this));\n    _this.closeDialog = _this.closeDialog.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Cargos_Page, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var this_ = this;\n      var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n      var project_id = firebaseConfig.projectId;\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getCargos\";\n\n      var request = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return fetch(uri).then(function (resp) {\n                    return resp.json();\n                  }) // Transform the data into json\n                  .then(function (data) {\n                    var cargosJSON = {};\n                    var numberAdminRoles = 0;\n\n                    for (var i in data) {\n                      cargosJSON[data[i][cargoDocKey]] = data[i].admin;\n\n                      if (data[i].admin) {\n                        numberAdminRoles += 1;\n                      }\n                    }\n\n                    console.log(\"cargosJSON -> \" + JSON.stringify(cargosJSON));\n                    this_.setState({\n                      cargosCollection: cargosJSON,\n                      numberAdminRoles: numberAdminRoles\n                    });\n                  }).catch(function (error) {});\n\n                case 2:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function request() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      request(); //---------------------------------------------------------\n\n      if (currentUser != null) {\n        this.setState({\n          email: currentUser.Email\n        });\n        this_.getTransitions();\n      } else {\n        //Redirect to login\n        var redirect = /*#__PURE__*/React.createElement(Redirect, {\n          to: {\n            pathname: \"/\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 9\n          }\n        });\n        this.setState({\n          redirect: redirect\n        });\n      }\n    }\n  }, {\n    key: \"getTransitions\",\n    value: function getTransitions() {\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getCargoTransitions\";\n\n      var request = /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return fetch(uri).then(function (resp) {\n                    return resp.json();\n                  }) // Transform the data into json\n                  .then(function (data) {\n                    this_.setState({\n                      transitions: data\n                    });\n                  }).catch(function (error) {});\n\n                case 2:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function request() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n\n      request();\n    }\n  }, {\n    key: \"openAceitarCargoDialog\",\n    value: function openAceitarCargoDialog(e) {\n      console.log(\"cargosCollection\");\n      console.log(this.state.cargosCollection);\n      var id = e.target.id;\n      var newCargo = e.target.value;\n      this.setState({\n        newCargo: newCargo\n      });\n      var newCargoAdmin = this.state.cargosCollection[newCargo];\n      var currentUserAdmin = JSON.parse(window.localStorage.getItem(\"userDoc\"))[parentsParameters.ADMIN[languageCode]];\n\n      if (newCargoAdmin !== currentUserAdmin) {\n        this.setState({\n          permissionChanged: true\n        });\n      } else {\n        this.setState({\n          permissionChanged: false\n        });\n      }\n\n      this.setState({\n        cargoIdAceitar: id\n      });\n      this.setState({\n        dialogOpen: true\n      });\n    }\n  }, {\n    key: \"closeDialog\",\n    value: function closeDialog() {\n      this.setState({\n        dialogOpen: false\n      });\n    }\n  }, {\n    key: \"aceitarSelectedCargo\",\n    value: function aceitarSelectedCargo(confirmation) {\n      var cargoIdAceitar = this.state.cargoIdAceitar;\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      this_.closeDialog();\n\n      if (confirmation) {\n        var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/executeCargoTransition?id=\" + cargoIdAceitar;\n\n        var request = /*#__PURE__*/function () {\n          var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n            return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.next = 2;\n                    return fetch(uri).then(function (data) {\n                      //console.log(data);\n                      this_.setState({\n                        cargoIdAceitar: \"\"\n                      }, function () {\n                        return this_.getTransitions();\n                      });\n                      showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\n\n                      if (this_.state.permissionChanged) {\n                        userLogOut(); // logout if user permission changed in order to not having denied access\n                      } else {\n                        var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n                        currentUser[parentsParameters.ROLE[languageCode]] = this_.state.newCargo;\n                        window.localStorage.setItem(\"userDoc\", JSON.stringify(currentUser));\n                        this_.setState({\n                          newCargo: \"\"\n                        }); // reset newCargo variable\n                      }\n                    }).catch(function (error) {\n                      showToast(erroUpdateCargos[languageCode], 5000, toastTypes.ERROR);\n                    });\n\n                  case 2:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee3);\n          }));\n\n          return function request() {\n            return _ref3.apply(this, arguments);\n          };\n        }();\n\n        request();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        style: {\n          margin: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(CargosModal, {\n        getTransitions: this.getTransitions,\n        cargosCollection: this.state.cargosCollection,\n        numberAdminRoles: this.state.numberAdminRoles,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        className: \"main-content-container px-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        small: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }\n      }, \"Transi\\xE7\\xF5es de Cargos\")), this.state.transitions == null ? /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 51\n        }\n      }, loading[languageCode]) : /*#__PURE__*/React.createElement(CardBody, {\n        className: \"p-0 pb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Table, {\n        className: \"table mb-0\",\n        responsive: true,\n        striped: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }\n      }, this.state.transitions.length === 0 ? semTransicoesDeCargos[languageCode] : /*#__PURE__*/React.createElement(\"thead\", {\n        className: \"bg-light\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 27\n        }\n      }, \"Nome\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 27\n        }\n      }, \"Email\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 27\n        }\n      }, \"Novo Cargo\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 27\n        }\n      }, \"Aceite?\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 27\n        }\n      }, \"Data\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 27\n        }\n      }, \"Aceitar\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 21\n        }\n      }, this.state.transitions.map(function (membro, idx) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 25\n          }\n        }, \" \", membro.nome ? membro.nome : \"-\"), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 25\n          }\n        }, \" \", membro.email ? membro.email : \"-\"), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 25\n          }\n        }, \" \", membro.cargo ? membro.cargo : \"-\"), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 25\n          }\n        }, \" \", membro.aceite == true ? \"Sim\" : \"Não\"), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 25\n          }\n        }, \" \", membro.data ? membro.data : \"-\"), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 25\n          }\n        }, \" \", membro.aceite == true ? /*#__PURE__*/React.createElement(Button, {\n          disabled: true,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 29\n          }\n        }, \" Aceitar \") : /*#__PURE__*/React.createElement(Button, {\n          disabled: !(membro.email == _this2.state.email),\n          id: membro.id,\n          value: membro.cargo,\n          onClick: _this2.openAceitarCargoDialog,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 29\n          }\n        }, \" \", \"Aceitar\", \" \")));\n      }))))))), this.state.redirect, this.state.dialogOpen ? /*#__PURE__*/React.createElement(ConfirmationDialog, {\n        open: this.state.dialogOpen,\n        result: this.aceitarSelectedCargo,\n        title: aceitarCargoPrompt[languageCode],\n        message: confirmAceitarCargo[languageCode],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 15\n        }\n      }) : null)));\n    }\n  }]);\n\n  return Cargos_Page;\n}(Component);\n\nexport default Cargos_Page;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/cargos-page/CargosPage.js"],"names":["React","Component","Container","Row","Col","Button","Card","CardHeader","CardBody","ConfirmationDialog","Redirect","aceitarCargoPrompt","loading","sucessoGeral","erroUpdateCargos","confirmAceitarCargo","semTransicoesDeCargos","cargoDocKey","languageCode","parentsParameters","showToast","toastTypes","firebaseConfig","CargosModal","userLogOut","Table","Cargos_Page","props","state","redirect","transitions","email","cargoIdAceitar","dialogOpen","blocking","errors","nome","admin","cargosCollection","permissionChanged","newCargo","numAdminRoles","componentDidMount","bind","getTransitions","aceitarSelectedCargo","openAceitarCargoDialog","closeDialog","this_","currentUser","JSON","parse","window","localStorage","getItem","project_id","projectId","uri","request","fetch","then","resp","json","data","cargosJSON","numberAdminRoles","i","console","log","stringify","setState","catch","error","Email","pathname","e","id","target","value","newCargoAdmin","currentUserAdmin","ADMIN","confirmation","SUCCESS","ROLE","setItem","ERROR","margin","length","map","membro","idx","cargo","aceite"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Card,\r\n  CardHeader,\r\n  CardBody,\r\n} from \"shards-react\";\r\nimport ConfirmationDialog from \"../../components/dialog/ConfirmationDialog\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport {aceitarCargoPrompt, loading} from \"../../utils/common_strings\";\r\nimport {\r\n  sucessoGeral,\r\n  erroUpdateCargos,\r\n  confirmAceitarCargo, semTransicoesDeCargos,\r\n} from \"../../utils/messages_strings\";\r\nimport {\r\n  cargoDocKey,\r\n  languageCode,\r\n  parentsParameters,\r\n  showToast,\r\n  toastTypes\r\n} from \"../../utils/general_utils\";\r\n\r\nimport {\r\n  firebaseConfig\r\n} from \"../../firebase-config\";\r\nimport CargosModal from \"./CargosModal\";\r\nimport {userLogOut} from \"../../firebase_scripts/profile_functions\";\r\nimport {Table} from \"react-bootstrap\";\r\n\r\nclass Cargos_Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      redirect: null,\r\n      transitions: null, // array\r\n      email: \"\",\r\n      cargoIdAceitar: \"\",\r\n      dialogOpen: false,\r\n\r\n      blocking: false,\r\n      errors: {},\r\n      nome: null,\r\n      admin: null,\r\n      cargosCollection: {},\r\n      permissionChanged : false,\r\n      newCargo : \"\",\r\n      numAdminRoles : -1\r\n    };\r\n\r\n    this.componentDidMount = this.componentDidMount.bind(this);\r\n    this.getTransitions = this.getTransitions.bind(this);\r\n    this.aceitarSelectedCargo = this.aceitarSelectedCargo.bind(this);\r\n    this.openAceitarCargoDialog = this.openAceitarCargoDialog.bind(this);\r\n    this.closeDialog = this.closeDialog.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const this_ = this;\r\n    var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\r\n\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    let uri =\r\n      \"https://us-central1-\" +\r\n      project_id +\r\n      \".cloudfunctions.net/api/getCargos\";\r\n\r\n    const request = async () => {\r\n      await fetch(uri)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          let cargosJSON = {};\r\n          let numberAdminRoles = 0;\r\n          for(let i in data){\r\n            cargosJSON[data[i][cargoDocKey]] = data[i].admin;\r\n            if(data[i].admin){\r\n              numberAdminRoles+=1;\r\n            }\r\n          }\r\n          console.log(\"cargosJSON -> \" + JSON.stringify(cargosJSON));\r\n          this_.setState({cargosCollection : cargosJSON, numberAdminRoles:numberAdminRoles});\r\n        })\r\n        .catch(function (error) {});\r\n    };\r\n\r\n    request();\r\n\r\n\r\n    //---------------------------------------------------------\r\n\r\n    if (currentUser != null) {\r\n      this.setState({ email: currentUser.Email });\r\n      this_.getTransitions();\r\n    } else {\r\n      //Redirect to login\r\n      var redirect = (\r\n        <Redirect\r\n          to={{\r\n            pathname: \"/\",\r\n          }}\r\n        />\r\n      );\r\n      this.setState({ redirect: redirect });\r\n    }\r\n  }\r\n\r\n  getTransitions() {\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    let uri =\r\n      \"https://us-central1-\" +\r\n      project_id +\r\n      \".cloudfunctions.net/api/getCargoTransitions\";\r\n\r\n    const request = async () => {\r\n      await fetch(uri)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          this_.setState({ transitions: data });\r\n        })\r\n        .catch(function (error) {});\r\n    };\r\n\r\n    request();\r\n\r\n  }\r\n\r\n  openAceitarCargoDialog(e) {\r\n    console.log(\"cargosCollection\");\r\n    console.log(this.state.cargosCollection);\r\n    const id = e.target.id;\r\n    const newCargo = e.target.value;\r\n    this.setState({newCargo : newCargo});\r\n    const newCargoAdmin = this.state.cargosCollection[newCargo];\r\n    const currentUserAdmin = (JSON.parse(window.localStorage.getItem(\"userDoc\")))[parentsParameters.ADMIN[languageCode]];\r\n\r\n    if(newCargoAdmin !== currentUserAdmin){\r\n      this.setState({permissionChanged : true});\r\n    }\r\n    else{\r\n      this.setState({permissionChanged : false});\r\n    }\r\n\r\n    this.setState({ cargoIdAceitar: id });\r\n    this.setState({ dialogOpen: true });\r\n  }\r\n\r\n  closeDialog() {\r\n    this.setState({ dialogOpen: false });\r\n  }\r\n\r\n  aceitarSelectedCargo(confirmation) {\r\n    const { cargoIdAceitar } = this.state;\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n    this_.closeDialog();\r\n\r\n    if (confirmation) {\r\n      let uri =\r\n        \"https://us-central1-\" +\r\n        project_id +\r\n        \".cloudfunctions.net/api/executeCargoTransition?id=\" +\r\n        cargoIdAceitar;\r\n\r\n      const request = async () => {\r\n        await fetch(uri)\r\n          .then(function (data) {\r\n            //console.log(data);\r\n            this_.setState({ cargoIdAceitar: \"\" }, () =>\r\n              this_.getTransitions()\r\n            );\r\n            showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\r\n            if(this_.state.permissionChanged){\r\n              userLogOut(); // logout if user permission changed in order to not having denied access\r\n            }\r\n            else{\r\n              let currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\r\n              currentUser[parentsParameters.ROLE[languageCode]] = this_.state.newCargo;\r\n              window.localStorage.setItem(\"userDoc\", JSON.stringify(currentUser));\r\n              this_.setState({newCargo : \"\"}); // reset newCargo variable\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            showToast(erroUpdateCargos[languageCode], 5000, toastTypes.ERROR);\r\n          });\r\n      };\r\n\r\n      request();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Row style={{ margin: \"10px\" }}>\r\n          <CargosModal getTransitions={this.getTransitions} cargosCollection={this.state.cargosCollection} numberAdminRoles={this.state.numberAdminRoles} />\r\n        </Row>\r\n        <Row>\r\n          <Container fluid className=\"main-content-container px-4\">\r\n            {/* Default Light Table */}\r\n            <Row>\r\n              <Col>\r\n                <Card small>\r\n                  <CardHeader className=\"border-bottom\">\r\n                    <h6 className=\"m-0\">Transições de Cargos</h6>\r\n                  </CardHeader>\r\n                  {this.state.transitions==null ? <CardBody>{loading[languageCode]}</CardBody> :\r\n                    <CardBody className=\"p-0 pb-3\">\r\n                    <Table\r\n                    className=\"table mb-0\"\r\n                    responsive\r\n                    striped\r\n                    >\r\n                      {this.state.transitions.length === 0 ? semTransicoesDeCargos[languageCode] :\r\n                        <thead className=\"bg-light\">\r\n                        <tr>\r\n                          <th scope=\"col\" className=\"border-0\">\r\n                            Nome\r\n                          </th>\r\n                          <th scope=\"col\" className=\"border-0\">\r\n                            Email\r\n                          </th>\r\n                          <th scope=\"col\" className=\"border-0\">\r\n                            Novo Cargo\r\n                          </th>\r\n                          <th scope=\"col\" className=\"border-0\">\r\n                            Aceite?\r\n                          </th>\r\n                          <th scope=\"col\" className=\"border-0\">\r\n                            Data\r\n                          </th>\r\n                          <th scope=\"col\" className=\"border-0\">\r\n                            Aceitar\r\n                          </th>\r\n                        </tr>\r\n                        </thead>}\r\n                    <tbody>\r\n                    {this.state.transitions.map((membro, idx) => (\r\n                      <tr>\r\n                        <td> {membro.nome ? membro.nome : \"-\"}</td>\r\n                        <td> {membro.email ? membro.email : \"-\"}</td>\r\n                        <td> {membro.cargo ? membro.cargo : \"-\"}</td>\r\n                        <td> {membro.aceite == true ? \"Sim\" : \"Não\"}</td>\r\n                        <td> {membro.data ? membro.data : \"-\"}</td>\r\n                        <td>\r\n                          {\" \"}\r\n                          {membro.aceite == true ? (\r\n                            <Button disabled={true}> Aceitar </Button>\r\n                          ) : (\r\n                            <Button\r\n                              disabled={!(membro.email == this.state.email)}\r\n                              id={membro.id}\r\n                              value={membro.cargo}\r\n                              onClick={this.openAceitarCargoDialog}\r\n                            >\r\n                              {\" \"}\r\n                              Aceitar{\" \"}\r\n                            </Button>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                    </tbody>\r\n                    </Table>\r\n                    </CardBody>}\r\n                </Card>\r\n              </Col>\r\n            </Row>\r\n\r\n            {this.state.redirect}\r\n            {this.state.dialogOpen ? (\r\n              <ConfirmationDialog\r\n                open={this.state.dialogOpen}\r\n                result={this.aceitarSelectedCargo}\r\n                title={aceitarCargoPrompt[languageCode]}\r\n                message={confirmAceitarCargo[languageCode]}\r\n              />\r\n            ) : null}\r\n          </Container>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Cargos_Page;\r\n"]},"metadata":{},"sourceType":"module"}