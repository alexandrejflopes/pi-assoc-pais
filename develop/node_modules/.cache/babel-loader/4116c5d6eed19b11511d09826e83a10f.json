{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\casos\\\\CasosModal.js\";\n\n/* eslint jsx-a11y/anchor-is-valid: 0 */\nimport React, { Fragment, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { ListGroup, ListGroupItem, Button, Col, Form, FormGroup, FormInput, FormFeedback, FormTextarea, FormCheckbox } from \"shards-react\";\nimport { languageCode, parentsParameters, showToast, toastTypes, saveButton, closeButton, newCaseButton } from \"../../utils/general_utils\";\nimport { Multiselect } from \"multiselect-react-dropdown\";\nimport { addCasoError, sucessoGeral } from \"../../utils/messages_strings\";\nimport { firestore, firebase_auth, firebase, firebaseConfig } from \"../../firebase-config\";\nimport { toast, Bounce } from \"react-toastify\";\nimport { saveCaseToDB } from \"../../firebase_scripts/installation\";\n\nvar CasosModal = /*#__PURE__*/function (_React$Component) {\n  _inherits(CasosModal, _React$Component);\n\n  var _super = _createSuper(CasosModal);\n\n  function CasosModal(props) {\n    var _this;\n\n    _classCallCheck(this, CasosModal);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      membersComplete: [],\n      membrosSelected: [],\n      options: [],\n      show: false,\n      checkBoxStatus: false,\n      caseTitle: \"\",\n      descricao: \"\"\n    };\n    _this.createCase = _this.createCase.bind(_assertThisInitialized(_this));\n    _this.handleChangeDescricao = _this.handleChangeDescricao.bind(_assertThisInitialized(_this));\n    _this.handleChangeCaseTitle = _this.handleChangeCaseTitle.bind(_assertThisInitialized(_this));\n    _this.handleChangeCheckBox = _this.handleChangeCheckBox.bind(_assertThisInitialized(_this));\n    _this.showModal = _this.showModal.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n    _this.loadParents = _this.loadParents.bind(_assertThisInitialized(_this));\n    _this.handleChangeCheckBoxMembers = _this.handleChangeCheckBoxMembers.bind(_assertThisInitialized(_this));\n    _this.onSelectMembro = _this.onSelectMembro.bind(_assertThisInitialized(_this));\n    _this.onRemoveMembro = _this.onRemoveMembro.bind(_assertThisInitialized(_this));\n\n    _this.loadParents();\n\n    return _this;\n  }\n\n  _createClass(CasosModal, [{\n    key: \"handleChangeCheckBoxMembers\",\n    value: function handleChangeCheckBoxMembers(e) {\n      var id = e.target.id;\n      var array = this.state.membersCheckBoxStatus;\n      var prev = array[id];\n      var newVal;\n\n      if (prev) {\n        newVal = false;\n      } else {\n        newVal = true;\n      }\n\n      array[id] = newVal;\n      this.setState({\n        membersCheckBoxStatus: array\n      });\n    }\n  }, {\n    key: \"loadParents\",\n    value: function loadParents() {\n      var _this2 = this;\n\n      var parentsCollection = firestore.collection(\"parents\");\n      parentsCollection.get().then(function (querySnapshot) {\n        var membersArray = [];\n        var membersArrayComplete = [];\n        var options = [];\n        var index = 0;\n        querySnapshot.forEach(function (doc) {\n          if (doc.data()[\"Nome\"] != undefined && doc.data()[\"Nome\"] != null) {\n            if (doc.data()[\"Validated\"] != undefined && doc.data()[\"Validated\"] != null && doc.data()[\"Validated\"].toString() != \"false\") {\n              membersArrayComplete.push({\n                nome: doc.data()[\"Nome\"],\n                id: doc.data()[\"Email\"],\n                photo: doc.data()[\"photo\"]\n              });\n              options.push({\n                id: index,\n                name: doc.data()[\"Nome\"]\n              });\n              index += 1;\n            }\n          }\n        });\n\n        if (options.length != 0) {\n          _this2.setState({\n            membersComplete: membersArrayComplete,\n            options: options\n          });\n        }\n      });\n    }\n  }, {\n    key: \"showModal\",\n    value: function showModal() {\n      this.setState({\n        show: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        show: false,\n        caseTitle: \"\",\n        descricao: \"\",\n        membrosSelected: [],\n        checkBoxStatus: false\n      });\n    }\n  }, {\n    key: \"handleChangeCheckBox\",\n    value: function handleChangeCheckBox() {\n      var checkBoxStatus = this.state.checkBoxStatus;\n      var newValue = false;\n\n      if (checkBoxStatus) {\n        newValue = false;\n      } else {\n        newValue = true;\n      }\n\n      this.setState({\n        checkBoxStatus: newValue\n      });\n    }\n  }, {\n    key: \"handleChangeCaseTitle\",\n    value: function handleChangeCaseTitle(e) {\n      this.setState({\n        caseTitle: e.target.value\n      });\n    }\n  }, {\n    key: \"handleChangeDescricao\",\n    value: function handleChangeDescricao(e) {\n      this.setState({\n        descricao: e.target.value\n      });\n    }\n  }, {\n    key: \"onSelectMembro\",\n    value: function onSelectMembro(selectedList, selectedItem) {\n      var array = this.state.membrosSelected;\n      array.push(selectedItem.id);\n      this.setState({\n        membrosSelected: array\n      });\n    }\n  }, {\n    key: \"onRemoveMembro\",\n    value: function onRemoveMembro(selectedList, removedItem) {\n      var membrosSelected = this.state.membrosSelected;\n      var array = membrosSelected;\n      var index = array.indexOf(removedItem.id);\n\n      if (index !== -1) {\n        array.splice(index, 1);\n      }\n\n      this.setState({\n        membrosSelected: array\n      });\n    }\n  }, {\n    key: \"createCase\",\n    value: function createCase() {\n      var _this$state = this.state,\n          checkBoxStatus = _this$state.checkBoxStatus,\n          caseTitle = _this$state.caseTitle,\n          descricao = _this$state.descricao,\n          membersComplete = _this$state.membersComplete,\n          membrosSelected = _this$state.membrosSelected;\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n\n      if (caseTitle === \"\") {\n        var message = \"Título do caso em falta!\";\n        toast.configure();\n        toast(message, {\n          transition: Bounce,\n          closeButton: true,\n          autoClose: 2000,\n          position: \"top-right\",\n          type: \"error\"\n        });\n      } else {\n        var listaMembros = [];\n        var privateVal = false;\n\n        if (checkBoxStatus) {\n          privateVal = true;\n          var listaCompletaMembros = membersComplete;\n\n          for (var i = 0; i < membrosSelected.length; i++) {\n            listaMembros.push(listaCompletaMembros[membrosSelected[i]]);\n          }\n        }\n\n        var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/addCaso?\" + \"titulo=\" + encodeURIComponent(caseTitle) + \"&\" + \"descricao=\" + encodeURIComponent(descricao) + \"&\" + \"membros=\" + encodeURIComponent(JSON.stringify(listaMembros)) + \"&\" + \"privado=\" + privateVal + \"&\" + \"nome_autor=\" + encodeURIComponent(currentUser.Nome) + \"&\" + \"id_autor=\" + currentUser.Email + \"&\" + \"foto_autor=\" + encodeURIComponent(currentUser.photo);\n\n        var request = /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return fetch(uri).then(function (data) {\n                      console.log(\"Caso adicionado com sucesso.\");\n                      showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\n                      this_.setState({\n                        caseTitle: \"\",\n                        descricao: \"\"\n                      });\n                      this_.closeModal();\n                      this_.props.componentDidMount();\n                    }).catch(function (error) {\n                      console.log(error);\n                      showToast(addCasoError[languageCode], 5000, toastTypes.ERROR);\n                    });\n\n                  case 2:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function request() {\n            return _ref.apply(this, arguments);\n          };\n        }();\n\n        request();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n        size: \"md\",\n        theme: \"success\",\n        id: \"new_case\",\n        onClick: this.showModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-plus mr-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }\n      }), \" \", newCaseButton[languageCode]), /*#__PURE__*/React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.closeModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        closeButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }\n      }, \"Novo caso\")), /*#__PURE__*/React.createElement(Modal.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(ListGroup, {\n        flush: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"configAssocName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 23\n        }\n      }, \"T\\xEDtulo do caso\"), /*#__PURE__*/React.createElement(FormInput, {\n        id: \"novoCasoTitulo\",\n        type: \"text\",\n        placeholder: \"Breve t\\xEDtulo do situa\\xE7\\xE3o que origina o caso.\",\n        value: this.state.caseTitle,\n        onChange: this.handleChangeCaseTitle,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(FormFeedback, {\n        id: \"novoCasoTituloFeedback\",\n        valid: false,\n        style: {\n          display: \"none\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 23\n        }\n      }, \"Por favor, preencha este campo\")), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"novoCasoDescricao\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 23\n        }\n      }, \"Descri\\xE7\\xE3o (opcional)\"), /*#__PURE__*/React.createElement(FormTextarea, {\n        id: \"novoCasoDescricao\",\n        placeholder: \"Descri\\xE7\\xE3o breve da situa\\xE7\\xE3o que origina o caso.\",\n        value: this.state.descricao,\n        onChange: this.handleChangeDescricao,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(FormFeedback, {\n        id: \"novoCasoDescricaoFeedback\",\n        valid: false,\n        style: {\n          display: \"none\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 23\n        }\n      }, \"Por favor, preencha este campo\")), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(FormCheckbox, {\n        id: \"novoCasoPrivadoCheckbox\",\n        checked: this.state.checkBoxStatus,\n        onChange: this.handleChangeCheckBox,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 23\n        }\n      }, \"Este caso \\xE9 privado.\")), this.state.checkBoxStatus ? /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"membros\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 25\n        }\n      }, \"Membros\"), /*#__PURE__*/React.createElement(Multiselect, {\n        options: this.state.options // Options to display in the dropdown\n        ,\n        onSelect: this.onSelectMembro // Function will trigger on select event\n        ,\n        onRemove: this.onRemoveMembro,\n        displayValue: \"name\" // Property name to display in the dropdown options\n        ,\n        showCheckbox: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 25\n        }\n      })) : \"\"))))), /*#__PURE__*/React.createElement(Modal.Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        theme: \"danger\",\n        onClick: this.closeModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }\n      }, closeButton[languageCode]), /*#__PURE__*/React.createElement(Button, {\n        theme: \"success\",\n        onClick: this.createCase,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }\n      }, saveButton[languageCode]))));\n    }\n  }]);\n\n  return CasosModal;\n}(React.Component);\n\nexport default CasosModal;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/casos/CasosModal.js"],"names":["React","Fragment","useState","ReactDOM","Modal","ListGroup","ListGroupItem","Button","Col","Form","FormGroup","FormInput","FormFeedback","FormTextarea","FormCheckbox","languageCode","parentsParameters","showToast","toastTypes","saveButton","closeButton","newCaseButton","Multiselect","addCasoError","sucessoGeral","firestore","firebase_auth","firebase","firebaseConfig","toast","Bounce","saveCaseToDB","CasosModal","props","state","membersComplete","membrosSelected","options","show","checkBoxStatus","caseTitle","descricao","createCase","bind","handleChangeDescricao","handleChangeCaseTitle","handleChangeCheckBox","showModal","closeModal","loadParents","handleChangeCheckBoxMembers","onSelectMembro","onRemoveMembro","e","id","target","array","membersCheckBoxStatus","prev","newVal","setState","parentsCollection","collection","get","then","querySnapshot","membersArray","membersArrayComplete","index","forEach","doc","data","undefined","toString","push","nome","photo","name","length","newValue","value","selectedList","selectedItem","removedItem","indexOf","splice","this_","project_id","projectId","currentUser","JSON","parse","window","localStorage","getItem","message","configure","transition","autoClose","position","type","listaMembros","privateVal","listaCompletaMembros","i","uri","encodeURIComponent","stringify","Nome","Email","request","fetch","console","log","SUCCESS","componentDidMount","catch","error","ERROR","display","Component"],"mappings":"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","sourcesContent":["/* eslint jsx-a11y/anchor-is-valid: 0 */\r\n\r\nimport React, { Fragment, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport {\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Button,\r\n  Col,\r\n  Form,\r\n  FormGroup,\r\n  FormInput,\r\n  FormFeedback,\r\n  FormTextarea,\r\n  FormCheckbox,\r\n} from \"shards-react\";\r\nimport {\r\n  languageCode,\r\n  parentsParameters,\r\n  showToast,\r\n  toastTypes,\r\n  saveButton,\r\n  closeButton,\r\n  newCaseButton,\r\n} from \"../../utils/general_utils\";\r\nimport { Multiselect } from \"multiselect-react-dropdown\";\r\nimport { addCasoError, sucessoGeral } from \"../../utils/messages_strings\";\r\nimport {\r\n  firestore,\r\n  firebase_auth,\r\n  firebase,\r\n  firebaseConfig,\r\n} from \"../../firebase-config\";\r\nimport { toast, Bounce } from \"react-toastify\";\r\nimport { saveCaseToDB } from \"../../firebase_scripts/installation\";\r\n\r\nclass CasosModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      membersComplete: [],\r\n      membrosSelected: [],\r\n      options: [],\r\n      show: false,\r\n      checkBoxStatus: false,\r\n      caseTitle: \"\",\r\n      descricao: \"\",\r\n    };\r\n\r\n    this.createCase = this.createCase.bind(this);\r\n    this.handleChangeDescricao = this.handleChangeDescricao.bind(this);\r\n    this.handleChangeCaseTitle = this.handleChangeCaseTitle.bind(this);\r\n    this.handleChangeCheckBox = this.handleChangeCheckBox.bind(this);\r\n    this.showModal = this.showModal.bind(this);\r\n    this.closeModal = this.closeModal.bind(this);\r\n    this.loadParents = this.loadParents.bind(this);\r\n    this.handleChangeCheckBoxMembers = this.handleChangeCheckBoxMembers.bind(\r\n      this\r\n    );\r\n    this.onSelectMembro = this.onSelectMembro.bind(this);\r\n    this.onRemoveMembro = this.onRemoveMembro.bind(this);\r\n    this.loadParents();\r\n  }\r\n\r\n  handleChangeCheckBoxMembers(e) {\r\n    const id = e.target.id;\r\n\r\n    var array = this.state.membersCheckBoxStatus;\r\n    var prev = array[id];\r\n    var newVal;\r\n    if (prev) {\r\n      newVal = false;\r\n    } else {\r\n      newVal = true;\r\n    }\r\n\r\n    array[id] = newVal;\r\n    this.setState({ membersCheckBoxStatus: array });\r\n  }\r\n\r\n  loadParents() {\r\n    const parentsCollection = firestore.collection(\"parents\");\r\n\r\n    parentsCollection.get().then((querySnapshot) => {\r\n      var membersArray = [];\r\n      var membersArrayComplete = [];\r\n      var options = [];\r\n\r\n      var index = 0;\r\n      querySnapshot.forEach((doc) => {\r\n        if (doc.data()[\"Nome\"] != undefined && doc.data()[\"Nome\"] != null) {\r\n          if (\r\n            doc.data()[\"Validated\"] != undefined &&\r\n            doc.data()[\"Validated\"] != null &&\r\n            doc.data()[\"Validated\"].toString() != \"false\"\r\n          ) {\r\n            membersArrayComplete.push({\r\n              nome: doc.data()[\"Nome\"],\r\n              id: doc.data()[\"Email\"],\r\n              photo: doc.data()[\"photo\"],\r\n            });\r\n            options.push({ id: index, name: doc.data()[\"Nome\"] });\r\n            index += 1;\r\n          }\r\n        }\r\n      });\r\n      if (options.length != 0) {\r\n        this.setState({\r\n          membersComplete: membersArrayComplete,\r\n          options: options,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  showModal() {\r\n    this.setState({ show: true });\r\n  }\r\n\r\n  closeModal() {\r\n    this.setState({\r\n      show: false,\r\n      caseTitle: \"\",\r\n      descricao: \"\",\r\n      membrosSelected: [],\r\n      checkBoxStatus: false,\r\n    });\r\n  }\r\n\r\n  handleChangeCheckBox() {\r\n    let { checkBoxStatus } = this.state;\r\n    var newValue = false;\r\n    if (checkBoxStatus) {\r\n      newValue = false;\r\n    } else {\r\n      newValue = true;\r\n    }\r\n\r\n    this.setState({ checkBoxStatus: newValue });\r\n  }\r\n\r\n  handleChangeCaseTitle(e) {\r\n    this.setState({ caseTitle: e.target.value });\r\n  }\r\n\r\n  handleChangeDescricao(e) {\r\n    this.setState({ descricao: e.target.value });\r\n  }\r\n\r\n  onSelectMembro(selectedList, selectedItem) {\r\n    var array = this.state.membrosSelected;\r\n    array.push(selectedItem.id);\r\n    this.setState({ membrosSelected: array });\r\n  }\r\n\r\n  onRemoveMembro(selectedList, removedItem) {\r\n    const { membrosSelected } = this.state;\r\n    var array = membrosSelected;\r\n\r\n    var index = array.indexOf(removedItem.id);\r\n    if (index !== -1) {\r\n      array.splice(index, 1);\r\n    }\r\n\r\n    this.setState({ membrosSelected: array });\r\n  }\r\n\r\n  createCase() {\r\n    const {\r\n      checkBoxStatus,\r\n      caseTitle,\r\n      descricao,\r\n      membersComplete,\r\n      membrosSelected,\r\n    } = this.state;\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\r\n\r\n    if (caseTitle === \"\") {\r\n      var message = \"Título do caso em falta!\";\r\n      toast.configure();\r\n      toast(message, {\r\n        transition: Bounce,\r\n        closeButton: true,\r\n        autoClose: 2000,\r\n        position: \"top-right\",\r\n        type: \"error\",\r\n      });\r\n    } else {\r\n      var listaMembros = [];\r\n      var privateVal = false;\r\n\r\n      if (checkBoxStatus) {\r\n        privateVal = true;\r\n\r\n        var listaCompletaMembros = membersComplete;\r\n\r\n        for (var i = 0; i < membrosSelected.length; i++) {\r\n          listaMembros.push(listaCompletaMembros[membrosSelected[i]]);\r\n        }\r\n      }\r\n\r\n      let uri =\r\n        \"https://us-central1-\" +\r\n        project_id +\r\n        \".cloudfunctions.net/api/addCaso?\" +\r\n        \"titulo=\" +\r\n        encodeURIComponent(caseTitle) +\r\n        \"&\" +\r\n        \"descricao=\" +\r\n        encodeURIComponent(descricao) +\r\n        \"&\" +\r\n        \"membros=\" +\r\n        encodeURIComponent(JSON.stringify(listaMembros)) +\r\n        \"&\" +\r\n        \"privado=\" +\r\n        privateVal +\r\n        \"&\" +\r\n        \"nome_autor=\" +\r\n        encodeURIComponent(currentUser.Nome) +\r\n        \"&\" +\r\n        \"id_autor=\" +\r\n        currentUser.Email +\r\n        \"&\" +\r\n        \"foto_autor=\" +\r\n        encodeURIComponent(currentUser.photo);\r\n\r\n      const request = async () => {\r\n        await fetch(uri)\r\n          .then(function (data) {\r\n            console.log(\"Caso adicionado com sucesso.\");\r\n            showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\r\n\r\n            this_.setState({ caseTitle: \"\", descricao: \"\" });\r\n            this_.closeModal();\r\n            this_.props.componentDidMount();\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error);\r\n            showToast(addCasoError[languageCode], 5000, toastTypes.ERROR);\r\n          });\r\n      };\r\n\r\n      request();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <Button\r\n          size=\"md\"\r\n          theme=\"success\"\r\n          id=\"new_case\"\r\n          onClick={this.showModal}\r\n        >\r\n          <i className=\"fa fa-plus mr-1\" /> {newCaseButton[languageCode]}\r\n        </Button>\r\n\r\n        <Modal show={this.state.show} onHide={this.closeModal}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Novo caso</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <ListGroup flush>\r\n              <ListGroupItem className=\"p-3\">\r\n                <Col>\r\n                  <Form>\r\n                    <FormGroup>\r\n                      <label htmlFor=\"configAssocName\">Título do caso</label>\r\n                      <FormInput\r\n                        id=\"novoCasoTitulo\"\r\n                        type=\"text\"\r\n                        placeholder=\"Breve título do situação que origina o caso.\"\r\n                        value={this.state.caseTitle}\r\n                        onChange={this.handleChangeCaseTitle}\r\n                        required\r\n                      />\r\n                      <FormFeedback\r\n                        id=\"novoCasoTituloFeedback\"\r\n                        valid={false}\r\n                        style={{ display: \"none\" }}\r\n                      >\r\n                        Por favor, preencha este campo\r\n                      </FormFeedback>\r\n                    </FormGroup>\r\n\r\n                    {/* Descricao Textarea */}\r\n                    <FormGroup>\r\n                      <label htmlFor=\"novoCasoDescricao\">\r\n                        Descrição (opcional)\r\n                      </label>\r\n                      <FormTextarea\r\n                        id=\"novoCasoDescricao\"\r\n                        placeholder=\"Descrição breve da situação que origina o caso.\"\r\n                        value={this.state.descricao}\r\n                        onChange={this.handleChangeDescricao}\r\n                      />\r\n                      <FormFeedback\r\n                        id=\"novoCasoDescricaoFeedback\"\r\n                        valid={false}\r\n                        style={{ display: \"none\" }}\r\n                      >\r\n                        Por favor, preencha este campo\r\n                      </FormFeedback>\r\n                    </FormGroup>\r\n\r\n                    <FormGroup>\r\n                      <FormCheckbox\r\n                        id=\"novoCasoPrivadoCheckbox\"\r\n                        checked={this.state.checkBoxStatus}\r\n                        onChange={this.handleChangeCheckBox}\r\n                      >\r\n                        {/* eslint-disable-next-line */}Este caso é privado.\r\n                      </FormCheckbox>\r\n                    </FormGroup>\r\n\r\n                    {this.state.checkBoxStatus ? (\r\n                      <FormGroup>\r\n                        <label htmlFor=\"membros\">Membros</label>\r\n                        <Multiselect\r\n                          options={this.state.options} // Options to display in the dropdown\r\n                          onSelect={this.onSelectMembro} // Function will trigger on select event\r\n                          onRemove={this.onRemoveMembro}\r\n                          displayValue=\"name\" // Property name to display in the dropdown options\r\n                          showCheckbox={true}\r\n                        />\r\n                      </FormGroup>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                  </Form>\r\n                </Col>\r\n              </ListGroupItem>\r\n            </ListGroup>\r\n          </Modal.Body>\r\n\r\n          <Modal.Footer>\r\n            <Button theme=\"danger\" onClick={this.closeModal}>\r\n              {closeButton[languageCode]}\r\n            </Button>\r\n            <Button theme=\"success\" onClick={this.createCase}>\r\n              {saveButton[languageCode]}\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CasosModal;\r\n"]},"metadata":{},"sourceType":"module"}