{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\profile\\\\LinkProviders.js\";\nimport React from \"react\";\nimport { Button, Card, CardHeader, Col, Form, FormFeedback, FormGroup, FormInput, FormTextarea, ListGroup, ListGroupItem, Row } from \"shards-react\";\nimport { auth_providers_names, languageCode, parentsParameters, showToast, toastTypes } from \"../../utils/general_utils\";\nimport { saveChanges, cancel, changeEmail, success_geral, error_geral, unlinkGoogle, unlinkMicrosoft, unlinkFacebook } from \"../../utils/common_strings\";\nimport { profileSettingsDataFormTitle, profileSettingsProvidersSectionTitle } from \"../../utils/page_titles_strings\";\nimport { provideRequiredFieldsMessage, confirmUpdateEmail, linkAccountError, unlinkAccountError } from \"../../utils/messages_strings\";\nimport { firebase, firebase_auth } from \"../../firebase-config\";\n\nvar LinkProviders = /*#__PURE__*/function (_React$Component) {\n  _inherits(LinkProviders, _React$Component);\n\n  var _super = _createSuper(LinkProviders);\n\n  function LinkProviders(props) {\n    var _this;\n\n    _classCallCheck(this, LinkProviders);\n\n    _this = _super.call(this, props);\n    var parent = null;\n    var infoFormTitle = profileSettingsProvidersSectionTitle[languageCode];\n\n    if (_this.props.user != null) {\n      parent = _this.props.user;\n    } //const {phone, nif, email, name, cc, job, street, city} = this.props.user;\n\n\n    _this.state = {\n      title: infoFormTitle,\n      parent: parent,\n      hasFacebook: false,\n      hasGoogle: false,\n      hasMicrosoft: false\n    };\n    _this.googleLink = _this.googleLink.bind(_assertThisInitialized(_this));\n    _this.facebookLink = _this.facebookLink.bind(_assertThisInitialized(_this));\n    _this.microsoftLink = _this.microsoftLink.bind(_assertThisInitialized(_this));\n    _this.googleUnlink = _this.googleUnlink.bind(_assertThisInitialized(_this));\n    _this.facebookUnlink = _this.facebookUnlink.bind(_assertThisInitialized(_this));\n    _this.microsofUnlink = _this.microsofUnlink.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /*********************************** LIFECYCLE ***********************************/\n\n\n  _createClass(LinkProviders, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      var loggedUser = firebase_auth.currentUser;\n      var providers = [];\n\n      if (loggedUser != null) {\n        loggedUser.providerData.forEach(function (profile) {\n          providers.push(profile.providerId);\n        });\n      }\n\n      if (providers.includes(auth_providers_names.GOOGLE)) {\n        this.setState({\n          hasGoogle: true\n        });\n      }\n\n      if (providers.includes(auth_providers_names.FACEBOOK)) {\n        this.setState({\n          hasFacebook: true\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n    /*********************************** HANDLERS ***********************************/\n\n  }, {\n    key: \"googleLink\",\n    value: function googleLink() {\n      var this_ = this;\n      var provider = new firebase.auth.GoogleAuthProvider();\n      firebase_auth.currentUser.linkWithPopup(provider).then(function (result) {\n        showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\n        console.log(\"link result -> \" + JSON.stringify(result));\n        this_.setState({\n          hasGoogle: true\n        });\n      }).catch(function (error) {\n        console.log(\"error no link Google: \" + error);\n        showToast(linkAccountError[languageCode], 6000, toastTypes.ERROR);\n      });\n    }\n  }, {\n    key: \"facebookLink\",\n    value: function facebookLink() {\n      var this_ = this;\n      var provider = new firebase.auth.FacebookAuthProvider();\n      firebase_auth.currentUser.linkWithPopup(provider).then(function (result) {\n        showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\n        this_.setState({\n          hasFacebook: true\n        });\n      }).catch(function (error) {\n        console.log(\"erro no unlink FB -> \" + error);\n        showToast(linkAccountError[languageCode], 6000, toastTypes.ERROR);\n      });\n    }\n  }, {\n    key: \"microsoftLink\",\n    value: function microsoftLink() {\n      var provider = new firebase.auth.OAuthProvider('microsoft.com');\n      firebase_auth.currentUser.linkWithPopup(provider).then(function (result) {\n        showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\n      }).catch(function () {\n        showToast(linkAccountError[languageCode], 6000, toastTypes.ERROR);\n      });\n    }\n  }, {\n    key: \"googleUnlink\",\n    value: function googleUnlink() {\n      var this_ = this;\n      var user = firebase_auth.currentUser;\n      user.unlink('google.com').then(function () {\n        showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\n        this_.setState({\n          hasGoogle: false\n        });\n      }).catch(function (error) {\n        console.log(\"erro no unlink FB -> \" + error);\n        showToast(unlinkAccountError[languageCode], 6000, toastTypes.ERROR);\n      });\n    }\n  }, {\n    key: \"facebookUnlink\",\n    value: function facebookUnlink() {\n      var this_ = this;\n      var user = firebase_auth.currentUser;\n      user.unlink('facebook.com').then(function () {\n        showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\n        this_.setState({\n          hasFacebook: false\n        });\n      }).catch(function (error) {\n        console.log(\"erro no unlink FB -> \" + error);\n        showToast(unlinkAccountError[languageCode], 6000, toastTypes.ERROR);\n      });\n    }\n  }, {\n    key: \"microsofUnlink\",\n    value: function microsofUnlink() {\n      var user = firebase_auth.currentUser;\n      user.unlink('microsoft.com').then(function () {\n        showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\n      }).catch(function (error) {\n        console.log(\"erro no unlink FB -> \" + error);\n        showToast(unlinkAccountError[languageCode], 6000, toastTypes.ERROR);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Card, {\n        small: true,\n        className: \"mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }\n      }, this.state.title)), /*#__PURE__*/React.createElement(ListGroup, {\n        flush: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        lg: \"12\",\n        md: \"12\",\n        style: {\n          marginBottom: \"23px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 15\n        }\n      }, this.state.hasFacebook ? /*#__PURE__*/React.createElement(Button, {\n        theme: \"primary\",\n        onClick: this.facebookUnlink,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fab fa-facebook-f\",\n        style: {\n          marginRight: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }\n      }), unlinkFacebook[languageCode]) : /*#__PURE__*/React.createElement(Button, {\n        theme: \"primary\",\n        onClick: this.facebookLink,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fab fa-facebook-f\",\n        style: {\n          marginRight: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }), \"Facebook\")), /*#__PURE__*/React.createElement(Col, {\n        lg: \"12\",\n        md: \"12\",\n        style: {\n          marginBottom: \"23px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 15\n        }\n      }, this.state.hasGoogle ? /*#__PURE__*/React.createElement(Button, {\n        theme: \"danger\",\n        onClick: this.googleUnlink,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fab fa-google\",\n        style: {\n          marginRight: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 21\n        }\n      }), unlinkGoogle[languageCode]) : /*#__PURE__*/React.createElement(Button, {\n        theme: \"danger\",\n        onClick: this.googleLink,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fab fa-google\",\n        style: {\n          marginRight: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }\n      }), \"Google\"))))));\n    }\n  }]);\n\n  return LinkProviders;\n}(React.Component);\n\nexport default LinkProviders;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/profile/LinkProviders.js"],"names":["React","Button","Card","CardHeader","Col","Form","FormFeedback","FormGroup","FormInput","FormTextarea","ListGroup","ListGroupItem","Row","auth_providers_names","languageCode","parentsParameters","showToast","toastTypes","saveChanges","cancel","changeEmail","success_geral","error_geral","unlinkGoogle","unlinkMicrosoft","unlinkFacebook","profileSettingsDataFormTitle","profileSettingsProvidersSectionTitle","provideRequiredFieldsMessage","confirmUpdateEmail","linkAccountError","unlinkAccountError","firebase","firebase_auth","LinkProviders","props","parent","infoFormTitle","user","state","title","hasFacebook","hasGoogle","hasMicrosoft","googleLink","bind","facebookLink","microsoftLink","googleUnlink","facebookUnlink","microsofUnlink","_isMounted","loggedUser","currentUser","providers","providerData","forEach","profile","push","providerId","includes","GOOGLE","setState","FACEBOOK","this_","provider","auth","GoogleAuthProvider","linkWithPopup","then","result","SUCCESS","console","log","JSON","stringify","catch","error","ERROR","FacebookAuthProvider","OAuthProvider","unlink","marginBottom","marginRight","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardHeader,\r\n  Col,\r\n  Form,\r\n  FormFeedback,\r\n  FormGroup,\r\n  FormInput,\r\n  FormTextarea,\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Row\r\n} from \"shards-react\";\r\nimport {\r\n  auth_providers_names,\r\n  languageCode,\r\n  parentsParameters, showToast, toastTypes\r\n} from \"../../utils/general_utils\";\r\nimport {\r\n  saveChanges,\r\n  cancel,\r\n  changeEmail,\r\n  success_geral,\r\n  error_geral,\r\n  unlinkGoogle,\r\n  unlinkMicrosoft,\r\n  unlinkFacebook\r\n} from \"../../utils/common_strings\";\r\nimport {\r\n  profileSettingsDataFormTitle, profileSettingsProvidersSectionTitle\r\n} from \"../../utils/page_titles_strings\";\r\nimport {\r\n  provideRequiredFieldsMessage,\r\n  confirmUpdateEmail,\r\n  linkAccountError,\r\n  unlinkAccountError\r\n} from \"../../utils/messages_strings\";\r\nimport {firebase, firebase_auth} from \"../../firebase-config\";\r\n\r\n\r\nclass LinkProviders extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    let parent = null;\r\n    const infoFormTitle = profileSettingsProvidersSectionTitle[languageCode];\r\n\r\n    if(this.props.user!=null){\r\n      parent = this.props.user;\r\n    }\r\n\r\n    //const {phone, nif, email, name, cc, job, street, city} = this.props.user;\r\n    this.state = {\r\n      title: infoFormTitle,\r\n      parent : parent,\r\n      hasFacebook : false,\r\n      hasGoogle : false,\r\n      hasMicrosoft : false\r\n    };\r\n\r\n\r\n    this.googleLink = this.googleLink.bind(this);\r\n    this.facebookLink = this.facebookLink.bind(this);\r\n    this.microsoftLink = this.microsoftLink.bind(this);\r\n\r\n    this.googleUnlink = this.googleUnlink.bind(this);\r\n    this.facebookUnlink = this.facebookUnlink.bind(this);\r\n    this.microsofUnlink = this.microsofUnlink.bind(this);\r\n\r\n  }\r\n\r\n  /*********************************** LIFECYCLE ***********************************/\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n\r\n    const loggedUser = firebase_auth.currentUser;\r\n    let providers = [];\r\n\r\n    if(loggedUser!=null){\r\n      loggedUser.providerData.forEach(function (profile) {\r\n        providers.push(profile.providerId);\r\n      });\r\n    }\r\n\r\n    if(providers.includes(auth_providers_names.GOOGLE)){\r\n      this.setState({hasGoogle : true});\r\n    }\r\n    if(providers.includes(auth_providers_names.FACEBOOK)){\r\n      this.setState({hasFacebook : true});\r\n    }\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  /*********************************** HANDLERS ***********************************/\r\n\r\n\r\n  googleLink(){\r\n    const this_ = this;\r\n    const provider = new firebase.auth.GoogleAuthProvider();\r\n      firebase_auth.currentUser.linkWithPopup(provider).then(function(result) {\r\n        showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\r\n        console.log(\"link result -> \" + JSON.stringify(result));\r\n        this_.setState({hasGoogle : true});\r\n      }).catch(function(error) {\r\n        console.log(\"error no link Google: \" + error);\r\n        showToast(linkAccountError[languageCode], 6000, toastTypes.ERROR);\r\n      });\r\n  }\r\n\r\n  facebookLink(){\r\n    const this_ = this;\r\n    const provider = new firebase.auth.FacebookAuthProvider();\r\n    firebase_auth.currentUser.linkWithPopup(provider).then(function(result) {\r\n      showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\r\n      this_.setState({hasFacebook : true});\r\n    }).catch(function(error) {\r\n      console.log(\"erro no unlink FB -> \" + error);\r\n      showToast(linkAccountError[languageCode], 6000, toastTypes.ERROR);\r\n    });\r\n  }\r\n\r\n  microsoftLink(){\r\n    const provider = new firebase.auth.OAuthProvider('microsoft.com');\r\n    firebase_auth.currentUser.linkWithPopup(provider).then(function(result) {\r\n      showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\r\n    }).catch(function() {\r\n      showToast(linkAccountError[languageCode], 6000, toastTypes.ERROR);\r\n    });\r\n  }\r\n\r\n  googleUnlink(){\r\n    const this_ = this;\r\n    const user = firebase_auth.currentUser;\r\n    user.unlink('google.com').then(function() {\r\n      showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\r\n      this_.setState({hasGoogle : false});\r\n    }).catch(function(error) {\r\n      console.log(\"erro no unlink FB -> \" + error);\r\n      showToast(unlinkAccountError[languageCode], 6000, toastTypes.ERROR);\r\n    });\r\n  }\r\n\r\n  facebookUnlink(){\r\n    const this_ = this;\r\n    const user = firebase_auth.currentUser;\r\n    user.unlink('facebook.com').then(function() {\r\n      showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\r\n      this_.setState({hasFacebook : false});\r\n    }).catch(function(error) {\r\n      console.log(\"erro no unlink FB -> \" + error);\r\n      showToast(unlinkAccountError[languageCode], 6000, toastTypes.ERROR);\r\n    });\r\n  }\r\n\r\n  microsofUnlink(){\r\n    const user = firebase_auth.currentUser;\r\n    user.unlink('microsoft.com').then(function() {\r\n      showToast(success_geral[languageCode], 3000, toastTypes.SUCCESS);\r\n    }).catch(function(error) {\r\n      console.log(\"erro no unlink FB -> \" + error);\r\n      showToast(unlinkAccountError[languageCode], 6000, toastTypes.ERROR);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Card small className=\"mb-4\">\r\n        <CardHeader className=\"border-bottom\">\r\n          <h6 className=\"m-0\">{this.state.title}</h6>\r\n        </CardHeader>\r\n        <ListGroup flush>\r\n          <ListGroupItem className=\"p-3\">\r\n            <Row>\r\n              <Col lg=\"12\" md=\"12\" style={{marginBottom: \"23px\"}}>\r\n                {this.state.hasFacebook ?\r\n                  <Button theme=\"primary\" onClick={this.facebookUnlink}>\r\n                    <i className=\"fab fa-facebook-f\" style={{marginRight: \"10px\"}}/>{unlinkFacebook[languageCode]}</Button>\r\n                :\r\n                  <Button theme=\"primary\" onClick={this.facebookLink}>\r\n                    <i className=\"fab fa-facebook-f\" style={{marginRight: \"10px\"}}/>Facebook</Button>\r\n                }\r\n              </Col>\r\n              <Col lg=\"12\" md=\"12\" style={{marginBottom: \"23px\"}}>\r\n                {this.state.hasGoogle ?\r\n                  <Button theme=\"danger\" onClick={this.googleUnlink}>\r\n                    <i className=\"fab fa-google\" style={{marginRight: \"10px\"}}/>{unlinkGoogle[languageCode]}</Button>\r\n                  :\r\n                  <Button theme=\"danger\" onClick={this.googleLink}>\r\n                    <i className=\"fab fa-google\" style={{marginRight: \"10px\"}}/>Google</Button>\r\n                }\r\n              </Col>\r\n              {/*<Col lg=\"12\" md=\"12\">\r\n                <Button theme=\"success\" onClick={this.microsoftLink}>\r\n                  <i className=\"fab fa-microsoft\" style={{marginRight: \"10px\"}}/>Microsoft</Button>\r\n                <Button theme=\"success\" onClick={this.microsofUnlink} style={{float : \"right\"}}>\r\n                  <i className=\"fab fa-microsoft\" style={{marginRight: \"10px\"}}/>{unlinkMicrosoft[languageCode]}</Button>\r\n              </Col>*/}\r\n            </Row>\r\n          </ListGroupItem>\r\n        </ListGroup>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default LinkProviders;\r\n"]},"metadata":{},"sourceType":"module"}