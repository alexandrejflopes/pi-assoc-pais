{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\profile\\\\UserOverview.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Card, CardHeader, Button, ListGroup, ListGroupItem, Progress, CardBody, Row, Col, CardFooter } from \"shards-react\";\nimport { defaultAvatar, languageCode, parentsParameters, studentsParameters } from \"../../utils/general_utils\";\nimport { profileMyChildren } from \"../../utils/page_titles_strings\";\nimport EducandosModal from \"./EducandosModal\";\nimport NewEducandoModal from \"./NewEducandoModal\";\nimport ParentPhotoModal from \"./ParentPhotoModal\";\n\nvar UserOverview = /*#__PURE__*/function (_React$Component) {\n  _inherits(UserOverview, _React$Component);\n\n  var _super = _createSuper(UserOverview);\n\n  function UserOverview(props) {\n    var _this;\n\n    _classCallCheck(this, UserOverview);\n\n    _this = _super.call(this, props); //console.log(\"overview props: \" + JSON.stringify(props));\n\n    var parent,\n        newParamsTypes = null;\n\n    if (_this.props.user != null) {\n      parent = _this.props.user;\n      newParamsTypes = _this.props.newParamsTypes;\n    }\n\n    _this.state = {\n      parent: parent,\n      newParamsTypes: newParamsTypes,\n      editingPhoto: false\n    };\n    _this.componentDidMount = _this.componentDidMount.bind(_assertThisInitialized(_this));\n    _this.cancelEditingPhoto = _this.cancelEditingPhoto.bind(_assertThisInitialized(_this));\n    _this.editPhoto = _this.editPhoto.bind(_assertThisInitialized(_this));\n    _this.updateFromLocalStorage = _this.updateFromLocalStorage.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /*********************************** LIFECYCLE ***********************************/\n\n\n  _createClass(UserOverview, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount(updating) {\n      //this._isMounted = true;\n      var this_ = this;\n      setInterval(this_.updateFromLocalStorage, 2000);\n\n      if (updating) {\n        console.log(\"atualizar overview\");\n        var localUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n\n        if (localUser != null) {\n          this_.setState({\n            parent: localUser\n          });\n        }\n\n        this_.props.componentDidMount(true);\n      }\n    }\n  }, {\n    key: \"updateFromLocalStorage\",\n    value: function updateFromLocalStorage() {\n      var localUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n\n      if (localUser != null) {\n        this.setState({\n          parent: localUser\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n    /*********************************** HANDLERS ***********************************/\n\n  }, {\n    key: \"editPhoto\",\n    value: function editPhoto() {\n      this.setState({\n        editingPhoto: true\n      });\n      document.getElementById(\"add-photo-button\").onclick(function (e) {\n        e.preventDefault();\n        document.getElementById(\"file-upload-input\").trigger('click');\n      });\n    }\n  }, {\n    key: \"cancelEditingPhoto\",\n    value: function cancelEditingPhoto() {\n      this.setState({\n        editingPhoto: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var parent = this.state.parent;\n      var userEducandos = parent[parentsParameters.CHILDREN[languageCode]]; //console.log(\"userEducandos: \" + JSON.stringify(userEducandos));\n\n      return /*#__PURE__*/React.createElement(Card, {\n        small: true,\n        className: \"mb-4 pt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"border-bottom text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        style: {\n          justifyContent: \"center\",\n          flexDirection: \"column\",\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: \"110px\",\n          height: \"110px\",\n          backgroundImage: \"url(\" + this.state.parent[parentsParameters.PHOTO[languageCode]] + \")\",\n          backgroundPosition: \"center\",\n          borderRadius: \"50%\",\n          backgroundSize: \"cover\",\n          backgroundRepeat: \"no-repeat\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          margin: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(ParentPhotoModal, {\n        photo: this.state.parent[parentsParameters.PHOTO[languageCode]],\n        componentDidMount: this.componentDidMount,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }\n      }, this.state.parent[parentsParameters.NAME[languageCode]]), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text-muted d-block mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }\n      }, this.state.parent[parentsParameters.EMAIL[languageCode]]), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text-muted d-block mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }\n      }, this.state.parent[parentsParameters.ASSOC_NUMBER[languageCode]], \" | \", this.state.parent[parentsParameters.ROLE[languageCode]])), /*#__PURE__*/React.createElement(ListGroup, {\n        flush: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        className: \"px-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        lg: \"10\",\n        md: \"10\",\n        sm: \"10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"mb-0 float-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }\n      }, profileMyChildren[languageCode])), /*#__PURE__*/React.createElement(Col, {\n        lg: \"2\",\n        md: \"2\",\n        sm: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(NewEducandoModal, {\n        newParamsTypesN: this.state.newParamsTypes,\n        componentDidMount: this.componentDidMount,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }\n      })))), /*#__PURE__*/React.createElement(ListGroupItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }\n      }, userEducandos.length === 0 ? /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 45\n        }\n      }) : userEducandos.map(function (student, idx) {\n        return /*#__PURE__*/React.createElement(EducandosModal, {\n          key: student[studentsParameters.NAME[languageCode]],\n          educando: userEducandos[idx],\n          indice: idx,\n          newParamsTypes: _this2.state.newParamsTypes,\n          componentDidMount: _this2.componentDidMount,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 19\n          }\n        });\n      })))));\n    }\n  }]);\n\n  return UserOverview;\n}(React.Component);\n\nexport default UserOverview;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/profile/UserOverview.js"],"names":["React","PropTypes","Card","CardHeader","Button","ListGroup","ListGroupItem","Progress","CardBody","Row","Col","CardFooter","defaultAvatar","languageCode","parentsParameters","studentsParameters","profileMyChildren","EducandosModal","NewEducandoModal","ParentPhotoModal","UserOverview","props","parent","newParamsTypes","user","state","editingPhoto","componentDidMount","bind","cancelEditingPhoto","editPhoto","updateFromLocalStorage","updating","this_","setInterval","console","log","localUser","JSON","parse","window","localStorage","getItem","setState","_isMounted","document","getElementById","onclick","e","preventDefault","trigger","userEducandos","CHILDREN","justifyContent","flexDirection","alignItems","width","height","backgroundImage","PHOTO","backgroundPosition","borderRadius","backgroundSize","backgroundRepeat","margin","NAME","EMAIL","ASSOC_NUMBER","ROLE","length","map","student","idx","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Card,\n  CardHeader,\n  Button,\n  ListGroup,\n  ListGroupItem,\n  Progress, CardBody, Row, Col, CardFooter\n} from \"shards-react\";\n\nimport {\n  defaultAvatar,\n  languageCode,\n  parentsParameters, studentsParameters\n} from \"../../utils/general_utils\";\nimport {profileMyChildren} from \"../../utils/page_titles_strings\";\nimport EducandosModal from \"./EducandosModal\";\nimport NewEducandoModal from \"./NewEducandoModal\";\nimport ParentPhotoModal from \"./ParentPhotoModal\";\n\nclass UserOverview extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    //console.log(\"overview props: \" + JSON.stringify(props));\n\n    let parent, newParamsTypes = null;\n\n    if(this.props.user!=null){\n      parent = this.props.user;\n      newParamsTypes = this.props.newParamsTypes;\n    }\n\n    this.state = {\n      parent : parent,\n      newParamsTypes : newParamsTypes,\n      editingPhoto : false\n    };\n\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.cancelEditingPhoto = this.cancelEditingPhoto.bind(this);\n    this.editPhoto = this.editPhoto.bind(this);\n    this.updateFromLocalStorage = this.updateFromLocalStorage.bind(this);\n  }\n\n  /*********************************** LIFECYCLE ***********************************/\n  componentDidMount(updating) {\n    //this._isMounted = true;\n\n    const this_ = this;\n    setInterval(this_.updateFromLocalStorage, 2000);\n    if(updating){\n      console.log(\"atualizar overview\");\n      const localUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n      if(localUser!=null){\n        this_.setState({parent : localUser});\n      }\n      this_.props.componentDidMount(true);\n    }\n  }\n\n  updateFromLocalStorage(){\n    const localUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n    if(localUser!=null){\n      this.setState({parent : localUser});\n    }\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  /*********************************** HANDLERS ***********************************/\n\n\n  editPhoto() {\n    this.setState({ editingPhoto: true });\n    document.getElementById(\"add-photo-button\").onclick(function(e){\n      e.preventDefault();\n      document.getElementById(\"file-upload-input\").trigger('click');\n    });\n  }\n\n\n  cancelEditingPhoto() {\n    this.setState({ editingPhoto: false });\n  }\n\n  render() {\n    const { parent } = this.state;\n    const userEducandos = parent[parentsParameters.CHILDREN[languageCode]];\n\n    //console.log(\"userEducandos: \" + JSON.stringify(userEducandos));\n\n    return (\n      <Card small className=\"mb-4 pt-3\">\n        <CardHeader className=\"border-bottom text-center\">\n          <Row style={{\n            justifyContent: \"center\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n          }}>\n            <div style={{\n              width : \"110px\",\n              height: \"110px\",\n              backgroundImage: \"url(\" + this.state.parent[parentsParameters.PHOTO[languageCode]] + \")\",\n              backgroundPosition : \"center\",\n              borderRadius: \"50%\",\n              backgroundSize: \"cover\",\n              backgroundRepeat: \"no-repeat\"\n            }}>\n            </div>\n            {/*\n            <img\n              className=\"rounded-circle\"\n              src={this.state.parent[parentsParameters.PHOTO[languageCode]]}\n              alt={this.state.parent[parentsParameters.NAME[languageCode]]}\n              width=\"110\"\n            />\n            */}\n          </Row>\n          <div style={{ margin: \"10px\" }} />\n          <ParentPhotoModal photo={this.state.parent[parentsParameters.PHOTO[languageCode]]} componentDidMount={this.componentDidMount}/>\n          <h4 className=\"mb-0\">{this.state.parent[parentsParameters.NAME[languageCode]]}</h4>\n          <span className=\"text-muted d-block mb-2\">{this.state.parent[parentsParameters.EMAIL[languageCode]]}</span>\n          <span className=\"text-muted d-block mb-2\">{this.state.parent[parentsParameters.ASSOC_NUMBER[languageCode]]} | {this.state.parent[parentsParameters.ROLE[languageCode]]}</span>\n        </CardHeader>\n        <ListGroup flush>\n          <ListGroupItem className=\"px-4\">\n            <Row>\n              <Col lg=\"10\" md=\"10\" sm=\"10\">\n                <h5 className=\"mb-0 float-left\">{profileMyChildren[languageCode]}</h5>\n              </Col>\n              <Col lg=\"2\" md=\"2\" sm=\"2\">\n                <NewEducandoModal newParamsTypesN={this.state.newParamsTypes} componentDidMount={this.componentDidMount}/>\n                {/*\n                <Button size=\"sm\" className=\"float-right\" onClick={() => {}}><span className=\"material-icons\" style={{fontSize:\"150%\", textAlign: \"center\", verticalAlign:\"middle\"}}>person_add</span></Button>\n                */}\n              </Col>\n            </Row>\n          </ListGroupItem>\n          <ListGroupItem>\n            <Row>\n              {userEducandos.length === 0 ? <Col/> :\n                userEducandos.map((student,idx) => (\n                  <EducandosModal key={student[studentsParameters.NAME[languageCode]]} educando={userEducandos[idx]} indice={idx} newParamsTypes={this.state.newParamsTypes} componentDidMount={this.componentDidMount}/>\n                ))\n              }\n            </Row>\n          </ListGroupItem>\n\n\n        </ListGroup>\n\n\n      </Card>\n    );\n  }\n}\n\n\n\nexport default UserOverview;\n"]},"metadata":{},"sourceType":"module"}