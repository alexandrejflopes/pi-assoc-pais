{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\quotas-page\\\\QuotasModal.js\";\n\n/* eslint jsx-a11y/anchor-is-valid: 0 */\nimport React, { Fragment, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { ListGroup, ListGroupItem, Button, Col, Form, FormGroup, FormInput, FormFeedback, FormTextarea, FormCheckbox } from \"shards-react\";\nimport { firestore, firebase_auth, firebase, firebaseConfig } from \"../../firebase-config\";\nimport { addQuotaError, sucessoGeral } from \"../../utils/messages_strings\";\nimport { assocParameters, languageCode, showToast, toastTypes, saveButton, cancelButton } from \"../../utils/general_utils\";\nimport { toast, Bounce } from \"react-toastify\";\nimport { saveCaseToDB } from \"../../firebase_scripts/installation\";\nimport { Multiselect } from \"multiselect-react-dropdown\";\nimport DatePicker from \"react-datepicker\";\nimport * as moment from \"moment\";\n\nvar QuotasModal = /*#__PURE__*/function (_React$Component) {\n  _inherits(QuotasModal, _React$Component);\n\n  var _super = _createSuper(QuotasModal);\n\n  function QuotasModal(props) {\n    var _this;\n\n    _classCallCheck(this, QuotasModal);\n\n    _this = _super.call(this, props);\n\n    _this.handleChange = function (date) {\n      _this.setState({\n        data: date\n      });\n    };\n\n    var data = new Date();\n    var month = data.getMonth() + 1;\n    var year = data.getFullYear();\n    var anoLetivoAtual = \"\";\n\n    if (month >= 7) {\n      var first = year;\n      var secondTemp = year + 1;\n      var second = secondTemp.toString()[2] + secondTemp.toString()[3];\n      anoLetivoAtual = first.toString() + \"/\" + second.toString();\n    } else {\n      var first = year - 1;\n      var second = year.toString()[2] + year.toString()[3];\n      anoLetivoAtual = first.toString() + \"/\" + second.toString();\n    }\n\n    _this.state = {\n      options: [],\n      recetor: \"\",\n      emissor: \"\",\n      user_ids: [],\n      recetor_id: \"\",\n      emissor_id: \"\",\n      email: props.user_email,\n      nome: props.user_nome,\n      valor: 5,\n      //default\n      anoLetivo: anoLetivoAtual,\n      data: new Date()\n    };\n    _this.saveCota = _this.saveCota.bind(_assertThisInitialized(_this));\n    _this.onSelectEmissor = _this.onSelectEmissor.bind(_assertThisInitialized(_this));\n    _this.onSelectRecetor = _this.onSelectRecetor.bind(_assertThisInitialized(_this));\n    _this.handlechangeValor = _this.handlechangeValor.bind(_assertThisInitialized(_this));\n    _this.handlechangeAnoLetivo = _this.handlechangeAnoLetivo.bind(_assertThisInitialized(_this));\n    _this.showModal = _this.showModal.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n    _this.loadParents = _this.loadParents.bind(_assertThisInitialized(_this));\n    _this.componentWillMount = _this.componentWillMount.bind(_assertThisInitialized(_this));\n\n    _this.loadParents();\n\n    return _this;\n  }\n\n  _createClass(QuotasModal, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      //Get value of cota defined in parameters\n      var assocDoc = JSON.parse(window.localStorage.getItem(\"assocDoc\"));\n\n      if (assocDoc != null) {\n        var quota = assocDoc[assocParameters.FEE[languageCode]];\n\n        if (quota != null) {\n          this.setState({\n            valor: quota\n          });\n        }\n      }\n    }\n  }, {\n    key: \"onSelectEmissor\",\n    value: function onSelectEmissor(selectedList, selectedItem) {\n      var user_ids = this.state.user_ids;\n      this.setState({\n        emissor: selectedItem.name,\n        emissor_id: user_ids[selectedItem.id]\n      });\n    }\n  }, {\n    key: \"onSelectRecetor\",\n    value: function onSelectRecetor(selectedList, selectedItem) {\n      var user_ids = this.state.user_ids;\n      this.setState({\n        recetor: selectedItem.name,\n        recetor_id: user_ids[selectedItem.id]\n      });\n    }\n  }, {\n    key: \"handlechangeValor\",\n    value: function handlechangeValor(e) {\n      this.setState({\n        valor: e.target.value\n      });\n    }\n  }, {\n    key: \"handlechangeAnoLetivo\",\n    value: function handlechangeAnoLetivo(e) {\n      this.setState({\n        anoLetivo: e.target.value\n      });\n    }\n  }, {\n    key: \"loadParents\",\n    value: function loadParents() {\n      var this_ = this;\n      var project_id = firebaseConfig.projectId; //const parentsCollection = firestore.collection(\"parents\");\n\n      var options = [];\n      var user_ids = [];\n      var i = 0;\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getParents\";\n\n      var request = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var resposta;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return fetch(uri).then(function (resp) {\n                    return resp.json();\n                  }) // Transform the data into json\n                  .then(function (data) {\n                    console.log(data);\n\n                    for (var x = 0; x < data.length; x++) {\n                      var parent = data[x];\n\n                      if (parent[\"Nome\"] != null) {\n                        if (parent[\"Validated\"] != null && parent[\"Validated\"].toString() != \"false\") {\n                          var member = {\n                            id: i,\n                            name: parent[\"Nome\"]\n                          };\n                          options.push(member);\n                          user_ids.push(parent.Email);\n                          i++;\n                        }\n                      }\n                    }\n\n                    this_.setState({\n                      options: options,\n                      user_ids: user_ids\n                    });\n                  }).catch(function (error) {//\n                  });\n\n                case 2:\n                  return _context.abrupt(\"return\", resposta);\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function request() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      request();\n    }\n  }, {\n    key: \"showModal\",\n    value: function showModal() {\n      this.setState({\n        show: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        show: false\n      });\n    }\n  }, {\n    key: \"saveCota\",\n    value: function saveCota() {\n      var _this$state = this.state,\n          recetor = _this$state.recetor,\n          emissor = _this$state.emissor,\n          valor = _this$state.valor,\n          anoLetivo = _this$state.anoLetivo,\n          data = _this$state.data;\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var regex = /[0-9]{4}\\/[0-9]{2}/;\n\n      if (recetor == \"\") {\n        var message = \"Escolha um recetor!\";\n        toast.configure();\n        toast(message, {\n          transition: Bounce,\n          closeButton: true,\n          autoClose: 2000,\n          position: \"top-right\",\n          type: \"error\"\n        });\n      } else if (emissor == \"\") {\n        var message = \"Escolha um emissor!\";\n        toast.configure();\n        toast(message, {\n          transition: Bounce,\n          closeButton: true,\n          autoClose: 2000,\n          position: \"top-right\",\n          type: \"error\"\n        });\n      } else if (valor == -1 || valor.length == 0) {\n        var message = \"Escolha um valor!\";\n        toast.configure();\n        toast(message, {\n          transition: Bounce,\n          closeButton: true,\n          autoClose: 2000,\n          position: \"top-right\",\n          type: \"error\"\n        });\n      } else if (anoLetivo == \"\" || !regex.test(anoLetivo)) {\n        var message = \"Ano Letivo em formato incorreto!\";\n        toast.configure();\n        toast(message, {\n          transition: Bounce,\n          closeButton: true,\n          autoClose: 2000,\n          position: \"top-right\",\n          type: \"error\"\n        });\n      } else {\n        var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/addCota?\" + \"id=\" + encodeURIComponent(this_.state.emissor_id) + \"&nome=\" + encodeURIComponent(emissor) + \"&ano=\" + encodeURIComponent(anoLetivo) + \"&valor=\" + encodeURIComponent(valor) + \"&recetor_id=\" + encodeURIComponent(this_.state.recetor_id) + \"&recetor_nome=\" + encodeURIComponent(recetor) + \"&confirmado_recetor=\" + \"false\" + \"&confirmado_emissor=\" + \"false\" + \"&notas=\" + encodeURIComponent(\" \") + \"&data=\" + encodeURIComponent(moment(data).format(\"DD/MM/YYYY\").toString());\n\n        var request = /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n            var resposta;\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.next = 2;\n                    return fetch(uri).then(function (resp) {\n                      return resp.json();\n                    }) // Transform the data into json\n                    .then(function (data) {\n                      showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\n                      this_.props.getQuotas();\n                      this_.closeModal();\n                    }).catch(function (error) {\n                      showToast(addQuotaError[languageCode], 5000, toastTypes.ERROR);\n                    });\n\n                  case 2:\n                    return _context2.abrupt(\"return\", resposta);\n\n                  case 3:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2);\n          }));\n\n          return function request() {\n            return _ref2.apply(this, arguments);\n          };\n        }();\n\n        request();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n        style: {\n          background: \"#34b4eb\",\n          color: \"#fff\",\n          width: \"200px\",\n          textAlign: \"center\",\n          margin: \"8px\"\n        },\n        onClick: this.showModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }\n      }), \" Adicionar registo de pagamento\"), /*#__PURE__*/React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.closeModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        closeButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }\n      }, \"Novo Registo Pagamento\")), /*#__PURE__*/React.createElement(Modal.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(ListGroup, {\n        flush: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"emissor\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 23\n        }\n      }, \"Emissor\"), /*#__PURE__*/React.createElement(Multiselect, {\n        id: \"emissorSelect\",\n        options: this.state.options // Options to display in the dropdown\n        ,\n        onSelect: this.onSelectEmissor // Function will trigger on select event\n        ,\n        displayValue: \"name\" // Property name to display in the dropdown options\n        ,\n        selectionLimit: 1,\n        showCheckbox: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"recetor\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 23\n        }\n      }, \"Recetor\"), /*#__PURE__*/React.createElement(Multiselect, {\n        id: \"recetorSelect\",\n        options: this.state.options // Options to display in the dropdown\n        ,\n        onSelect: this.onSelectRecetor // Function will trigger on select event\n        ,\n        displayValue: \"name\" // Property name to display in the dropdown options\n        ,\n        selectionLimit: 1,\n        showCheckbox: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"valor\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 23\n        }\n      }, \"Valor (euros)\"), /*#__PURE__*/React.createElement(FormInput, {\n        id: \"valor\",\n        type: \"number\",\n        onChange: this.handlechangeValor,\n        value: this.state.valor,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"anoLetivo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 23\n        }\n      }, \"Ano Letivo (Exemplo formato: 2019/20)\"), /*#__PURE__*/React.createElement(FormInput, {\n        id: \"anoLetivo\",\n        type: \"text\",\n        onChange: this.handlechangeAnoLetivo,\n        value: this.state.anoLetivo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"anoLetivo\",\n        style: {\n          margin: \"8px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 23\n        }\n      }, \"Data:\", \" \"), \"\", /*#__PURE__*/React.createElement(DatePicker, {\n        className: \"form-control\",\n        showPopperArrow: true,\n        selected: this.state.data,\n        onChange: this.handleChange,\n        dateFormat: \"dd/MM/yyyy\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 23\n        }\n      }))))))), /*#__PURE__*/React.createElement(Modal.Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        theme: \"danger\",\n        onClick: this.closeModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }\n      }, cancelButton[languageCode]), /*#__PURE__*/React.createElement(Button, {\n        theme: \"success\",\n        onClick: this.saveCota,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }\n      }, saveButton[languageCode]))));\n    }\n  }]);\n\n  return QuotasModal;\n}(React.Component);\n\nexport default QuotasModal;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/quotas-page/QuotasModal.js"],"names":["React","Fragment","useState","ReactDOM","Modal","ListGroup","ListGroupItem","Button","Col","Form","FormGroup","FormInput","FormFeedback","FormTextarea","FormCheckbox","firestore","firebase_auth","firebase","firebaseConfig","addQuotaError","sucessoGeral","assocParameters","languageCode","showToast","toastTypes","saveButton","cancelButton","toast","Bounce","saveCaseToDB","Multiselect","DatePicker","moment","QuotasModal","props","handleChange","date","setState","data","Date","month","getMonth","year","getFullYear","anoLetivoAtual","first","secondTemp","second","toString","state","options","recetor","emissor","user_ids","recetor_id","emissor_id","email","user_email","nome","user_nome","valor","anoLetivo","saveCota","bind","onSelectEmissor","onSelectRecetor","handlechangeValor","handlechangeAnoLetivo","showModal","closeModal","loadParents","componentWillMount","assocDoc","JSON","parse","window","localStorage","getItem","quota","FEE","selectedList","selectedItem","name","id","e","target","value","this_","project_id","projectId","i","uri","request","fetch","then","resp","json","console","log","x","length","parent","member","push","Email","catch","error","resposta","show","regex","message","configure","transition","closeButton","autoClose","position","type","test","encodeURIComponent","format","SUCCESS","getQuotas","ERROR","background","color","width","textAlign","margin","Component"],"mappings":"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","sourcesContent":["/* eslint jsx-a11y/anchor-is-valid: 0 */\r\n\r\nimport React, { Fragment, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport {\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Button,\r\n  Col,\r\n  Form,\r\n  FormGroup,\r\n  FormInput,\r\n  FormFeedback,\r\n  FormTextarea,\r\n  FormCheckbox,\r\n} from \"shards-react\";\r\nimport {\r\n  firestore,\r\n  firebase_auth,\r\n  firebase,\r\n  firebaseConfig,\r\n} from \"../../firebase-config\";\r\nimport { addQuotaError, sucessoGeral } from \"../../utils/messages_strings\";\r\nimport {\r\n  assocParameters,\r\n  languageCode,\r\n  showToast,\r\n  toastTypes,\r\n  saveButton,\r\n  cancelButton,\r\n} from \"../../utils/general_utils\";\r\nimport { toast, Bounce } from \"react-toastify\";\r\nimport { saveCaseToDB } from \"../../firebase_scripts/installation\";\r\nimport { Multiselect } from \"multiselect-react-dropdown\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport * as moment from \"moment\";\r\n\r\nclass QuotasModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    var data = new Date();\r\n    var month = data.getMonth() + 1;\r\n    var year = data.getFullYear();\r\n\r\n    var anoLetivoAtual = \"\";\r\n\r\n    if (month >= 7) {\r\n      var first = year;\r\n      var secondTemp = year + 1;\r\n      var second = secondTemp.toString()[2] + secondTemp.toString()[3];\r\n      anoLetivoAtual = first.toString() + \"/\" + second.toString();\r\n    } else {\r\n      var first = year - 1;\r\n      var second = year.toString()[2] + year.toString()[3];\r\n      anoLetivoAtual = first.toString() + \"/\" + second.toString();\r\n    }\r\n\r\n    this.state = {\r\n      options: [],\r\n      recetor: \"\",\r\n      emissor: \"\",\r\n      user_ids: [],\r\n      recetor_id: \"\",\r\n      emissor_id: \"\",\r\n      email: props.user_email,\r\n      nome: props.user_nome,\r\n      valor: 5, //default\r\n      anoLetivo: anoLetivoAtual,\r\n      data: new Date(),\r\n    };\r\n\r\n    this.saveCota = this.saveCota.bind(this);\r\n    this.onSelectEmissor = this.onSelectEmissor.bind(this);\r\n    this.onSelectRecetor = this.onSelectRecetor.bind(this);\r\n    this.handlechangeValor = this.handlechangeValor.bind(this);\r\n    this.handlechangeAnoLetivo = this.handlechangeAnoLetivo.bind(this);\r\n\r\n    this.showModal = this.showModal.bind(this);\r\n    this.closeModal = this.closeModal.bind(this);\r\n    this.loadParents = this.loadParents.bind(this);\r\n\r\n    this.componentWillMount = this.componentWillMount.bind(this);\r\n\r\n    this.loadParents();\r\n  }\r\n\r\n  componentWillMount() {\r\n    //Get value of cota defined in parameters\r\n    const assocDoc = JSON.parse(window.localStorage.getItem(\"assocDoc\"));\r\n    if (assocDoc != null) {\r\n      let quota = assocDoc[assocParameters.FEE[languageCode]];\r\n      if (quota != null) {\r\n        this.setState({ valor: quota });\r\n      }\r\n    }\r\n  }\r\n\r\n  onSelectEmissor(selectedList, selectedItem) {\r\n    const { user_ids } = this.state;\r\n    this.setState({\r\n      emissor: selectedItem.name,\r\n      emissor_id: user_ids[selectedItem.id],\r\n    });\r\n  }\r\n\r\n  onSelectRecetor(selectedList, selectedItem) {\r\n    const { user_ids } = this.state;\r\n    this.setState({\r\n      recetor: selectedItem.name,\r\n      recetor_id: user_ids[selectedItem.id],\r\n    });\r\n  }\r\n\r\n  handlechangeValor(e) {\r\n    this.setState({ valor: e.target.value });\r\n  }\r\n\r\n  handleChange = (date) => {\r\n    this.setState({\r\n      data: date,\r\n    });\r\n  };\r\n\r\n  handlechangeAnoLetivo(e) {\r\n    this.setState({ anoLetivo: e.target.value });\r\n  }\r\n\r\n  loadParents() {\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n    //const parentsCollection = firestore.collection(\"parents\");\r\n\r\n    var options = [];\r\n    var user_ids = [];\r\n    var i = 0;\r\n\r\n    let uri =\r\n      \"https://us-central1-\" +\r\n      project_id +\r\n      \".cloudfunctions.net/api/getParents\";\r\n\r\n    const request = async () => {\r\n      let resposta;\r\n      await fetch(uri)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          console.log(data);\r\n          for (var x = 0; x < data.length; x++) {\r\n            var parent = data[x];\r\n            if (parent[\"Nome\"] != null) {\r\n              if (\r\n                parent[\"Validated\"] != null &&\r\n                parent[\"Validated\"].toString() != \"false\"\r\n              ) {\r\n                var member = { id: i, name: parent[\"Nome\"] };\r\n                options.push(member);\r\n                user_ids.push(parent.Email);\r\n                i++;\r\n              }\r\n            }\r\n          }\r\n\r\n          this_.setState({ options: options, user_ids: user_ids });\r\n        })\r\n        .catch(function (error) {\r\n          //\r\n        });\r\n      return resposta;\r\n    };\r\n    request();\r\n\r\n  }\r\n\r\n  showModal() {\r\n    this.setState({ show: true });\r\n  }\r\n\r\n  closeModal() {\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  saveCota() {\r\n    const { recetor, emissor, valor, anoLetivo, data } = this.state;\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    var regex = /[0-9]{4}\\/[0-9]{2}/;\r\n\r\n    if (recetor == \"\") {\r\n      var message = \"Escolha um recetor!\";\r\n      toast.configure();\r\n      toast(message, {\r\n        transition: Bounce,\r\n        closeButton: true,\r\n        autoClose: 2000,\r\n        position: \"top-right\",\r\n        type: \"error\",\r\n      });\r\n    } else if (emissor == \"\") {\r\n      var message = \"Escolha um emissor!\";\r\n      toast.configure();\r\n      toast(message, {\r\n        transition: Bounce,\r\n        closeButton: true,\r\n        autoClose: 2000,\r\n        position: \"top-right\",\r\n        type: \"error\",\r\n      });\r\n    } else if (valor == -1 || valor.length == 0) {\r\n      var message = \"Escolha um valor!\";\r\n      toast.configure();\r\n      toast(message, {\r\n        transition: Bounce,\r\n        closeButton: true,\r\n        autoClose: 2000,\r\n        position: \"top-right\",\r\n        type: \"error\",\r\n      });\r\n    } else if (anoLetivo == \"\" || !regex.test(anoLetivo)) {\r\n      var message = \"Ano Letivo em formato incorreto!\";\r\n      toast.configure();\r\n      toast(message, {\r\n        transition: Bounce,\r\n        closeButton: true,\r\n        autoClose: 2000,\r\n        position: \"top-right\",\r\n        type: \"error\",\r\n      });\r\n    } else {\r\n      let uri =\r\n        \"https://us-central1-\" +\r\n        project_id +\r\n        \".cloudfunctions.net/api/addCota?\" +\r\n        \"id=\" +\r\n        encodeURIComponent(this_.state.emissor_id) +\r\n        \"&nome=\" +\r\n        encodeURIComponent(emissor) +\r\n        \"&ano=\" +\r\n        encodeURIComponent(anoLetivo) +\r\n        \"&valor=\" +\r\n        encodeURIComponent(valor) +\r\n        \"&recetor_id=\" +\r\n        encodeURIComponent(this_.state.recetor_id) +\r\n        \"&recetor_nome=\" +\r\n        encodeURIComponent(recetor) +\r\n        \"&confirmado_recetor=\" +\r\n        \"false\" +\r\n        \"&confirmado_emissor=\" +\r\n        \"false\" +\r\n        \"&notas=\" +\r\n        encodeURIComponent(\" \") +\r\n        \"&data=\" +\r\n        encodeURIComponent(moment(data).format(\"DD/MM/YYYY\").toString());\r\n      const request = async () => {\r\n        let resposta;\r\n        await fetch(uri)\r\n          .then((resp) => resp.json()) // Transform the data into json\r\n          .then(function (data) {\r\n            showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\r\n\r\n            this_.props.getQuotas();\r\n            this_.closeModal();\r\n          })\r\n          .catch(function (error) {\r\n            showToast(addQuotaError[languageCode], 5000, toastTypes.ERROR);\r\n          });\r\n        return resposta;\r\n      };\r\n      request();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <Button\r\n          style={{\r\n            background: \"#34b4eb\",\r\n            color: \"#fff\",\r\n            width: \"200px\",\r\n            textAlign: \"center\",\r\n            margin: \"8px\",\r\n          }}\r\n          onClick={this.showModal}\r\n        >\r\n          <i /> Adicionar registo de pagamento\r\n        </Button>\r\n\r\n        <Modal show={this.state.show} onHide={this.closeModal}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Novo Registo Pagamento</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <ListGroup flush>\r\n              <ListGroupItem className=\"p-3\">\r\n                <Col>\r\n                  <Form>\r\n                    <FormGroup>\r\n                      <label htmlFor=\"emissor\">Emissor</label>\r\n                      <Multiselect\r\n                        id=\"emissorSelect\"\r\n                        options={this.state.options} // Options to display in the dropdown\r\n                        onSelect={this.onSelectEmissor} // Function will trigger on select event\r\n                        displayValue=\"name\" // Property name to display in the dropdown options\r\n                        selectionLimit={1}\r\n                        showCheckbox={false}\r\n                      />\r\n                    </FormGroup>\r\n\r\n                    <FormGroup>\r\n                      <label htmlFor=\"recetor\">Recetor</label>\r\n                      <Multiselect\r\n                        id=\"recetorSelect\"\r\n                        options={this.state.options} // Options to display in the dropdown\r\n                        onSelect={this.onSelectRecetor} // Function will trigger on select event\r\n                        displayValue=\"name\" // Property name to display in the dropdown options\r\n                        selectionLimit={1}\r\n                        showCheckbox={false}\r\n                      />\r\n                    </FormGroup>\r\n\r\n                    <FormGroup>\r\n                      <label htmlFor=\"valor\">Valor (euros)</label>\r\n                      <FormInput\r\n                        id=\"valor\"\r\n                        type=\"number\"\r\n                        onChange={this.handlechangeValor}\r\n                        value={this.state.valor}\r\n                      ></FormInput>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                      <label htmlFor=\"anoLetivo\">\r\n                        Ano Letivo (Exemplo formato: 2019/20)\r\n                      </label>\r\n                      <FormInput\r\n                        id=\"anoLetivo\"\r\n                        type=\"text\"\r\n                        onChange={this.handlechangeAnoLetivo}\r\n                        value={this.state.anoLetivo}\r\n                      ></FormInput>\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                      <label htmlFor=\"anoLetivo\" style={{ margin: \"8px\" }}>\r\n                        Data:{\" \"}\r\n                      </label>\r\n                      {\"\"}\r\n                      <DatePicker\r\n                        className=\"form-control\"\r\n                        showPopperArrow={true}\r\n                        selected={this.state.data}\r\n                        onChange={this.handleChange}\r\n                        dateFormat=\"dd/MM/yyyy\"\r\n                      />\r\n                    </FormGroup>\r\n                  </Form>\r\n                </Col>\r\n              </ListGroupItem>\r\n            </ListGroup>\r\n          </Modal.Body>\r\n\r\n          <Modal.Footer>\r\n            <Button theme=\"danger\" onClick={this.closeModal}>\r\n              {cancelButton[languageCode]}\r\n            </Button>\r\n            <Button theme=\"success\" onClick={this.saveCota}>\r\n              {saveButton[languageCode]}\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default QuotasModal;\r\n"]},"metadata":{},"sourceType":"module"}