{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\quotas-page\\\\QuotasPage.js\";\nimport React, { Component, Fragment } from \"react\";\nimport { Container, Row, Col, Button, Card, CardHeader, CardBody, FormInput } from \"shards-react\";\nimport { toast, Bounce } from \"react-toastify\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { commitChangesQuotasMessage, semQuotas, sucessoGeral } from \"../../utils/messages_strings\";\nimport { languageCode, showToast, toastTypes } from \"../../utils/general_utils\";\nimport { saveChanges, error_geral, loading } from \"../../utils/common_strings\";\nimport { firestore, firebase_auth, firebase, firebaseConfig } from \"../../firebase-config\";\nimport PageTitle from \"../common/PageTitle\";\nimport Quotas_Modal from \"./QuotasModal\";\nimport { Table } from \"react-bootstrap\";\n\nvar Quotas_Page = /*#__PURE__*/function (_Component) {\n  _inherits(Quotas_Page, _Component);\n\n  var _super = _createSuper(Quotas_Page);\n\n  function Quotas_Page(props) {\n    var _this;\n\n    _classCallCheck(this, Quotas_Page);\n\n    _this = _super.call(this, props);\n    var email = _this.props.email;\n    _this.state = {\n      blocking: false,\n      errors: {},\n      items: null,\n      // Array of Json Objects\n      checkBoxPagante: [],\n      checkBoxRecetor: [],\n      notas: [],\n      email: email,\n      nome: null,\n      admin: null,\n      redirect: null,\n      dialogOpen: false,\n      userAnswer: false\n    };\n\n    var this_ = _assertThisInitialized(_this);\n\n    _this.getQuotas = _this.getQuotas.bind(_assertThisInitialized(_this));\n    _this.renderTableData = _this.renderTableData.bind(_assertThisInitialized(_this));\n    _this.handleChangeCheckBoxRecetor = _this.handleChangeCheckBoxRecetor.bind(_assertThisInitialized(_this));\n    _this.handleChangeCheckBoxPagante = _this.handleChangeCheckBoxPagante.bind(_assertThisInitialized(_this));\n    _this.handleChangeNotas = _this.handleChangeNotas.bind(_assertThisInitialized(_this));\n    _this.commit = _this.commit.bind(_assertThisInitialized(_this));\n    _this.componentDidMount = _this.componentDidMount.bind(_assertThisInitialized(_this));\n    _this.componentWillUnmount = _this.componentWillUnmount.bind(_assertThisInitialized(_this));\n    _this.getSortOrder = _this.getSortOrder.bind(_assertThisInitialized(_this));\n\n    _this.getQuotas();\n\n    return _this;\n  }\n\n  _createClass(Quotas_Page, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n\n      if (currentUser != null) {\n        if (this_.state.email != null) {\n          var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getParent?\" + \"id=\" + this_.state.email;\n\n          var request = /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              var resposta;\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return fetch(uri).then(function (resp) {\n                        return resp.json();\n                      }) // Transform the data into json\n                      .then(function (data) {\n                        if (data.Nome != undefined && data.Nome != null) {\n                          this_.setState({\n                            nome: data.Nome.toString(),\n                            admin: data.Admin\n                          });\n                        }\n                      }).catch(function (error) {//console.log(error);\n                      });\n\n                    case 2:\n                      return _context.abrupt(\"return\", resposta);\n\n                    case 3:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n\n            return function request() {\n              return _ref.apply(this, arguments);\n            };\n          }();\n\n          request();\n        }\n      } else {\n        //Redirect to login\n        var redirect = /*#__PURE__*/React.createElement(Redirect, {\n          to: {\n            pathname: \"/\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 9\n          }\n        });\n        this.setState({\n          redirect: redirect\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$state = this.state,\n          items = _this$state.items,\n          checkBoxPagante = _this$state.checkBoxPagante,\n          checkBoxRecetor = _this$state.checkBoxRecetor,\n          notas = _this$state.notas;\n      var this_ = this;\n      var arrayToChange = [];\n\n      for (var i = 0; i < items.length; i++) {\n        var json = items[i];\n        var emissor = checkBoxPagante[i];\n        var recetor = checkBoxRecetor[i];\n        var nota = notas[i];\n\n        if (json[\"Confirmado_Pagante\"] != emissor || json[\"Confirmado_Recetor\"] != recetor || json[\"Notas\"] != nota) {\n          var jsonValues = {};\n          jsonValues.id = json.id;\n          jsonValues.emissor = emissor;\n          jsonValues.recetor = recetor;\n          jsonValues.nota = nota;\n          arrayToChange.push(jsonValues);\n        }\n      }\n\n      if (arrayToChange.length !== 0) {\n        if (window.confirm(commitChangesQuotasMessage[languageCode])) {\n          // Save it!\n          this_.commit();\n        } else {// Do nothing!\n        }\n      }\n    }\n  }, {\n    key: \"commit\",\n    value: function () {\n      var _commit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _this$state2, items, checkBoxPagante, checkBoxRecetor, notas, project_id, this_, arrayToChange, i, json, emissor, recetor, nota, jsonValues, message, _loop, x, jsonToChange;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this$state2 = this.state, items = _this$state2.items, checkBoxPagante = _this$state2.checkBoxPagante, checkBoxRecetor = _this$state2.checkBoxRecetor, notas = _this$state2.notas;\n                project_id = firebaseConfig.projectId;\n                this_ = this;\n                arrayToChange = [];\n\n                for (i = 0; i < items.length; i++) {\n                  json = items[i];\n                  emissor = checkBoxPagante[i];\n                  recetor = checkBoxRecetor[i];\n                  nota = notas[i];\n\n                  if (json[\"Confirmado_Pagante\"] != emissor || json[\"Confirmado_Recetor\"] != recetor || json[\"Notas\"] != nota) {\n                    jsonValues = {};\n                    jsonValues.id = json.id;\n                    jsonValues.confirmado_emissor = emissor;\n                    jsonValues.emissor_id = json.Pagante.Id;\n                    jsonValues.confirmado_recetor = recetor;\n                    jsonValues.recetor_nome = json.Recetor.Nome;\n                    jsonValues.recetor_id = json.Recetor.Id;\n                    jsonValues.nota = nota;\n                    arrayToChange.push(jsonValues);\n                  }\n                }\n\n                if (arrayToChange.length == 0) {\n                  message = \"Não há alterações a salvar!\";\n                  toast.configure();\n                  toast(message, {\n                    transition: Bounce,\n                    closeButton: true,\n                    autoClose: 10000,\n                    position: \"top-right\",\n                    type: \"warning\"\n                  });\n                }\n\n                _loop = /*#__PURE__*/_regeneratorRuntime.mark(function _loop() {\n                  var uri, request;\n                  return _regeneratorRuntime.wrap(function _loop$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          jsonToChange = arrayToChange[x];\n                          uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/updateCota?\" + \"id=\" + jsonToChange.id + \"&recetor_id=\" + encodeURIComponent(jsonToChange.recetor_id) + \"&recetor_nome=\" + encodeURIComponent(jsonToChange.recetor_nome) + \"&confirmado_recetor=\" + encodeURIComponent(jsonToChange.confirmado_recetor) + \"&confirmado_emissor=\" + encodeURIComponent(jsonToChange.confirmado_emissor) + \"&notas=\" + encodeURIComponent(jsonToChange.nota);\n\n                          request = function request() {\n                            return fetch(uri).then(function (resp) {\n                              return resp.json();\n                            }) // Transform the data into json\n                            .then(function (data) {\n                              console.log(\"data v\");\n                              console.log(data);\n                              showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\n                            }).catch(function (error) {\n                              showToast(error_geral[languageCode], 5000, toastTypes.ERROR);\n                            });\n                          };\n\n                          console.log(\"passo 1\");\n                          _context2.next = 6;\n                          return request();\n\n                        case 6:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _loop);\n                });\n                x = 0;\n\n              case 8:\n                if (!(x < arrayToChange.length)) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                return _context3.delegateYield(_loop(), \"t0\", 10);\n\n              case 10:\n                x++;\n                _context3.next = 8;\n                break;\n\n              case 13:\n                console.log(\"passo 2\");\n                this_.getQuotas();\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function commit() {\n        return _commit.apply(this, arguments);\n      }\n\n      return commit;\n    }() //Comparer Function\n\n  }, {\n    key: \"getSortOrder\",\n    value: function getSortOrder(prop) {\n      return function (a, b) {\n        if (a[prop] > b[prop]) {\n          return -1;\n        } else if (a[prop] < b[prop]) {\n          return 1;\n        }\n\n        return 0;\n      };\n    }\n  }, {\n    key: \"getQuotas\",\n    value: function getQuotas() {\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getCotas\";\n\n      var request = /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n          var resposta;\n          return _regeneratorRuntime.wrap(function _callee3$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.next = 2;\n                  return fetch(uri).then(function (resp) {\n                    return resp.json();\n                  }) // Transform the data into json\n                  .then(function (data) {\n                    if (data === \"\" || data == null) {//Nothing to do\n                    } else {\n                      var arrayOfDocs = data; // []\n\n                      arrayOfDocs.sort(this_.getSortOrder(\"Ano Letivo\"));\n                      var arrayOfPaganteValues = [];\n                      var arrayOfRecetorValues = [];\n                      var arrayNotas = [];\n\n                      for (var i in arrayOfDocs) {\n                        var json = arrayOfDocs[i];\n                        arrayOfPaganteValues.push(json[\"Confirmado_Pagante\"]);\n                        arrayOfRecetorValues.push(json[\"Confirmado_Recetor\"]);\n                        var nota = \"\";\n\n                        if (json[\"Notas\"] != undefined && json[\"Notas\"] != null) {\n                          nota = json[\"Notas\"];\n                        }\n\n                        arrayNotas.push(nota);\n                      } // Save data to state\n\n\n                      this_.setState({\n                        items: arrayOfDocs,\n                        checkBoxPagante: arrayOfPaganteValues,\n                        checkBoxRecetor: arrayOfRecetorValues,\n                        notas: arrayNotas\n                      });\n                    }\n                  }).catch(function (error) {//console.log(error);\n                  });\n\n                case 2:\n                  return _context4.abrupt(\"return\", resposta);\n\n                case 3:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee3);\n        }));\n\n        return function request() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n\n      request();\n    }\n  }, {\n    key: \"renderTableData\",\n    value: function renderTableData() {\n      var _this2 = this;\n\n      var _this$state3 = this.state,\n          checkBoxPagante = _this$state3.checkBoxPagante,\n          checkBoxRecetor = _this$state3.checkBoxRecetor;\n      var id = 0;\n      return this.state.items.map(function (item, index) {\n        var Data = item.Data,\n            Pagante = item.Pagante,\n            Recetor = item.Recetor,\n            Valor = item.Valor,\n            Notas = item.Notas; //destructuring\n\n        var Ano = item[\"Ano_Letivo\"];\n        var confirmadoRecetor = item[\"Confirmado_Recetor\"];\n        var confirmadoPagante = item[\"Confirmado_Pagante\"];\n        var x = id;\n        id++;\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: id,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 11\n          }\n        }, Data), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 11\n          }\n        }, Recetor.Nome), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 11\n          }\n        }, Pagante.Nome), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 11\n          }\n        }, Valor), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 11\n          }\n        }, Ano), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"checkbox\",\n          checked: _this2.state.checkBoxRecetor[x],\n          disabled: _this2.state.email != Recetor.Id ? true : false //this.state.checkBoxRecetor[x]\n          ,\n          onChange: _this2.handleChangeCheckBoxRecetor.bind(_this2, x),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }\n        })), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"checkbox\",\n          checked: _this2.state.checkBoxPagante[x],\n          disabled: _this2.state.email != Pagante.Id ? true : false //this.state.checkBoxPagante[x]\n          ,\n          onChange: _this2.handleChangeCheckBoxPagante.bind(_this2, x),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }\n        })), /*#__PURE__*/React.createElement(\"td\", {\n          style: {\n            width: \"150px\"\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"textarea\", {\n          class: \"form-control\",\n          rows: \"3\",\n          cols: \"3\",\n          style: {\n            resize: \"none\"\n          },\n          id: \"comment\",\n          name: \"notas-\" + x,\n          onChange: _this2.handleChangeNotas,\n          value: _this2.state.notas[x],\n          disabled: _this2.state.email == Pagante.Id ? false : true,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }\n        })));\n      });\n    }\n  }, {\n    key: \"handleChangeCheckBoxRecetor\",\n    value: function handleChangeCheckBoxRecetor(i) {\n      if (this.state.checkBoxRecetor[i] == false) {\n        //User confirmed action\n        var array = this.state.checkBoxRecetor;\n        array[i] = true;\n        this.setState({\n          checkBoxRecetor: array\n        });\n      } else {\n        var array = this.state.checkBoxRecetor;\n        array[i] = false;\n        this.setState({\n          checkBoxRecetor: array\n        });\n      }\n    }\n  }, {\n    key: \"handleChangeCheckBoxPagante\",\n    value: function handleChangeCheckBoxPagante(i) {\n      if (this.state.checkBoxPagante[i] == false) {\n        //User confirmed action\n        var array = this.state.checkBoxPagante;\n        array[i] = true;\n        this.setState({\n          checkBoxPagante: array\n        });\n      } else {\n        var array = this.state.checkBoxPagante;\n        array[i] = false;\n        this.setState({\n          checkBoxPagante: array\n        });\n      }\n    }\n  }, {\n    key: \"handleChangeNotas\",\n    value: function handleChangeNotas(e) {\n      var name = e.target.name;\n      var value = e.target.value;\n      var index = name.split(\"-\")[1];\n      var arrayNotas = this.state.notas;\n      arrayNotas[index] = value;\n      this.setState({\n        notas: arrayNotas\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        className: \"main-content-container px-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        small: true,\n        className: \"mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 17\n        }\n      }, \"Valida\\xE7\\xE3o de Pagamentos\")), this.state.items == null ? /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 40\n        }\n      }, loading[languageCode]) : /*#__PURE__*/React.createElement(CardBody, {\n        className: \"p-0 pb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Table, {\n        className: \"table mb-0\",\n        responsive: true,\n        striped: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 19\n        }\n      }, this.state.items.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          margin: \"20px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 52\n        }\n      }, semQuotas[languageCode]) : /*#__PURE__*/React.createElement(\"thead\", {\n        className: \"bg-light\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 23\n        }\n      }, \"Data\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 23\n        }\n      }, \"Recetor\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 23\n        }\n      }, \"Emissor\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 23\n        }\n      }, \"Valor\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 23\n        }\n      }, \"Ano letivo\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 23\n        }\n      }, \"Confirmado pelo recetor\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 23\n        }\n      }, \"Confirmado pelo Emissor\"), /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        style: {\n          resize: \"none\",\n          width: \"100px\"\n        },\n        className: \"border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 23\n        }\n      }, \"Notas/Descri\\xE7\\xE3o do Emissor\", /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 49\n        }\n      }, \" \")))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 21\n        }\n      }, this.renderTableData())))))), /*#__PURE__*/React.createElement(Col, {\n        md: 12,\n        style: {\n          textAlign: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 9\n        }\n      }, this.state.admin ? /*#__PURE__*/React.createElement(Quotas_Modal, {\n        getQuotas: this.getQuotas,\n        user_email: this.state.email,\n        user_nome: this.state.nome,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }\n      }) : null, /*#__PURE__*/React.createElement(Button, {\n        theme: \"success\",\n        style: {\n          //background: \"#34b4eb\",\n          color: \"#fff\",\n          width: \"200px\",\n          textAlign: \"center\",\n          margin: \"8px\"\n        },\n        onClick: this.commit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 13\n        }\n      }), \" \", saveChanges[languageCode])), this.state.redirect);\n    }\n  }]);\n\n  return Quotas_Page;\n}(Component);\n\nexport default Quotas_Page;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/quotas-page/QuotasPage.js"],"names":["React","Component","Fragment","Container","Row","Col","Button","Card","CardHeader","CardBody","FormInput","toast","Bounce","Link","Redirect","commitChangesQuotasMessage","semQuotas","sucessoGeral","languageCode","showToast","toastTypes","saveChanges","error_geral","loading","firestore","firebase_auth","firebase","firebaseConfig","PageTitle","Quotas_Modal","Table","Quotas_Page","props","email","state","blocking","errors","items","checkBoxPagante","checkBoxRecetor","notas","nome","admin","redirect","dialogOpen","userAnswer","this_","getQuotas","bind","renderTableData","handleChangeCheckBoxRecetor","handleChangeCheckBoxPagante","handleChangeNotas","commit","componentDidMount","componentWillUnmount","getSortOrder","project_id","projectId","currentUser","JSON","parse","window","localStorage","getItem","uri","request","fetch","then","resp","json","data","Nome","undefined","setState","toString","Admin","catch","error","resposta","pathname","arrayToChange","i","length","emissor","recetor","nota","jsonValues","id","push","confirm","confirmado_emissor","emissor_id","Pagante","Id","confirmado_recetor","recetor_nome","Recetor","recetor_id","message","configure","transition","closeButton","autoClose","position","type","jsonToChange","x","encodeURIComponent","console","log","SUCCESS","ERROR","prop","a","b","arrayOfDocs","sort","arrayOfPaganteValues","arrayOfRecetorValues","arrayNotas","map","item","index","Data","Valor","Notas","Ano","confirmadoRecetor","confirmadoPagante","width","resize","array","e","name","target","value","split","margin","textAlign","color"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\r\nimport {\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Card,\r\n  CardHeader,\r\n  CardBody,\r\n  FormInput,\r\n} from \"shards-react\";\r\nimport { toast, Bounce } from \"react-toastify\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport {\r\n  commitChangesQuotasMessage, semQuotas,\r\n  sucessoGeral,\r\n} from \"../../utils/messages_strings\";\r\nimport { languageCode, showToast, toastTypes } from \"../../utils/general_utils\";\r\nimport {saveChanges, error_geral, loading} from \"../../utils/common_strings\";\r\n\r\nimport {\r\n  firestore,\r\n  firebase_auth,\r\n  firebase,\r\n  firebaseConfig,\r\n} from \"../../firebase-config\";\r\nimport PageTitle from \"../common/PageTitle\";\r\nimport Quotas_Modal from \"./QuotasModal\";\r\nimport {Table} from \"react-bootstrap\";\r\n\r\nclass Quotas_Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    var email = this.props.email;\r\n\r\n    this.state = {\r\n      blocking: false,\r\n      errors: {},\r\n      items: null, // Array of Json Objects\r\n      checkBoxPagante: [],\r\n      checkBoxRecetor: [],\r\n      notas: [],\r\n      email: email,\r\n      nome: null,\r\n      admin: null,\r\n      redirect: null,\r\n      dialogOpen: false,\r\n      userAnswer: false,\r\n    };\r\n\r\n    const this_ = this;\r\n\r\n    this.getQuotas = this.getQuotas.bind(this);\r\n    this.renderTableData = this.renderTableData.bind(this);\r\n    this.handleChangeCheckBoxRecetor = this.handleChangeCheckBoxRecetor.bind(\r\n      this\r\n    );\r\n    this.handleChangeCheckBoxPagante = this.handleChangeCheckBoxPagante.bind(\r\n      this\r\n    );\r\n    this.handleChangeNotas = this.handleChangeNotas.bind(this);\r\n    this.commit = this.commit.bind(this);\r\n    this.componentDidMount = this.componentDidMount.bind(this);\r\n    this.componentWillUnmount = this.componentWillUnmount.bind(this);\r\n    this.getSortOrder = this.getSortOrder.bind(this);\r\n    this.getQuotas();\r\n  }\r\n\r\n  componentDidMount() {\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n    var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\r\n    if (currentUser != null) {\r\n      if (this_.state.email != null) {\r\n        let uri =\r\n          \"https://us-central1-\" +\r\n          project_id +\r\n          \".cloudfunctions.net/api/getParent?\" +\r\n          \"id=\" +\r\n          this_.state.email;\r\n        const request = async () => {\r\n          let resposta;\r\n          await fetch(uri)\r\n            .then((resp) => resp.json()) // Transform the data into json\r\n            .then(function (data) {\r\n              if (data.Nome != undefined && data.Nome != null) {\r\n                this_.setState({\r\n                  nome: data.Nome.toString(),\r\n                  admin: data.Admin,\r\n                });\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              //console.log(error);\r\n            });\r\n          return resposta;\r\n        };\r\n        request();\r\n      }\r\n    } else {\r\n      //Redirect to login\r\n      var redirect = (\r\n        <Redirect\r\n          to={{\r\n            pathname: \"/\",\r\n          }}\r\n        />\r\n      );\r\n      this.setState({ redirect: redirect });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { items, checkBoxPagante, checkBoxRecetor, notas } = this.state;\r\n    const this_ = this;\r\n\r\n    var arrayToChange = [];\r\n    for (var i = 0; i < items.length; i++) {\r\n      var json = items[i];\r\n      var emissor = checkBoxPagante[i];\r\n      var recetor = checkBoxRecetor[i];\r\n      var nota = notas[i];\r\n\r\n      if (\r\n        json[\"Confirmado_Pagante\"] != emissor ||\r\n        json[\"Confirmado_Recetor\"] != recetor ||\r\n        json[\"Notas\"] != nota\r\n      ) {\r\n        var jsonValues = {};\r\n        jsonValues.id = json.id;\r\n        jsonValues.emissor = emissor;\r\n        jsonValues.recetor = recetor;\r\n        jsonValues.nota = nota;\r\n        arrayToChange.push(jsonValues);\r\n      }\r\n    }\r\n\r\n    if (arrayToChange.length !== 0) {\r\n      if (window.confirm(commitChangesQuotasMessage[languageCode])) {\r\n        // Save it!\r\n        this_.commit();\r\n      } else {\r\n        // Do nothing!\r\n      }\r\n    }\r\n  }\r\n\r\n  async commit() {\r\n    const { items, checkBoxPagante, checkBoxRecetor, notas } = this.state;\r\n    const project_id = firebaseConfig.projectId;\r\n    const this_ = this;\r\n\r\n    var arrayToChange = [];\r\n    for (var i = 0; i < items.length; i++) {\r\n      var json = items[i];\r\n\r\n      var emissor = checkBoxPagante[i];\r\n      var recetor = checkBoxRecetor[i];\r\n      var nota = notas[i];\r\n\r\n      if (\r\n        json[\"Confirmado_Pagante\"] != emissor ||\r\n        json[\"Confirmado_Recetor\"] != recetor ||\r\n        json[\"Notas\"] != nota\r\n      ) {\r\n        var jsonValues = {};\r\n\r\n        jsonValues.id = json.id;\r\n        jsonValues.confirmado_emissor = emissor;\r\n        jsonValues.emissor_id = json.Pagante.Id;\r\n        jsonValues.confirmado_recetor = recetor;\r\n        jsonValues.recetor_nome = json.Recetor.Nome;\r\n        jsonValues.recetor_id = json.Recetor.Id;\r\n        jsonValues.nota = nota;\r\n        arrayToChange.push(jsonValues);\r\n      }\r\n    }\r\n\r\n    if (arrayToChange.length == 0) {\r\n      var message = \"Não há alterações a salvar!\";\r\n      toast.configure();\r\n      toast(message, {\r\n        transition: Bounce,\r\n        closeButton: true,\r\n        autoClose: 10000,\r\n        position: \"top-right\",\r\n        type: \"warning\",\r\n      });\r\n    }\r\n\r\n    for (var x = 0; x < arrayToChange.length; x++) {\r\n      var jsonToChange = arrayToChange[x];\r\n\r\n      let uri =\r\n        \"https://us-central1-\" +\r\n        project_id +\r\n        \".cloudfunctions.net/api/updateCota?\" +\r\n        \"id=\" +\r\n        jsonToChange.id +\r\n        \"&recetor_id=\" +\r\n        encodeURIComponent(jsonToChange.recetor_id) +\r\n        \"&recetor_nome=\" +\r\n        encodeURIComponent(jsonToChange.recetor_nome) +\r\n        \"&confirmado_recetor=\" +\r\n        encodeURIComponent(jsonToChange.confirmado_recetor) +\r\n        \"&confirmado_emissor=\" +\r\n        encodeURIComponent(jsonToChange.confirmado_emissor) +\r\n        \"&notas=\" +\r\n        encodeURIComponent(jsonToChange.nota);\r\n\r\n      const request = () => {\r\n        return fetch(uri)\r\n          .then((resp) => resp.json()) // Transform the data into json\r\n          .then(function (data) {\r\n            console.log(\"data v\");\r\n            console.log(data);\r\n            showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\r\n          })\r\n          .catch(function (error) {\r\n            showToast(error_geral[languageCode], 5000, toastTypes.ERROR);\r\n          });\r\n      };\r\n\r\n      console.log(\"passo 1\");\r\n      await request();\r\n    }\r\n\r\n    console.log(\"passo 2\");\r\n    this_.getQuotas();\r\n  }\r\n\r\n  //Comparer Function\r\n  getSortOrder(prop) {\r\n    return function (a, b) {\r\n      if (a[prop] > b[prop]) {\r\n        return -1;\r\n      } else if (a[prop] < b[prop]) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    };\r\n  }\r\n\r\n  getQuotas() {\r\n    var this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    let uri =\r\n      \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getCotas\";\r\n    const request = async () => {\r\n      let resposta;\r\n      await fetch(uri)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          if (data === \"\" || data == null) {\r\n            //Nothing to do\r\n          } else {\r\n            var arrayOfDocs = data; // []\r\n            arrayOfDocs.sort(this_.getSortOrder(\"Ano Letivo\"));\r\n\r\n            var arrayOfPaganteValues = [];\r\n            var arrayOfRecetorValues = [];\r\n            var arrayNotas = [];\r\n            for (let i in arrayOfDocs) {\r\n              let json = arrayOfDocs[i];\r\n              arrayOfPaganteValues.push(json[\"Confirmado_Pagante\"]);\r\n              arrayOfRecetorValues.push(json[\"Confirmado_Recetor\"]);\r\n              var nota = \"\";\r\n              if (json[\"Notas\"] != undefined && json[\"Notas\"] != null) {\r\n                nota = json[\"Notas\"];\r\n              }\r\n              arrayNotas.push(nota);\r\n            }\r\n\r\n            // Save data to state\r\n            this_.setState({\r\n              items: arrayOfDocs,\r\n              checkBoxPagante: arrayOfPaganteValues,\r\n              checkBoxRecetor: arrayOfRecetorValues,\r\n              notas: arrayNotas,\r\n            });\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          //console.log(error);\r\n        });\r\n      return resposta;\r\n    };\r\n    request();\r\n  }\r\n\r\n  renderTableData() {\r\n    var { checkBoxPagante, checkBoxRecetor } = this.state;\r\n    var id = 0;\r\n    return this.state.items.map((item, index) => {\r\n      const { Data, Pagante, Recetor, Valor, Notas } = item; //destructuring\r\n      var Ano = item[\"Ano_Letivo\"];\r\n      var confirmadoRecetor = item[\"Confirmado_Recetor\"];\r\n      var confirmadoPagante = item[\"Confirmado_Pagante\"];\r\n\r\n      const x = id;\r\n      id++;\r\n      return (\r\n        <tr key={id}>\r\n          <td>{Data}</td>\r\n          <td>{Recetor.Nome}</td>\r\n          <td>{Pagante.Nome}</td>\r\n          <td>{Valor}</td>\r\n          <td>{Ano}</td>\r\n          <td>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={this.state.checkBoxRecetor[x]}\r\n              disabled={\r\n                this.state.email != Recetor.Id ? true : false //this.state.checkBoxRecetor[x]\r\n              }\r\n              onChange={this.handleChangeCheckBoxRecetor.bind(this, x)}\r\n            />\r\n          </td>\r\n          <td>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={this.state.checkBoxPagante[x]}\r\n              disabled={\r\n                this.state.email != Pagante.Id ? true : false //this.state.checkBoxPagante[x]\r\n              }\r\n              onChange={this.handleChangeCheckBoxPagante.bind(this, x)}\r\n            />\r\n          </td>\r\n          <td style={{ width: \"150px\" }}>\r\n            <textarea\r\n              class=\"form-control\"\r\n              rows=\"3\"\r\n              cols=\"3\"\r\n              style={{ resize: \"none\" }}\r\n              id=\"comment\"\r\n              name={\"notas-\" + x}\r\n              onChange={this.handleChangeNotas}\r\n              value={this.state.notas[x]}\r\n              disabled={this.state.email == Pagante.Id ? false : true}\r\n            ></textarea>\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  }\r\n\r\n  handleChangeCheckBoxRecetor(i) {\r\n    if (this.state.checkBoxRecetor[i] == false) {\r\n      //User confirmed action\r\n      var array = this.state.checkBoxRecetor;\r\n      array[i] = true;\r\n\r\n      this.setState({ checkBoxRecetor: array });\r\n    } else {\r\n      var array = this.state.checkBoxRecetor;\r\n      array[i] = false;\r\n\r\n      this.setState({ checkBoxRecetor: array });\r\n    }\r\n  }\r\n\r\n  handleChangeCheckBoxPagante(i) {\r\n    if (this.state.checkBoxPagante[i] == false) {\r\n      //User confirmed action\r\n      var array = this.state.checkBoxPagante;\r\n      array[i] = true;\r\n\r\n      this.setState({ checkBoxPagante: array });\r\n    } else {\r\n      var array = this.state.checkBoxPagante;\r\n      array[i] = false;\r\n\r\n      this.setState({ checkBoxPagante: array });\r\n    }\r\n  }\r\n\r\n  handleChangeNotas(e) {\r\n    var name = e.target.name;\r\n    var value = e.target.value;\r\n\r\n    var index = name.split(\"-\")[1];\r\n    var arrayNotas = this.state.notas;\r\n    arrayNotas[index] = value;\r\n    this.setState({ notas: arrayNotas });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Container fluid className=\"main-content-container px-4\">\r\n        {/* Default Light Table */}\r\n        <Row>\r\n          <Col>\r\n            <Card small className=\"mb-4\">\r\n              <CardHeader className=\"border-bottom\">\r\n                <h6 className=\"m-0\">Validação de Pagamentos</h6>\r\n              </CardHeader>\r\n              {this.state.items==null? <CardBody>{loading[languageCode]}</CardBody> :\r\n                <CardBody className=\"p-0 pb-3\">\r\n                  <Table\r\n                    className=\"table mb-0\"\r\n                    responsive\r\n                    striped\r\n                  >\r\n                    {this.state.items.length===0 ? <div style={{margin: \"20px\"}}>{semQuotas[languageCode]}</div> :\r\n                      <thead className=\"bg-light\">\r\n                      <tr>\r\n                      <th scope=\"col\" className=\"border-0\">\r\n                      Data\r\n                      </th>\r\n                      <th scope=\"col\" className=\"border-0\">\r\n                      Recetor\r\n                      </th>\r\n                      <th scope=\"col\" className=\"border-0\">\r\n                      Emissor\r\n                      </th>\r\n                      <th scope=\"col\" className=\"border-0\">\r\n                      Valor\r\n                      </th>\r\n                      <th scope=\"col\" className=\"border-0\">\r\n                      Ano letivo\r\n                      </th>\r\n                      <th scope=\"col\" className=\"border-0\">\r\n                      Confirmado pelo recetor\r\n                      </th>\r\n                      <th scope=\"col\" className=\"border-0\">\r\n                      Confirmado pelo Emissor\r\n                      </th>\r\n                      <th\r\n                      scope=\"col\"\r\n                      style={{ resize: \"none\", width: \"100px\" }}\r\n                      className=\"border-0\"\r\n                      >\r\n                      Notas/Descrição do Emissor<div> </div>\r\n                      </th>\r\n                      </tr>\r\n                      </thead>}\r\n                    <tbody>{this.renderTableData()}</tbody>\r\n                  </Table>\r\n                </CardBody>}\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n        <Col md={12} style={{ textAlign: \"center\" }}>\r\n          {this.state.admin ? (\r\n            <Quotas_Modal\r\n              getQuotas={this.getQuotas}\r\n              user_email={this.state.email}\r\n              user_nome={this.state.nome}\r\n            />\r\n          ) : null}\r\n\r\n          <Button\r\n            theme=\"success\"\r\n            style={{\r\n              //background: \"#34b4eb\",\r\n              color: \"#fff\",\r\n              width: \"200px\",\r\n              textAlign: \"center\",\r\n              margin: \"8px\",\r\n            }}\r\n            onClick={this.commit}\r\n          >\r\n            <i /> {saveChanges[languageCode]}\r\n          </Button>\r\n        </Col>\r\n        {this.state.redirect}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\nexport default Quotas_Page;\r\n"]},"metadata":{},"sourceType":"module"}