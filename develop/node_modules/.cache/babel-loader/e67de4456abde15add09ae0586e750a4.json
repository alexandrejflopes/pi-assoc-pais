{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\profile\\\\ExportProfile.js\";\nimport React from \"react\";\nimport { Button, Card, CardHeader, Col, Form, ListGroup, ListGroupItem, Row } from \"shards-react\";\nimport { languageCode, parentsParameters, showToast, toastTypes } from \"../../utils/general_utils\";\nimport { exportMyData, exportWord } from \"../../utils/page_titles_strings\";\nimport { FormText } from \"react-bootstrap\";\nimport { exportUserDataOnProcess, exportProfileExplanation, exportUserDataSuccess, exportUserDataError } from \"../../utils/messages_strings\";\nimport { exportParentToCSV, exportParentToPDF } from \"../../firebase_scripts/profile_functions\";\n\nvar ExportProfile = /*#__PURE__*/function (_React$Component) {\n  _inherits(ExportProfile, _React$Component);\n\n  var _super = _createSuper(ExportProfile);\n\n  function ExportProfile(props) {\n    var _this;\n\n    _classCallCheck(this, ExportProfile);\n\n    _this = _super.call(this, props);\n    var parent = null;\n    var infoFormTitle = exportMyData[languageCode];\n\n    if (_this.props.user != null) {\n      parent = _this.props.user;\n    }\n\n    _this.state = {\n      title: infoFormTitle,\n      parent: parent,\n      dialogOpen: false\n    };\n    _this.exportParentData = _this.exportParentData.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /*********************************** LIFECYCLE ***********************************/\n\n\n  _createClass(ExportProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n    /*********************************** HANDLERS ***********************************/\n\n  }, {\n    key: \"exportParentData\",\n    value: function exportParentData() {\n      var email = this.state.parent[parentsParameters.EMAIL[languageCode]];\n      var parentName = this.state.parent[parentsParameters.NAME[languageCode]];\n      console.log(\"email to export: \" + email);\n      showToast(exportUserDataOnProcess[languageCode], 3000, toastTypes.INFO);\n      exportParentToCSV(email).then(function (file) {\n        if (file == null) {\n          showToast(exportUserDataError[languageCode], 8000, toastTypes.ERROR);\n          return;\n        }\n\n        var url = window.URL.createObjectURL(new Blob([file])); // creat anchor tag with download attr\n\n        var link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', \"User\" + parentName + \".csv\");\n        link.setAttribute('display', \"none\");\n        document.body.appendChild(link); // 4. Force download\n\n        link.click();\n        showToast(exportUserDataSuccess[languageCode], 5000, toastTypes.SUCCESS);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Card, {\n        small: true,\n        className: \"mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }\n      }, this.state.title)), /*#__PURE__*/React.createElement(ListGroup, {\n        flush: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        form: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"12\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 23\n        }\n      }, exportProfileExplanation[languageCode]))), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        theme: \"accent\",\n        onClick: this.exportParentData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"material-icons md-24\",\n        style: {\n          fontSize: \"150%\",\n          textAlign: \"center\",\n          verticalAlign: \"middle\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 74\n        }\n      }, \"get_app\"), \" \", exportWord[languageCode])))))));\n    }\n  }]);\n\n  return ExportProfile;\n}(React.Component);\n\nexport default ExportProfile;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/profile/ExportProfile.js"],"names":["React","Button","Card","CardHeader","Col","Form","ListGroup","ListGroupItem","Row","languageCode","parentsParameters","showToast","toastTypes","exportMyData","exportWord","FormText","exportUserDataOnProcess","exportProfileExplanation","exportUserDataSuccess","exportUserDataError","exportParentToCSV","exportParentToPDF","ExportProfile","props","parent","infoFormTitle","user","state","title","dialogOpen","exportParentData","bind","_isMounted","email","EMAIL","parentName","NAME","console","log","INFO","then","file","ERROR","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","SUCCESS","fontSize","textAlign","verticalAlign","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardHeader,\r\n  Col,\r\n  Form,\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Row\r\n} from \"shards-react\";\r\nimport {\r\n  languageCode, parentsParameters, showToast, toastTypes\r\n} from \"../../utils/general_utils\";\r\nimport {\r\n  exportMyData, exportWord,\r\n} from \"../../utils/page_titles_strings\";\r\nimport {FormText} from \"react-bootstrap\";\r\nimport {\r\n  exportUserDataOnProcess,\r\n  exportProfileExplanation, exportUserDataSuccess, exportUserDataError\r\n} from \"../../utils/messages_strings\";\r\nimport {\r\n  exportParentToCSV,\r\n  exportParentToPDF\r\n} from \"../../firebase_scripts/profile_functions\";\r\n\r\n\r\n\r\nclass ExportProfile extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    let parent = null;\r\n    const infoFormTitle = exportMyData[languageCode];\r\n\r\n    if(this.props.user!=null){\r\n      parent = this.props.user;\r\n    }\r\n\r\n    this.state = {\r\n      title: infoFormTitle,\r\n      parent : parent,\r\n      dialogOpen : false,\r\n    };\r\n\r\n    this.exportParentData = this.exportParentData.bind(this);\r\n\r\n  }\r\n\r\n  /*********************************** LIFECYCLE ***********************************/\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  /*********************************** HANDLERS ***********************************/\r\n\r\n\r\n  exportParentData(){\r\n    const email = this.state.parent[parentsParameters.EMAIL[languageCode]];\r\n    const parentName = this.state.parent[parentsParameters.NAME[languageCode]];\r\n    console.log(\"email to export: \" + email);\r\n\r\n    showToast(exportUserDataOnProcess[languageCode], 3000, toastTypes.INFO);\r\n\r\n    exportParentToCSV(email)\r\n      .then((file) => {\r\n        if(file==null){\r\n          showToast(exportUserDataError[languageCode], 8000, toastTypes.ERROR);\r\n          return;\r\n        }\r\n        const url = window.URL.createObjectURL(new Blob([file]));\r\n        // creat anchor tag with download attr\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.setAttribute('download', \"User\" + parentName + \".csv\");\r\n        link.setAttribute('display', \"none\");\r\n        document.body.appendChild(link);\r\n        // 4. Force download\r\n        link.click();\r\n        showToast(exportUserDataSuccess[languageCode], 5000, toastTypes.SUCCESS);\r\n      });\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Card small className=\"mb-4\">\r\n        <CardHeader className=\"border-bottom\">\r\n          <h6 className=\"m-0\">{this.state.title}</h6>\r\n        </CardHeader>\r\n        <ListGroup flush>\r\n          <ListGroupItem className=\"p-3\">\r\n            <Row>\r\n              <Col>\r\n                <Form>\r\n                  <Row form>\r\n                    <Col md=\"12\" className=\"form-group\">\r\n                      <p>\r\n                        {exportProfileExplanation[languageCode]}\r\n                      </p>\r\n                    </Col>\r\n                  </Row>\r\n                  <hr />\r\n                  <Button theme=\"accent\" onClick={this.exportParentData}><span className=\"material-icons md-24\" style={{fontSize:\"150%\", textAlign: \"center\", verticalAlign:\"middle\"}}>get_app</span> {exportWord[languageCode]}</Button>\r\n                </Form>\r\n              </Col>\r\n            </Row>\r\n          </ListGroupItem>\r\n        </ListGroup>\r\n\r\n      </Card>\r\n\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default ExportProfile;\r\n"]},"metadata":{},"sourceType":"module"}