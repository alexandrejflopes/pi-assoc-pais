{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\profile\\\\ExportAssocData.js\";\nimport React from \"react\";\nimport { Button, Card, CardHeader, Col, Form, ListGroup, ListGroupItem, Row } from \"shards-react\";\nimport { assocDataZipName, languageCode, membersChildrenDesignation, membersDesignation, parentsParameters, showToast, toastTypes } from \"../../utils/general_utils\";\nimport { exportAssocData, exportCasos, exportMyData, exportParentsAndChildren, exportWord } from \"../../utils/page_titles_strings\";\nimport { FormText } from \"react-bootstrap\";\nimport { exportAssocCasosExplanation, exportAssocDataExplanation, exportAssocDataOnProcess, exportAssocDataSuccess, exportCasosError, exportCasosOnProcess, exportCasosSuccess, exportChildrenDataError, exportMembersDataError, exportProfileExplanation, exportUserDataError, exportUserDataOnProcess, exportUserDataSuccess } from \"../../utils/messages_strings\";\nimport { exportAllCasosToPDF, exportAllChildrenToCSV, exportAllParentsToCSV, exportParentToCSV } from \"../../firebase_scripts/profile_functions\";\nimport JSZip from \"jszip\";\nimport { saveAs } from 'file-saver';\n\nvar ExportAssocData = /*#__PURE__*/function (_React$Component) {\n  _inherits(ExportAssocData, _React$Component);\n\n  var _super = _createSuper(ExportAssocData);\n\n  function ExportAssocData(props) {\n    var _this;\n\n    _classCallCheck(this, ExportAssocData);\n\n    _this = _super.call(this, props);\n    var parent = null;\n    var infoFormTitle = exportAssocData[languageCode];\n\n    if (_this.props.user != null) {\n      parent = _this.props.user;\n    }\n\n    _this.state = {\n      title: infoFormTitle,\n      parent: parent,\n      dialogOpen: false\n    };\n    _this.exportAssocData = _this.exportAssocData.bind(_assertThisInitialized(_this));\n    _this.exportAllCasos = _this.exportAllCasos.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /*********************************** LIFECYCLE ***********************************/\n\n\n  _createClass(ExportAssocData, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n    /*********************************** HANDLERS ***********************************/\n\n  }, {\n    key: \"exportAssocData\",\n    value: function exportAssocData() {\n      var zip = new JSZip();\n      var zipFileName = assocDataZipName[languageCode];\n      var filesUrlsArray = [];\n      var parentsFileName = membersDesignation[languageCode] + \".csv\";\n      var childrenFileName = membersChildrenDesignation[languageCode] + \".csv\";\n      showToast(exportAssocDataOnProcess[languageCode], 3000, toastTypes.INFO);\n      exportAllParentsToCSV().then(function (parentsFile) {\n        if (parentsFile == null) {\n          showToast(exportMembersDataError[languageCode], 8000, toastTypes.ERROR);\n          return;\n        }\n\n        var url = window.URL.createObjectURL(new Blob([parentsFile])); // save parents blob URL\n\n        filesUrlsArray.push(url);\n        zip.file(parentsFileName, parentsFile, {\n          binary: true\n        });\n        exportAllChildrenToCSV().then(function (childrenFile) {\n          if (childrenFile == null) {\n            showToast(exportChildrenDataError[languageCode], 8000, toastTypes.ERROR);\n            return;\n          }\n\n          var url = window.URL.createObjectURL(new Blob([childrenFile])); // save children blob URL\n\n          filesUrlsArray.push(url);\n          zip.file(childrenFileName, childrenFile, {\n            binary: true\n          });\n          zip.generateAsync({\n            type: 'blob'\n          }).then(function (content) {\n            saveAs(content, zipFileName);\n            showToast(exportAssocDataSuccess[languageCode], 5000, toastTypes.SUCCESS);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"exportAllCasos\",\n    value: function exportAllCasos() {\n      showToast(exportCasosOnProcess[languageCode], 4000, toastTypes.INFO);\n      exportAllCasosToPDF().then(function (file) {\n        if (file == null) {\n          showToast(exportCasosError[languageCode], 8000, toastTypes.ERROR);\n          return;\n        }\n\n        var url = window.URL.createObjectURL(new Blob([file])); // creat anchor tag with download attr\n\n        var link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', \"Casos.pdf\");\n        link.setAttribute('display', \"none\");\n        document.body.appendChild(link); // 4. Force download\n\n        link.click();\n        showToast(exportCasosSuccess[languageCode], 5000, toastTypes.SUCCESS);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Card, {\n        small: true,\n        className: \"mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }\n      }, this.state.title)), /*#__PURE__*/React.createElement(ListGroup, {\n        flush: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        form: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 23\n        }\n      }, \"Membros e Alunos\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 23\n        }\n      }, exportAssocDataExplanation[languageCode])), /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 23\n        }\n      }, \"Casos\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 23\n        }\n      }, exportAssocCasosExplanation[languageCode]))), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(Row, {\n        form: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"4\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        theme: \"accent\",\n        onClick: this.exportAssocData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"material-icons md-24\",\n        style: {\n          fontSize: \"150%\",\n          textAlign: \"center\",\n          verticalAlign: \"middle\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 77\n        }\n      }, \"get_app\"), \" \", exportParentsAndChildren[languageCode])), /*#__PURE__*/React.createElement(Col, {\n        md: \"4\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        theme: \"accent\",\n        onClick: this.exportAllCasos,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"material-icons md-24\",\n        style: {\n          fontSize: \"150%\",\n          textAlign: \"center\",\n          verticalAlign: \"middle\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 76\n        }\n      }, \"get_app\"), \" \", exportCasos[languageCode])))))))));\n    }\n  }]);\n\n  return ExportAssocData;\n}(React.Component);\n\nexport default ExportAssocData;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/profile/ExportAssocData.js"],"names":["React","Button","Card","CardHeader","Col","Form","ListGroup","ListGroupItem","Row","assocDataZipName","languageCode","membersChildrenDesignation","membersDesignation","parentsParameters","showToast","toastTypes","exportAssocData","exportCasos","exportMyData","exportParentsAndChildren","exportWord","FormText","exportAssocCasosExplanation","exportAssocDataExplanation","exportAssocDataOnProcess","exportAssocDataSuccess","exportCasosError","exportCasosOnProcess","exportCasosSuccess","exportChildrenDataError","exportMembersDataError","exportProfileExplanation","exportUserDataError","exportUserDataOnProcess","exportUserDataSuccess","exportAllCasosToPDF","exportAllChildrenToCSV","exportAllParentsToCSV","exportParentToCSV","JSZip","saveAs","ExportAssocData","props","parent","infoFormTitle","user","state","title","dialogOpen","bind","exportAllCasos","_isMounted","zip","zipFileName","filesUrlsArray","parentsFileName","childrenFileName","INFO","then","parentsFile","ERROR","url","window","URL","createObjectURL","Blob","push","file","binary","childrenFile","generateAsync","type","content","SUCCESS","link","document","createElement","href","setAttribute","body","appendChild","click","fontSize","textAlign","verticalAlign","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardHeader,\r\n  Col,\r\n  Form,\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Row\r\n} from \"shards-react\";\r\nimport {\r\n  assocDataZipName,\r\n  languageCode,\r\n  membersChildrenDesignation,\r\n  membersDesignation,\r\n  parentsParameters, showToast, toastTypes\r\n} from \"../../utils/general_utils\";\r\nimport {\r\n  exportAssocData, exportCasos,\r\n  exportMyData, exportParentsAndChildren, exportWord,\r\n} from \"../../utils/page_titles_strings\";\r\nimport {FormText} from \"react-bootstrap\";\r\nimport {\r\n  exportAssocCasosExplanation,\r\n  exportAssocDataExplanation,\r\n  exportAssocDataOnProcess,\r\n  exportAssocDataSuccess, exportCasosError,\r\n  exportCasosOnProcess, exportCasosSuccess,\r\n  exportChildrenDataError,\r\n  exportMembersDataError,\r\n  exportProfileExplanation,\r\n  exportUserDataError,\r\n  exportUserDataOnProcess,\r\n  exportUserDataSuccess\r\n} from \"../../utils/messages_strings\";\r\nimport {\r\n  exportAllCasosToPDF,\r\n  exportAllChildrenToCSV,\r\n  exportAllParentsToCSV,\r\n  exportParentToCSV\r\n} from \"../../firebase_scripts/profile_functions\";\r\nimport JSZip from \"jszip\";\r\nimport { saveAs } from 'file-saver';\r\n\r\nclass ExportAssocData extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    let parent = null;\r\n    const infoFormTitle = exportAssocData[languageCode];\r\n\r\n    if(this.props.user!=null){\r\n      parent = this.props.user;\r\n    }\r\n\r\n    this.state = {\r\n      title: infoFormTitle,\r\n      parent : parent,\r\n      dialogOpen : false,\r\n    };\r\n\r\n\r\n    this.exportAssocData = this.exportAssocData.bind(this);\r\n    this.exportAllCasos = this.exportAllCasos.bind(this);\r\n\r\n\r\n  }\r\n\r\n  /*********************************** LIFECYCLE ***********************************/\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  /*********************************** HANDLERS ***********************************/\r\n\r\n  exportAssocData(){\r\n    let zip = new JSZip();\r\n    const zipFileName = assocDataZipName[languageCode];\r\n\r\n    let filesUrlsArray = [];\r\n\r\n    const parentsFileName = membersDesignation[languageCode] + \".csv\";\r\n    const childrenFileName = membersChildrenDesignation[languageCode] + \".csv\";\r\n\r\n    showToast(exportAssocDataOnProcess[languageCode], 3000, toastTypes.INFO);\r\n\r\n    exportAllParentsToCSV()\r\n      .then((parentsFile) => {\r\n        if(parentsFile==null){\r\n          showToast(exportMembersDataError[languageCode], 8000, toastTypes.ERROR);\r\n          return;\r\n        }\r\n        const url = window.URL.createObjectURL(new Blob([parentsFile]));\r\n        // save parents blob URL\r\n        filesUrlsArray.push(url);\r\n\r\n        zip.file(parentsFileName, parentsFile, {binary:true});\r\n\r\n        exportAllChildrenToCSV()\r\n          .then((childrenFile) => {\r\n            if(childrenFile==null){\r\n              showToast(exportChildrenDataError[languageCode], 8000, toastTypes.ERROR);\r\n              return;\r\n            }\r\n            const url = window.URL.createObjectURL(new Blob([childrenFile]));\r\n            // save children blob URL\r\n            filesUrlsArray.push(url);\r\n\r\n            zip.file(childrenFileName, childrenFile, {binary:true});\r\n\r\n            zip.generateAsync({type:'blob'}).then(function(content) {\r\n              saveAs(content, zipFileName);\r\n              showToast(exportAssocDataSuccess[languageCode], 5000, toastTypes.SUCCESS);\r\n            });\r\n\r\n          });\r\n\r\n      });\r\n  }\r\n\r\n\r\n  exportAllCasos(){\r\n    showToast(exportCasosOnProcess[languageCode], 4000, toastTypes.INFO);\r\n\r\n    exportAllCasosToPDF()\r\n      .then((file) => {\r\n        if(file==null){\r\n          showToast(exportCasosError[languageCode], 8000, toastTypes.ERROR);\r\n          return;\r\n        }\r\n        const url = window.URL.createObjectURL(new Blob([file]));\r\n        // creat anchor tag with download attr\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.setAttribute('download', \"Casos.pdf\");\r\n        link.setAttribute('display', \"none\");\r\n        document.body.appendChild(link);\r\n        // 4. Force download\r\n        link.click();\r\n        showToast(exportCasosSuccess[languageCode], 5000, toastTypes.SUCCESS);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Card small className=\"mb-4\">\r\n        <CardHeader className=\"border-bottom\">\r\n          <h6 className=\"m-0\">{this.state.title}</h6>\r\n        </CardHeader>\r\n        <ListGroup flush>\r\n          <ListGroupItem className=\"p-3\">\r\n            <Row>\r\n              <Col>\r\n                <Form>\r\n                  <Row form>\r\n                    <Col md=\"6\" className=\"form-group\">\r\n                      <h6 className=\"m-0\">Membros e Alunos</h6>\r\n                      <p>\r\n                        {exportAssocDataExplanation[languageCode]}\r\n                      </p>\r\n                    </Col>\r\n                    <Col md=\"6\" className=\"form-group\">\r\n                      <h6 className=\"m-0\">Casos</h6>\r\n                      <p>\r\n                        {exportAssocCasosExplanation[languageCode]}\r\n                      </p>\r\n                    </Col>\r\n                  </Row>\r\n                  <hr />\r\n                  <Row form>\r\n                    <Col md=\"4\" className=\"form-group\">\r\n                      <Button theme=\"accent\" onClick={this.exportAssocData}><span className=\"material-icons md-24\" style={{fontSize:\"150%\", textAlign: \"center\", verticalAlign:\"middle\"}}>get_app</span> {exportParentsAndChildren[languageCode]}</Button>\r\n                    </Col>\r\n                    <Col md=\"4\" className=\"form-group\">\r\n                      <Button theme=\"accent\" onClick={this.exportAllCasos}><span className=\"material-icons md-24\" style={{fontSize:\"150%\", textAlign: \"center\", verticalAlign:\"middle\"}}>get_app</span> {exportCasos[languageCode]}</Button>\r\n                    </Col>\r\n                  </Row>\r\n                </Form>\r\n              </Col>\r\n            </Row>\r\n          </ListGroupItem>\r\n        </ListGroup>\r\n\r\n      </Card>\r\n\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default ExportAssocData;\r\n"]},"metadata":{},"sourceType":"module"}