{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\approval-page\\\\ApprovalModal.js\";\n\n/* eslint jsx-a11y/anchor-is-valid: 0 */\nimport React, { Fragment, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { ListGroup, ListGroupItem, Button, Row, Col, Form, FormGroup, FormInput, FormFeedback, FormTextarea, FormCheckbox } from \"shards-react\";\nimport { firestore, firebase_auth, firebase, firebaseConfig } from \"../../firebase-config\";\nimport { toast, Bounce } from \"react-toastify\";\nimport { saveCaseToDB } from \"../../firebase_scripts/installation\";\nimport { deleteAccount } from \"../../firebase_scripts/profile_functions\";\nimport { languageCode, parentsParameters } from \"../../utils/general_utils\";\n\nvar ApprovalModal = /*#__PURE__*/function (_React$Component) {\n  _inherits(ApprovalModal, _React$Component);\n\n  var _super = _createSuper(ApprovalModal);\n\n  function ApprovalModal(props) {\n    var _this;\n\n    _classCallCheck(this, ApprovalModal);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      dados: _this.props.dados,\n      parentComponent: _this.props.parentComponent,\n      extraParent: null,\n      moreStudents: null\n    };\n    _this.approve = _this.approve.bind(_assertThisInitialized(_this));\n    _this.refuse = _this.refuse.bind(_assertThisInitialized(_this));\n    _this.loadExtraParent = _this.loadExtraParent.bind(_assertThisInitialized(_this));\n    _this.addStudent = _this.addStudent.bind(_assertThisInitialized(_this));\n    _this.showModal = _this.showModal.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n\n    _this.loadExtraParent();\n\n    _this.addStudent();\n\n    return _this;\n  }\n\n  _createClass(ApprovalModal, [{\n    key: \"addStudent\",\n    value: function addStudent() {\n      var moreStudents = this.state.moreStudents;\n      var this_ = this;\n      var dadosFinaisAluno = null;\n      var dicionarioAlunos = {};\n      var project_id = firebaseConfig.projectId; //Get student parameters from database\n\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getAllNewParams\";\n\n      var request = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var resposta;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return fetch(uri).then(function (resp) {\n                    return resp.json();\n                  }) // Transform the data into json\n                  .then(function (data) {\n                    var dataDoc = data;\n\n                    if (data === undefined || data.error) {\n                      console.log(\"doc não existe\");\n                    } else {\n                      var studentData = data[\"aluno\"];\n\n                      if (studentData !== undefined) {\n                        var keys = Object.keys(studentData);\n                        var dadosAluno = [];\n\n                        for (var i = 0; i < keys.length; i++) {\n                          for (var index = 0; index < this_.state.dados.Educandos.length; index++) {\n                            var valS = keys[i];\n                            var idS = valS + \"-\" + i; //Id now contains a unique number to identify it\n\n                            var value = this_.state.dados.Educandos[index]; //Object to render\n\n                            var dado = /*#__PURE__*/React.createElement(FormGroup, {\n                              __self: this,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 95,\n                                columnNumber: 21\n                              }\n                            }, /*#__PURE__*/React.createElement(\"label\", {\n                              htmlFor: idS,\n                              __self: this,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 96,\n                                columnNumber: 23\n                              }\n                            }, valS), /*#__PURE__*/React.createElement(FormInput, {\n                              id: idS,\n                              placeholder: valS,\n                              value: value[valS],\n                              disabled: true,\n                              __self: this,\n                              __source: {\n                                fileName: _jsxFileName,\n                                lineNumber: 97,\n                                columnNumber: 23\n                              }\n                            }));\n\n                            if (i == 0) {\n                              dicionarioAlunos[index] = [dado];\n                            } else {\n                              var dados = dicionarioAlunos[index];\n                              dados.push(dado);\n                              dicionarioAlunos[index] = dados;\n                            }\n\n                            dadosAluno.push(dado);\n                          }\n                        }\n\n                        var finalArray = [];\n\n                        for (var index1 = 0; index1 < this_.state.dados.Educandos.length; index1++) {\n                          var newName = \"studentName-\" + index1;\n                          var newYear = \"studentYear-\" + index1;\n                          var add = /*#__PURE__*/React.createElement(Fragment, {\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 129,\n                              columnNumber: 19\n                            }\n                          }, /*#__PURE__*/React.createElement(\"hr\", {\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 130,\n                              columnNumber: 21\n                            }\n                          }), /*#__PURE__*/React.createElement(FormGroup, {\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 131,\n                              columnNumber: 21\n                            }\n                          }, /*#__PURE__*/React.createElement(\"label\", {\n                            htmlFor: \"studentName\",\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 132,\n                              columnNumber: 23\n                            }\n                          }, \"Nome Aluno\"), /*#__PURE__*/React.createElement(FormInput, {\n                            id: newName,\n                            type: \"text\",\n                            placeholder: \"Nome\",\n                            value: this_.state.dados.Educandos[index1][\"Nome\"],\n                            disabled: true,\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 133,\n                              columnNumber: 23\n                            }\n                          })), /*#__PURE__*/React.createElement(FormGroup, {\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 142,\n                              columnNumber: 21\n                            }\n                          }, /*#__PURE__*/React.createElement(\"label\", {\n                            htmlFor: \"studentYear\",\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 143,\n                              columnNumber: 23\n                            }\n                          }, \"Ano Escolaridade\"), /*#__PURE__*/React.createElement(FormInput, {\n                            id: newYear,\n                            type: \"text\",\n                            placeholder: \"5\\xBA\",\n                            value: this_.state.dados.Educandos[index1][\"Ano\"],\n                            disabled: true,\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 144,\n                              columnNumber: 23\n                            }\n                          })), dicionarioAlunos[index1]);\n                          finalArray.push([add]);\n                        }\n\n                        this_.setState({\n                          moreStudents: finalArray\n                        });\n                      }\n                    }\n                  }).catch(function (error) {\n                    alert(error);\n                  });\n\n                case 2:\n                  return _context.abrupt(\"return\", resposta);\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function request() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      var dados = request();\n    }\n  }, {\n    key: \"loadExtraParent\",\n    value: function loadExtraParent() {\n      var extraParent = this.state.extraParent;\n      var this_ = this;\n      var dadosFinaisPai = null;\n      var project_id = firebaseConfig.projectId;\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getAllNewParams\";\n\n      var request = /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n          var resposta;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return fetch(uri).then(function (resp) {\n                    return resp.json();\n                  }) // Transform the data into json\n                  .then(function (data) {\n                    var dataDoc = data;\n\n                    if (data === undefined || data.error) {\n                      console.log(\"doc não existe\");\n                    } else {\n                      var eeData = data[\"EE\"]; // Get parent dictionary of extra parameters\n\n                      if (eeData !== undefined) {\n                        var keys = Object.keys(eeData);\n                        var extraPai = 0; // Counts number of extra parameters that belong to the parent part of the registry\n\n                        var dadosPai = []; // Will store all objects to render from the parent side\n\n                        for (var i = 0; i < keys.length; i++) {\n                          extraPai++;\n                          var val = keys[i]; // Actual name of parameter\n                          // Objects to render\n\n                          var dado = /*#__PURE__*/React.createElement(FormGroup, {\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 207,\n                              columnNumber: 19\n                            }\n                          }, /*#__PURE__*/React.createElement(\"label\", {\n                            htmlFor: val,\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 208,\n                              columnNumber: 21\n                            }\n                          }, val), /*#__PURE__*/React.createElement(FormInput, {\n                            id: val,\n                            placeholder: val,\n                            value: this_.state.dados[val],\n                            disabled: true,\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 209,\n                              columnNumber: 21\n                            }\n                          }));\n                          dadosPai.push(dado); //Add object to array\n                        }\n\n                        dadosFinaisPai = dadosPai;\n                      } // Save data to state\n\n\n                      this_.setState({\n                        extraParent: dadosFinaisPai\n                      });\n                    }\n                  }).catch(function (error) {\n                    alert(error);\n                  });\n\n                case 2:\n                  return _context2.abrupt(\"return\", resposta);\n\n                case 3:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function request() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n\n      var dados = request();\n    }\n  }, {\n    key: \"approve\",\n    value: function approve() {\n      var dados = this.state.dados;\n      var this_ = this;\n      firestore.collection(\"parents\").doc(dados.Email).set({\n        Validated: true,\n        \"Data inscricao\": new Date().toJSON().split(\"T\")[0] // obter data no formato 2015-03-25;\n\n      }, {\n        merge: true\n      }).then(function () {\n        console.log(\"Document successfully updated!\");\n        this_.closeModal();\n        this_.state.parentComponent.reload();\n        var project_id = firebaseConfig.projectId;\n        var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/sendApprovedEmail?\" + \"email=\" + dados.Email + \"&\" + \"nome=\" + dados.Nome;\n\n        var request = /*#__PURE__*/function () {\n          var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n            var resposta;\n            return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.next = 2;\n                    return fetch(uri).then(function (resp) {\n                      return resp.json();\n                    }) // Transform the data into json\n                    .then(function (data) {\n                      resposta = data;\n                      this_.closeModal();\n                      this_.props.componentDidMount();\n                    }).catch(function (error) {\n                      console.log(error);\n                    });\n\n                  case 2:\n                    return _context3.abrupt(\"return\", resposta);\n\n                  case 3:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee3);\n          }));\n\n          return function request() {\n            return _ref3.apply(this, arguments);\n          };\n        }();\n\n        return request();\n      }).catch(function (error) {\n        alert(\"Error removing document: \" + error);\n      });\n    }\n  }, {\n    key: \"refuse\",\n    value: function refuse() {\n      var dados = this.state.dados;\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      console.log(\"dadosEmail -> \" + dados.Email);\n      deleteAccount(dados.Email).then(function () {\n        var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/sendRejectedEmail?\" + \"email=\" + dados.Email + \"&\" + \"nome=\" + dados.Nome;\n\n        var request = /*#__PURE__*/function () {\n          var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n            return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n              while (1) {\n                switch (_context4.prev = _context4.next) {\n                  case 0:\n                    _context4.next = 2;\n                    return fetch(uri).then(function (data) {\n                      console.log(data);\n                      this_.closeModal();\n                      this_.props.componentDidMount();\n                    }).catch(function (error) {\n                      console.log(error);\n                    });\n\n                  case 2:\n                  case \"end\":\n                    return _context4.stop();\n                }\n              }\n            }, _callee4);\n          }));\n\n          return function request() {\n            return _ref4.apply(this, arguments);\n          };\n        }();\n\n        return request();\n      });\n    }\n  }, {\n    key: \"showModal\",\n    value: function showModal() {\n      this.setState({\n        show: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        show: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n        size: \"md\",\n        theme: \"primary\",\n        id: \"new_case\",\n        onClick: this.showModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-plus mr-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }\n      }), \" Ver Detalhes\"), /*#__PURE__*/React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.closeModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        closeButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }\n      }, \"Registo Por Aprovar\")), /*#__PURE__*/React.createElement(Modal.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(ListGroup, {\n        flush: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"parentName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 23\n        }\n      }, \"Nome\"), /*#__PURE__*/React.createElement(FormInput, {\n        id: \"parentName\",\n        type: \"text\",\n        placeholder: \"Nome\",\n        value: this.state.dados.Nome,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 23\n        }\n      })), this.state.dados.Emprego ? /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"job\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 25\n        }\n      }, \"Profiss\\xE3o\"), /*#__PURE__*/React.createElement(FormInput, {\n        id: \"job\",\n        placeholder: \"Profiss\\xE3o\",\n        value: this.state.dados.Emprego,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 25\n        }\n      })) : \"\", /*#__PURE__*/React.createElement(Row, {\n        form: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"localidade\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 25\n        }\n      }, \"Localidade\"), /*#__PURE__*/React.createElement(FormInput, {\n        id: \"localidade\",\n        value: this.state.dados.Localidade,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"zipCode\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 25\n        }\n      }, \"C\\xF3digo Postal\"), /*#__PURE__*/React.createElement(FormInput, {\n        id: \"zipCode\",\n        value: this.state.dados[\"Código Postal\"],\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 25\n        }\n      }))), /*#__PURE__*/React.createElement(Row, {\n        form: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 25\n        }\n      }, \"Email\"), /*#__PURE__*/React.createElement(FormInput, {\n        id: \"email\",\n        type: \"email\",\n        placeholder: \"nome@exemplo.pt\",\n        value: this.state.dados.Email,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 25\n        }\n      })), this.state.dados.Telemóvel ? /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"phone\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 29\n        }\n      }, \"Telem\\xF3vel / Telefone\"), /*#__PURE__*/React.createElement(FormInput, {\n        id: \"phone\",\n        type: \"tel\",\n        placeholder: \"200345678\",\n        value: this.state.dados.Telemóvel,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 29\n        }\n      }))) : \"\"), this.state.extraParent, this.state.moreStudents))))), /*#__PURE__*/React.createElement(Modal.Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        theme: \"success\",\n        onClick: this.approve,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 13\n        }\n      }, \"Aprovar\"), /*#__PURE__*/React.createElement(Button, {\n        theme: \"danger\",\n        onClick: this.refuse,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }\n      }, \"Recusar\"))));\n    }\n  }]);\n\n  return ApprovalModal;\n}(React.Component);\n\nexport default ApprovalModal;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/approval-page/ApprovalModal.js"],"names":["React","Fragment","useState","ReactDOM","Modal","ListGroup","ListGroupItem","Button","Row","Col","Form","FormGroup","FormInput","FormFeedback","FormTextarea","FormCheckbox","firestore","firebase_auth","firebase","firebaseConfig","toast","Bounce","saveCaseToDB","deleteAccount","languageCode","parentsParameters","ApprovalModal","props","state","dados","parentComponent","extraParent","moreStudents","approve","bind","refuse","loadExtraParent","addStudent","showModal","closeModal","this_","dadosFinaisAluno","dicionarioAlunos","project_id","projectId","uri","request","fetch","then","resp","json","data","dataDoc","undefined","error","console","log","studentData","keys","Object","dadosAluno","i","length","index","Educandos","valS","idS","value","dado","push","finalArray","index1","newName","newYear","add","setState","catch","alert","resposta","dadosFinaisPai","eeData","extraPai","dadosPai","val","collection","doc","Email","set","Validated","Date","toJSON","split","merge","reload","Nome","componentDidMount","show","Emprego","Localidade","Telemóvel","Component"],"mappings":"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","sourcesContent":["/* eslint jsx-a11y/anchor-is-valid: 0 */\r\n\r\nimport React, { Fragment, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport {\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Button,\r\n  Row,\r\n  Col,\r\n  Form,\r\n  FormGroup,\r\n  FormInput,\r\n  FormFeedback,\r\n  FormTextarea,\r\n  FormCheckbox,\r\n} from \"shards-react\";\r\nimport {\r\n  firestore,\r\n  firebase_auth,\r\n  firebase,\r\n  firebaseConfig,\r\n} from \"../../firebase-config\";\r\nimport { toast, Bounce } from \"react-toastify\";\r\nimport { saveCaseToDB } from \"../../firebase_scripts/installation\";\r\nimport {deleteAccount} from \"../../firebase_scripts/profile_functions\";\r\nimport {languageCode, parentsParameters} from \"../../utils/general_utils\";\r\n\r\nclass ApprovalModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      dados: this.props.dados,\r\n      parentComponent: this.props.parentComponent,\r\n      extraParent: null,\r\n      moreStudents: null,\r\n    };\r\n\r\n    this.approve = this.approve.bind(this);\r\n    this.refuse = this.refuse.bind(this);\r\n    this.loadExtraParent = this.loadExtraParent.bind(this);\r\n    this.addStudent = this.addStudent.bind(this);\r\n\r\n    this.showModal = this.showModal.bind(this);\r\n    this.closeModal = this.closeModal.bind(this);\r\n\r\n    this.loadExtraParent();\r\n\r\n    this.addStudent();\r\n  }\r\n\r\n  addStudent() {\r\n    var { moreStudents } = this.state;\r\n\r\n    var this_ = this;\r\n\r\n    var dadosFinaisAluno = null;\r\n    var dicionarioAlunos = {};\r\n\r\n    const project_id = firebaseConfig.projectId;\r\n    //Get student parameters from database\r\n    let uri =\r\n      \"https://us-central1-\" +\r\n      project_id +\r\n      \".cloudfunctions.net/api/getAllNewParams\";\r\n    const request = async () => {\r\n      let resposta;\r\n      await fetch(uri)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          var dataDoc = data;\r\n          if (data === undefined || data.error) {\r\n            console.log(\"doc não existe\");\r\n          } else {\r\n            const studentData = data[\"aluno\"];\r\n            if (studentData !== undefined) {\r\n              var keys = Object.keys(studentData);\r\n\r\n              var dadosAluno = [];\r\n              for (var i = 0; i < keys.length; i++) {\r\n                for (\r\n                  var index = 0;\r\n                  index < this_.state.dados.Educandos.length;\r\n                  index++\r\n                ) {\r\n                  var valS = keys[i];\r\n\r\n                  var idS = valS + \"-\" + i; //Id now contains a unique number to identify it\r\n                  var value = this_.state.dados.Educandos[index];\r\n\r\n                  //Object to render\r\n                  var dado = (\r\n                    <FormGroup>\r\n                      <label htmlFor={idS}>{valS}</label>\r\n                      <FormInput\r\n                        id={idS}\r\n                        placeholder={valS}\r\n                        value={value[valS]}\r\n                        disabled={true}\r\n                      />\r\n                    </FormGroup>\r\n                  );\r\n\r\n                  if (i == 0) {\r\n                    dicionarioAlunos[index] = [dado];\r\n                  } else {\r\n                    var dados = dicionarioAlunos[index];\r\n                    dados.push(dado);\r\n                    dicionarioAlunos[index] = dados;\r\n                  }\r\n\r\n                  dadosAluno.push(dado);\r\n                }\r\n              }\r\n\r\n              var finalArray = [];\r\n\r\n              for (\r\n                var index1 = 0;\r\n                index1 < this_.state.dados.Educandos.length;\r\n                index1++\r\n              ) {\r\n                var newName = \"studentName-\" + index1;\r\n                var newYear = \"studentYear-\" + index1;\r\n\r\n                var add = (\r\n                  <Fragment>\r\n                    <hr />\r\n                    <FormGroup>\r\n                      <label htmlFor=\"studentName\">Nome Aluno</label>\r\n                      <FormInput\r\n                        id={newName}\r\n                        type=\"text\"\r\n                        placeholder=\"Nome\"\r\n                        value={this_.state.dados.Educandos[index1][\"Nome\"]}\r\n                        disabled={true}\r\n                      />\r\n                    </FormGroup>\r\n\r\n                    <FormGroup>\r\n                      <label htmlFor=\"studentYear\">Ano Escolaridade</label>\r\n                      <FormInput\r\n                        id={newYear}\r\n                        type=\"text\"\r\n                        placeholder=\"5º\"\r\n                        value={this_.state.dados.Educandos[index1][\"Ano\"]}\r\n                        disabled={true}\r\n                      />\r\n                    </FormGroup>\r\n                    {dicionarioAlunos[index1]}\r\n                  </Fragment>\r\n                );\r\n                finalArray.push([add]);\r\n              }\r\n\r\n              this_.setState({\r\n                moreStudents: finalArray,\r\n              });\r\n            }\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          alert(error);\r\n        });\r\n      return resposta;\r\n    };\r\n\r\n    var dados = request();\r\n  }\r\n\r\n  loadExtraParent() {\r\n    var { extraParent } = this.state;\r\n    var this_ = this;\r\n\r\n    var dadosFinaisPai = null;\r\n\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    let uri =\r\n      \"https://us-central1-\" +\r\n      project_id +\r\n      \".cloudfunctions.net/api/getAllNewParams\";\r\n    const request = async () => {\r\n      let resposta;\r\n      await fetch(uri)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          var dataDoc = data;\r\n          if (data === undefined || data.error) {\r\n            console.log(\"doc não existe\");\r\n          } else {\r\n            const eeData = data[\"EE\"]; // Get parent dictionary of extra parameters\r\n            if (eeData !== undefined) {\r\n              var keys = Object.keys(eeData);\r\n\r\n              var extraPai = 0; // Counts number of extra parameters that belong to the parent part of the registry\r\n\r\n              var dadosPai = []; // Will store all objects to render from the parent side\r\n              for (var i = 0; i < keys.length; i++) {\r\n                extraPai++;\r\n                var val = keys[i]; // Actual name of parameter\r\n\r\n                // Objects to render\r\n                var dado = (\r\n                  <FormGroup>\r\n                    <label htmlFor={val}>{val}</label>\r\n                    <FormInput\r\n                      id={val}\r\n                      placeholder={val}\r\n                      value={this_.state.dados[val]}\r\n                      disabled={true}\r\n                    />\r\n                  </FormGroup>\r\n                );\r\n                dadosPai.push(dado); //Add object to array\r\n              }\r\n              dadosFinaisPai = dadosPai;\r\n            }\r\n\r\n            // Save data to state\r\n            this_.setState({\r\n              extraParent: dadosFinaisPai,\r\n            });\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          alert(error);\r\n        });\r\n      return resposta;\r\n    };\r\n\r\n    var dados = request();\r\n  }\r\n\r\n  approve() {\r\n    const { dados } = this.state;\r\n    const this_ = this;\r\n    firestore\r\n      .collection(\"parents\")\r\n      .doc(dados.Email)\r\n      .set(\r\n        {\r\n          Validated: true,\r\n          \"Data inscricao\": new Date().toJSON().split(\"T\")[0], // obter data no formato 2015-03-25;\r\n        },\r\n        { merge: true }\r\n      )\r\n      .then(function () {\r\n        console.log(\"Document successfully updated!\");\r\n        this_.closeModal();\r\n        this_.state.parentComponent.reload();\r\n\r\n        const project_id = firebaseConfig.projectId;\r\n        let uri =\r\n          \"https://us-central1-\" +\r\n          project_id +\r\n          \".cloudfunctions.net/api/sendApprovedEmail?\" +\r\n          \"email=\" +\r\n          dados.Email +\r\n          \"&\" +\r\n          \"nome=\" +\r\n          dados.Nome;\r\n        const request = async () => {\r\n          let resposta;\r\n          await fetch(uri)\r\n            .then((resp) => resp.json()) // Transform the data into json\r\n            .then(function (data) {\r\n              resposta = data;\r\n              this_.closeModal();\r\n              this_.props.componentDidMount();\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n            });\r\n\r\n          return resposta;\r\n        };\r\n\r\n        return request();\r\n      })\r\n      .catch(function (error) {\r\n        alert(\"Error removing document: \" + error);\r\n      });\r\n  }\r\n\r\n  refuse() {\r\n    const { dados } = this.state;\r\n    const this_ = this;\r\n\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    console.log(\"dadosEmail -> \" + dados.Email);\r\n\r\n    deleteAccount(dados.Email).then(() => {\r\n      let uri =\r\n        \"https://us-central1-\" +\r\n        project_id +\r\n        \".cloudfunctions.net/api/sendRejectedEmail?\" +\r\n        \"email=\" +\r\n        dados.Email +\r\n        \"&\" +\r\n        \"nome=\" +\r\n        dados.Nome;\r\n      const request = async () => {\r\n        await fetch(uri)\r\n          .then(function (data) {\r\n            console.log(data);\r\n            this_.closeModal();\r\n            this_.props.componentDidMount();\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error);\r\n          });\r\n      };\r\n      return request();\r\n    });\r\n\r\n  }\r\n\r\n  showModal() {\r\n    this.setState({ show: true });\r\n  }\r\n\r\n  closeModal() {\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <Button\r\n          size=\"md\"\r\n          theme=\"primary\"\r\n          id=\"new_case\"\r\n          onClick={this.showModal}\r\n        >\r\n          <i className=\"fa fa-plus mr-1\" /> Ver Detalhes\r\n        </Button>\r\n\r\n        <Modal show={this.state.show} onHide={this.closeModal}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Registo Por Aprovar</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <ListGroup flush>\r\n              <ListGroupItem className=\"p-3\">\r\n                <Col>\r\n                  <Form>\r\n                    <FormGroup>\r\n                      <label htmlFor=\"parentName\">Nome</label>\r\n                      <FormInput\r\n                        id=\"parentName\"\r\n                        type=\"text\"\r\n                        placeholder=\"Nome\"\r\n                        value={this.state.dados.Nome}\r\n                        disabled={true}\r\n                      />\r\n                    </FormGroup>\r\n                    {this.state.dados.Emprego ? (\r\n                      <FormGroup>\r\n                        <label htmlFor=\"job\">Profissão</label>\r\n                        <FormInput\r\n                          id=\"job\"\r\n                          placeholder=\"Profissão\"\r\n                          value={this.state.dados.Emprego}\r\n                          disabled={true}\r\n                        />\r\n                      </FormGroup>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                    <Row form>\r\n                      <Col md=\"6\" className=\"form-group\">\r\n                        <label htmlFor=\"localidade\">Localidade</label>\r\n                        <FormInput\r\n                          id=\"localidade\"\r\n                          value={this.state.dados.Localidade}\r\n                          disabled={true}\r\n                        />\r\n                      </Col>\r\n                      <Col md=\"6\" className=\"form-group\">\r\n                        <label htmlFor=\"zipCode\">Código Postal</label>\r\n                        <FormInput\r\n                          id=\"zipCode\"\r\n                          value={this.state.dados[\"Código Postal\"]}\r\n                          disabled={true}\r\n                        />\r\n                      </Col>\r\n                    </Row>\r\n                    <Row form>\r\n                      <Col md=\"6\">\r\n                        <label htmlFor=\"email\">Email</label>\r\n                        <FormInput\r\n                          id=\"email\"\r\n                          type=\"email\"\r\n                          placeholder=\"nome@exemplo.pt\"\r\n                          value={this.state.dados.Email}\r\n                          disabled={true}\r\n                        />\r\n                      </Col>\r\n                      {this.state.dados.Telemóvel ? (\r\n                        <Col md=\"6\">\r\n                          <FormGroup>\r\n                            <label htmlFor=\"phone\">Telemóvel / Telefone</label>\r\n                            <FormInput\r\n                              id=\"phone\"\r\n                              type=\"tel\"\r\n                              placeholder=\"200345678\"\r\n                              value={this.state.dados.Telemóvel}\r\n                              disabled={true}\r\n                            />\r\n                          </FormGroup>\r\n                        </Col>\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </Row>\r\n\r\n                    {this.state.extraParent}\r\n\r\n                    {this.state.moreStudents}\r\n                  </Form>\r\n                </Col>\r\n              </ListGroupItem>\r\n            </ListGroup>\r\n          </Modal.Body>\r\n\r\n          <Modal.Footer>\r\n            <Button theme=\"success\" onClick={this.approve}>\r\n              Aprovar\r\n            </Button>\r\n            <Button theme=\"danger\" onClick={this.refuse}>\r\n              Recusar\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ApprovalModal;\r\n"]},"metadata":{},"sourceType":"module"}