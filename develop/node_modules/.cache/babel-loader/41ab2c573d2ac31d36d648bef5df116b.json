{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport { firebase_auth, firebaseConfig, firestore, storageRef } from \"../firebase-config\";\nimport { languageCode, newParametersEntities, newParametersInputTypes, newParametersTypes, parentsParameters, studentsParameters } from \"../utils/general_utils\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nfunction fetchUserDoc(_x) {\n  return _fetchUserDoc.apply(this, arguments);\n}\n\nfunction _fetchUserDoc() {\n  _fetchUserDoc = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15(email) {\n    var project_id, uri, request;\n    return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            console.log(\"profile email to fetch: \" + email);\n            project_id = firebaseConfig.projectId;\n            uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getParent?\" + \"id=\" + encodeURIComponent(email); //console.log(\"profile uri: \" + uri);\n\n            request = /*#__PURE__*/function () {\n              var _ref14 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14() {\n                var userDoc;\n                return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n                  while (1) {\n                    switch (_context14.prev = _context14.next) {\n                      case 0:\n                        userDoc = {};\n                        _context14.next = 3;\n                        return fetch(uri).then(function (resp) {\n                          return resp.json();\n                        }) // Transform the data into json\n                        .then(function (data) {\n                          console.log(\"user recebido -> \", JSON.stringify(data));\n                          userDoc = data;\n                        }).catch(function (error) {\n                          console.log(error);\n                        });\n\n                      case 3:\n                        return _context14.abrupt(\"return\", userDoc);\n\n                      case 4:\n                      case \"end\":\n                        return _context14.stop();\n                    }\n                  }\n                }, _callee14);\n              }));\n\n              return function request() {\n                return _ref14.apply(this, arguments);\n              };\n            }();\n\n            return _context15.abrupt(\"return\", request());\n\n          case 5:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, _callee15);\n  }));\n  return _fetchUserDoc.apply(this, arguments);\n}\n\nfunction userLogOut() {\n  firebase_auth.signOut().then(function () {\n    // Sign-out successful.\n    // clear local storage\n    window.localStorage.removeItem(\"userDoc\");\n    window.localStorage.removeItem(\"newParamsInputTypes\");\n    window.localStorage.removeItem(\"assocDoc\");\n    window.localStorage.removeItem(\"admin\");\n    window.localStorage.removeItem(\"email\"); //window.localStorage.removeItem(\"emailForSignIn\");\n\n    window.location = \"/login\";\n  }).catch(function (error) {\n    // An error happened.\n    console.log(\"Error logging out: \" + error);\n  });\n}\n\nfunction getNewParams() {\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getAllNewParams\"; //console.log(\"new params uri: \" + uri);\n\n  var request = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var paramsDoc;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              paramsDoc = {};\n              _context.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.json();\n              }) // Transform the data into json\n              .then(function (data) {\n                //console.log(\"paramsDoc recebido -> \", JSON.stringify(data));\n                paramsDoc = data;\n              }).catch(function (error) {\n                console.log(\"erro no fetch de params: \" + error);\n              });\n\n            case 3:\n              return _context.abrupt(\"return\", paramsDoc);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function request() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return request();\n}\n\nfunction mapParamsToInputType(paramsDoc) {\n  var inputTypesDoc = {};\n  var parentParams = paramsDoc[newParametersEntities.parent[languageCode]];\n  var childParams = paramsDoc[newParametersEntities.student[languageCode]];\n  var parentParamsTypes = {};\n  var childParamsTypes = {};\n\n  if (parentParams != null) {\n    for (var p in parentParams) {\n      if (parentParams[p] === newParametersTypes.TEXT[languageCode]) {\n        var inputType = newParametersInputTypes.TEXT.type;\n        var inputStep = newParametersInputTypes.TEXT.step;\n        parentParamsTypes[p] = {\n          type: inputType,\n          step: inputStep\n        };\n      } else if (parentParams[p] === newParametersTypes.INT[languageCode]) {\n        var _inputType = newParametersInputTypes.INT.type;\n        var _inputStep = newParametersInputTypes.INT.step;\n        parentParamsTypes[p] = {\n          type: _inputType,\n          step: _inputStep\n        };\n      } else if (parentParams[p] === newParametersTypes.FLOAT[languageCode]) {\n        var _inputType2 = newParametersInputTypes.FLOAT.type;\n        var _inputStep2 = newParametersInputTypes.FLOAT.step;\n        parentParamsTypes[p] = {\n          type: _inputType2,\n          step: _inputStep2\n        };\n      }\n    }\n\n    inputTypesDoc[newParametersEntities.parent[languageCode]] = parentParamsTypes;\n  }\n\n  if (childParams != null) {\n    for (var _p in childParams) {\n      if (childParams[_p] === newParametersTypes.TEXT[languageCode]) {\n        var _inputType3 = newParametersInputTypes.TEXT.type;\n        var _inputStep3 = newParametersInputTypes.TEXT.step;\n        childParamsTypes[_p] = {\n          type: _inputType3,\n          step: _inputStep3\n        };\n      } else if (childParams[_p] === newParametersTypes.INT[languageCode]) {\n        var _inputType4 = newParametersInputTypes.INT.type;\n        var _inputStep4 = newParametersInputTypes.INT.step;\n        childParamsTypes[_p] = {\n          type: _inputType4,\n          step: _inputStep4\n        };\n      } else if (childParams[_p] === newParametersTypes.FLOAT[languageCode]) {\n        var _inputType5 = newParametersInputTypes.FLOAT.type;\n        var _inputStep5 = newParametersInputTypes.FLOAT.step;\n        childParamsTypes[_p] = {\n          type: _inputType5,\n          step: _inputStep5\n        };\n      }\n    }\n\n    inputTypesDoc[newParametersEntities.student[languageCode]] = childParamsTypes;\n  } // like:  {\"um parametro\":{\"type\":\"text\",\"step\":null},\"PÃ³lo\":{\"type\":\"text\",\"step\":null},\"Modalidade\":{\"type\":\"text\",\"step\":null},\"Regime\":{\"type\":\"text\",\"step\":null},\"Grau\":{\"type\":\"number\",\"step\":\"1\"}}\n\n\n  return inputTypesDoc;\n}\n\nfunction updateEducando(parentEmail, educandoDoc, oldName) {\n  console.log(\"educandoDoc -> \" + JSON.stringify(educandoDoc));\n  var localUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n  var children = localUser[parentsParameters.CHILDREN[languageCode]];\n\n  for (var i in children) {\n    var currentChild = children[i]; // find child with that name to update it\n\n    if (currentChild[studentsParameters.NAME[languageCode]] === oldName) {\n      children[i] = educandoDoc;\n      break;\n    }\n  }\n\n  var childrenDesignation = parentsParameters.CHILDREN[languageCode];\n\n  var newChildrenField = _defineProperty({}, childrenDesignation, children);\n\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/updateParent?\" + \"id=\" + parentEmail + \"&doc=\" + encodeURIComponent(JSON.stringify(newChildrenField));\n\n  var request = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var updatedParent;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              updatedParent = {};\n              _context2.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.json();\n              }) // Transform the data into json\n              .then(function (data) {\n                console.log(\"parentUpdated no request update child -> \", JSON.stringify(data));\n                updatedParent = data;\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 3:\n              return _context2.abrupt(\"return\", updatedParent);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function request() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return request();\n}\n\nfunction updateParent(parentEmail, parentDoc) {\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/updateParent?\" + \"id=\" + parentEmail + \"&doc=\" + encodeURIComponent(JSON.stringify(parentDoc));\n\n  var request = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var updatedParent;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              updatedParent = {};\n              _context3.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.json();\n              }) // Transform the data into json\n              .then(function (data) {\n                console.log(\"parentUpdated no request update info -> \", JSON.stringify(data));\n                updatedParent = data;\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 3:\n              return _context3.abrupt(\"return\", updatedParent);\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function request() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return request();\n}\n\nfunction uploadProfilePhoto(photoFile) {\n  // unique file name\n  var newPhotoPath = \"profilePhotos/\" + uuidv4() + \"-\" + photoFile.name;\n  var newPhotoRef = storageRef.child(newPhotoPath);\n  return newPhotoRef.put(photoFile);\n}\n\nfunction uploadChildPhoto(photoFile) {\n  // unique file name\n  var newPhotoPath = \"childPhotos/\" + uuidv4() + \"-\" + photoFile.name;\n  var newPhotoRef = storageRef.child(newPhotoPath);\n  return newPhotoRef.put(photoFile);\n}\n\nfunction uploadAssocLogo(photoFile) {\n  // unique file name\n  var newPhotoPath = \"logo/\" + uuidv4() + \"-\" + photoFile.name;\n  var newPhotoRef = storageRef.child(newPhotoPath);\n  return newPhotoRef.put(photoFile);\n}\n/*\r\n * function to add a child to a parent\r\n * */\n\n\nfunction addEducandoToParent(parentEmail, newChild, photo) {\n  console.log(\"newChild received -> \" + JSON.stringify(newChild));\n  var childJson = newChild;\n  childJson[studentsParameters.PHOTO[languageCode]] = photo;\n  console.log(\"childJson with photo -> \" + JSON.stringify(childJson));\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/addEducando?\" + \"id=\" + parentEmail + \"&educando=\" + encodeURIComponent(JSON.stringify(childJson));\n\n  var request = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var updatedParent;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              updatedParent = {};\n              _context4.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.json();\n              }) // Transform the data into json\n              .then(function (data) {\n                console.log(\"parentUpdated no request add child -> \", JSON.stringify(data));\n                updatedParent = data;\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 3:\n              return _context4.abrupt(\"return\", updatedParent);\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function request() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return request();\n  /*\r\n  let parentRef = firestore.collection('parents').doc(parentEmail);\r\n  const childrenDesignation = parentsParameters.CHILDREN[languageCode];\r\n    return parentRef.get()\r\n    .then((doc) => {\r\n      if (!doc.exists) {\r\n        console.log('No such document for parent <' + parentEmail + '> !');\r\n      }\r\n      else {\r\n        let parent = doc.data();\r\n          let children = parent[childrenDesignation];\r\n        console.log(\"children array -> \" + JSON.stringify(children));\r\n        children.push(childJson);\r\n        console.log(\"children novo -> \" + JSON.stringify(childJson));\r\n        parent[childrenDesignation] = children;\r\n        console.log(\"parent final -> \" + JSON.stringify(parent));\r\n          return parent;\r\n      }\r\n    })\r\n    .then((parent) => {\r\n      return parentRef.update({[childrenDesignation] : parent[childrenDesignation]})\r\n        .then(() => {return parent});\r\n    })\r\n    .catch((err) => {\r\n      console.log('Error getting parent <' + parentEmail + '> : ' + err);\r\n    });*/\n}\n\nfunction deleteEducandoFromParent(parentEmail, childName) {\n  console.log(\"childName to erase received -> \" + childName);\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/removeEducando?\" + \"id=\" + encodeURIComponent(parentEmail) + \"&nome_educando=\" + encodeURIComponent(childName);\n\n  var request = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var updatedParent;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              updatedParent = {};\n              _context5.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.json();\n              }) // Transform the data into json\n              .then(function (data) {\n                //console.log(\"parentUpdated no request delete child -> \", JSON.stringify(data));\n                updatedParent = data;\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 3:\n              return _context5.abrupt(\"return\", updatedParent);\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function request() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return request();\n  /*let parentRef = firestore.collection('parents').doc(parentEmail);\r\n  const childrenDesignation = parentsParameters.CHILDREN[languageCode];\r\n    return parentRef.get()\r\n    .then((doc) => {\r\n      if (!doc.exists) {\r\n        console.log('No such document for parent <' + parentEmail + '> !');\r\n      }\r\n      else {\r\n        let parent = doc.data();\r\n          let children = parent[childrenDesignation];\r\n          for(let i in children){\r\n          const currentName = children[i][studentsParameters.NAME[languageCode]];\r\n          console.log(\"currentName -> \" + currentName);\r\n          if(currentName===childName){\r\n            console.log(\"SPLICE!\");\r\n            children.splice(i,1);\r\n            break;\r\n          }\r\n        }\r\n          console.log(\"children array novo -> \" + JSON.stringify(children));\r\n        parent[childrenDesignation] = children;\r\n        console.log(\"parent final -> \" + JSON.stringify(parent));\r\n          return parent;\r\n      }\r\n    })\r\n    .then((parent) => {\r\n      return parentRef.update({[childrenDesignation] : parent[childrenDesignation]})\r\n        .then(() => {return parent});\r\n    })\r\n    .catch((err) => {\r\n      console.log('Error getting parent <' + parentEmail + '> : ' + err);\r\n    });*/\n}\n/*\r\n * function to check if the current email exists in Firebase auth\r\n * */\n\n\nfunction emailExistsInFBAuth(email) {\n  return firebase_auth.fetchSignInMethodsForEmail(email).then(function (providers) {\n    // if no providers, then user does no exist\n    return !(!providers || providers.length === 0);\n  }).catch(function (e) {\n    return false;\n  });\n}\n/*\r\n * function to check if an email exists in DB\r\n * */\n\n\nfunction emailExistsInDB(email) {\n  console.log(\"email to check in DB: \" + email); // in case of, for some reason, the current email is not in the DB\n\n  var parentRef = firestore.collection(\"parents\").doc(email);\n  return parentRef.get().then(function (doc) {\n    console.log(\"doc para DB <\" + email + \">: \" + JSON.stringify(doc.data()));\n\n    if (!doc.exists) {\n      console.log(\"doc para <\" + email + \"> nÃ£o existe\");\n      return false;\n    }\n\n    return true;\n  }).catch(function (error) {\n    console.log(\"erro para DB <\" + email + \">: \" + JSON.stringify(error));\n    return false;\n  });\n}\n\nfunction updateParentEmail(currentEmail, newEmail) {\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/alterParentEmail?\" + \"email=\" + encodeURIComponent(currentEmail) + \"&new_email=\" + encodeURIComponent(newEmail);\n\n  var request = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var updatedParent;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              updatedParent = {};\n              _context6.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.json();\n              }) // Transform the data into json\n              .then(function (data) {\n                console.log(\"parentUpdated no request update email -> \", JSON.stringify(data));\n                updatedParent = data;\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 3:\n              return _context6.abrupt(\"return\", updatedParent);\n\n            case 4:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function request() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  return request();\n}\n/*\r\n * export PDF with parent data\r\n * */\n\n\nfunction exportParentToPDF(email) {\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/exportSingleParentPDF?\" + \"id=\" + encodeURIComponent(email);\n\n  var request = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n      var file;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              file = new Blob();\n              _context7.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.blob();\n              }) // Transform the data into blob / file\n              .then(function (data) {\n                console.log(\"Export PDF success\");\n                file = data;\n              }).catch(function (error) {\n                console.log(\"Export error: \" + error);\n              });\n\n            case 3:\n              return _context7.abrupt(\"return\", file);\n\n            case 4:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function request() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  return request();\n}\n/*\r\n * export CSV with parent data\r\n * */\n\n\nfunction exportParentToCSV(email) {\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/exportSingleParentCSV?\" + \"id=\" + encodeURIComponent(email);\n\n  var request = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n      var file;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              file = null;\n              _context8.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.blob();\n              }) // Transform the data into blob / file\n              .then(function (data) {\n                console.log(\"Export CSV success\");\n                file = data;\n              }).catch(function (error) {\n                console.log(\"Export error: \" + error);\n              });\n\n            case 3:\n              return _context8.abrupt(\"return\", file);\n\n            case 4:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function request() {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  return request();\n}\n/*\r\n * export all parents data to a CSV\r\n * */\n\n\nfunction exportAllParentsToCSV() {\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/exportParentCSV\";\n\n  var request = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n      var file;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              file = null;\n              _context9.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.blob();\n              }) // Transform the data into blob / file\n              .then(function (data) {\n                console.log(\"Export parents CSV success\");\n                file = data;\n              }).catch(function (error) {\n                console.log(\"Export error: \" + error);\n              });\n\n            case 3:\n              return _context9.abrupt(\"return\", file);\n\n            case 4:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n\n    return function request() {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  return request();\n}\n/*\r\n * export all children data to a CSV\r\n * */\n\n\nfunction exportAllChildrenToCSV() {\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/exportEducandosCSV\";\n\n  var request = /*#__PURE__*/function () {\n    var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n      var file;\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              file = null;\n              _context10.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.blob();\n              }) // Transform the data into blob / file\n              .then(function (data) {\n                console.log(\"Export children CSV success\");\n                file = data;\n              }).catch(function (error) {\n                console.log(\"Export error: \" + error);\n              });\n\n            case 3:\n              return _context10.abrupt(\"return\", file);\n\n            case 4:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n\n    return function request() {\n      return _ref10.apply(this, arguments);\n    };\n  }();\n\n  return request();\n}\n/*\r\n * export cases to PDF\r\n * */\n\n\nfunction exportAllCasosToPDF() {\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/exportCasosPDF\";\n\n  var request = /*#__PURE__*/function () {\n    var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n      var file;\n      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              file = new Blob();\n              _context11.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.blob();\n              }) // Transform the data into blob / file\n              .then(function (data) {\n                console.log(\"Export PDF success\");\n                file = data;\n              }).catch(function (error) {\n                console.log(\"Export error: \" + error);\n              });\n\n            case 3:\n              return _context11.abrupt(\"return\", file);\n\n            case 4:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11);\n    }));\n\n    return function request() {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n\n  return request();\n}\n/*\r\n * delete user account\r\n * */\n\n\nfunction deleteAccount(email) {\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/deleteAccount?\" + \"email=\" + encodeURIComponent(email);\n\n  var request = /*#__PURE__*/function () {\n    var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n      var deletedParent;\n      return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              deletedParent = {};\n              _context12.next = 3;\n              return fetch(uri).then(function (resp) {\n                return resp.json();\n              }) // Transform the data into blob / file\n              .then(function (data) {\n                if (data.error == null) {\n                  console.log(\"Parent removed successfully\");\n                } else {\n                  console.log(data.error);\n                }\n\n                deletedParent = data;\n              }).catch(function (error) {\n                console.log(\"Delete account error: \" + error);\n              });\n\n            case 3:\n              return _context12.abrupt(\"return\", deletedParent);\n\n            case 4:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, _callee12);\n    }));\n\n    return function request() {\n      return _ref12.apply(this, arguments);\n    };\n  }();\n\n  return request();\n}\n\nfunction deleteAccountEmailNotification(nome, email) {\n  var project_id = firebaseConfig.projectId;\n  var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/sendAccountEliminationEmail?\" + \"email=\" + email + \"&\" + \"nome=\" + nome;\n\n  var request = /*#__PURE__*/function () {\n    var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13() {\n      return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              _context13.next = 2;\n              return fetch(uri).then().catch(function (error) {\n                console.log(\"Error sending account delete email: \" + error);\n              });\n\n            case 2:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee13);\n    }));\n\n    return function request() {\n      return _ref13.apply(this, arguments);\n    };\n  }();\n\n  return request();\n}\n/*\r\n * send email to parent to notify it was imported to platform\r\n */\n\n\nfunction sendChangeEmailAuth(_x2, _x3) {\n  return _sendChangeEmailAuth.apply(this, arguments);\n}\n\nfunction _sendChangeEmailAuth() {\n  _sendChangeEmailAuth = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17(nome, email) {\n    var project_id, uri, request;\n    return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n      while (1) {\n        switch (_context17.prev = _context17.next) {\n          case 0:\n            project_id = firebaseConfig.projectId;\n            uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/sendAuthenticationEmailAfterEmailChange?\" + \"email=\" + encodeURIComponent(email) + \"&\" + \"nome=\" + encodeURIComponent(nome);\n            window.localStorage.setItem(\"emailForSignIn\", email);\n\n            request = /*#__PURE__*/function () {\n              var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16() {\n                return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n                  while (1) {\n                    switch (_context16.prev = _context16.next) {\n                      case 0:\n                        _context16.next = 2;\n                        return fetch(uri).then(function () {}).catch(function (error) {\n                          console.log(\"Error sending newEmail email: \" + error);\n                        });\n\n                      case 2:\n                      case \"end\":\n                        return _context16.stop();\n                    }\n                  }\n                }, _callee16);\n              }));\n\n              return function request() {\n                return _ref15.apply(this, arguments);\n              };\n            }();\n\n            return _context17.abrupt(\"return\", request());\n\n          case 5:\n          case \"end\":\n            return _context17.stop();\n        }\n      }\n    }, _callee17);\n  }));\n  return _sendChangeEmailAuth.apply(this, arguments);\n}\n\nexport { fetchUserDoc, userLogOut, mapParamsToInputType, getNewParams, addEducandoToParent, deleteEducandoFromParent, updateEducando, updateParent, uploadProfilePhoto, uploadChildPhoto, emailExistsInFBAuth, emailExistsInDB, updateParentEmail, sendChangeEmailAuth, exportParentToPDF, exportParentToCSV, exportAllParentsToCSV, exportAllChildrenToCSV, deleteAccount, uploadAssocLogo, exportAllCasosToPDF, deleteAccountEmailNotification };","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/firebase_scripts/profile_functions.js"],"names":["firebase_auth","firebaseConfig","firestore","storageRef","languageCode","newParametersEntities","newParametersInputTypes","newParametersTypes","parentsParameters","studentsParameters","v4","uuidv4","fetchUserDoc","email","console","log","project_id","projectId","uri","encodeURIComponent","request","userDoc","fetch","then","resp","json","data","JSON","stringify","catch","error","userLogOut","signOut","window","localStorage","removeItem","location","getNewParams","paramsDoc","mapParamsToInputType","inputTypesDoc","parentParams","parent","childParams","student","parentParamsTypes","childParamsTypes","p","TEXT","inputType","type","inputStep","step","INT","FLOAT","updateEducando","parentEmail","educandoDoc","oldName","localUser","parse","getItem","children","CHILDREN","i","currentChild","NAME","childrenDesignation","newChildrenField","updatedParent","updateParent","parentDoc","uploadProfilePhoto","photoFile","newPhotoPath","name","newPhotoRef","child","put","uploadChildPhoto","uploadAssocLogo","addEducandoToParent","newChild","photo","childJson","PHOTO","deleteEducandoFromParent","childName","emailExistsInFBAuth","fetchSignInMethodsForEmail","providers","length","e","emailExistsInDB","parentRef","collection","doc","get","exists","updateParentEmail","currentEmail","newEmail","exportParentToPDF","file","Blob","blob","exportParentToCSV","exportAllParentsToCSV","exportAllChildrenToCSV","exportAllCasosToPDF","deleteAccount","deletedParent","deleteAccountEmailNotification","nome","sendChangeEmailAuth","setItem"],"mappings":"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","sourcesContent":["import {\r\n  firebase_auth,\r\n  firebaseConfig,\r\n  firestore,\r\n  storageRef,\r\n} from \"../firebase-config\";\r\nimport {\r\n  languageCode,\r\n  newParametersEntities,\r\n  newParametersInputTypes,\r\n  newParametersTypes,\r\n  parentsParameters,\r\n  studentsParameters,\r\n} from \"../utils/general_utils\";\r\n\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nasync function fetchUserDoc(email) {\r\n  console.log(\"profile email to fetch: \" + email);\r\n\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/getParent?\" +\r\n    \"id=\" +\r\n    encodeURIComponent(email);\r\n\r\n  //console.log(\"profile uri: \" + uri);\r\n\r\n  const request = async () => {\r\n    let userDoc = {};\r\n    await fetch(uri)\r\n      .then((resp) => resp.json()) // Transform the data into json\r\n      .then(function (data) {\r\n        console.log(\"user recebido -> \", JSON.stringify(data));\r\n        userDoc = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n\r\n    return userDoc;\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\nfunction userLogOut() {\r\n  firebase_auth\r\n    .signOut()\r\n    .then(function () {\r\n      // Sign-out successful.\r\n      // clear local storage\r\n      window.localStorage.removeItem(\"userDoc\");\r\n      window.localStorage.removeItem(\"newParamsInputTypes\");\r\n      window.localStorage.removeItem(\"assocDoc\");\r\n      window.localStorage.removeItem(\"admin\");\r\n      window.localStorage.removeItem(\"email\");\r\n      //window.localStorage.removeItem(\"emailForSignIn\");\r\n      window.location = \"/login\";\r\n    })\r\n    .catch(function (error) {\r\n      // An error happened.\r\n      console.log(\"Error logging out: \" + error);\r\n    });\r\n}\r\n\r\nfunction getNewParams() {\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/getAllNewParams\";\r\n\r\n  //console.log(\"new params uri: \" + uri);\r\n\r\n  const request = async () => {\r\n    let paramsDoc = {};\r\n    await fetch(uri)\r\n      .then((resp) => resp.json()) // Transform the data into json\r\n      .then(function (data) {\r\n        //console.log(\"paramsDoc recebido -> \", JSON.stringify(data));\r\n        paramsDoc = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"erro no fetch de params: \" + error);\r\n      });\r\n\r\n    return paramsDoc;\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\nfunction mapParamsToInputType(paramsDoc) {\r\n  let inputTypesDoc = {};\r\n  let parentParams = paramsDoc[newParametersEntities.parent[languageCode]];\r\n  let childParams = paramsDoc[newParametersEntities.student[languageCode]];\r\n\r\n  let parentParamsTypes = {};\r\n  let childParamsTypes = {};\r\n\r\n  if (parentParams != null) {\r\n    for (let p in parentParams) {\r\n      if (parentParams[p] === newParametersTypes.TEXT[languageCode]) {\r\n        const inputType = newParametersInputTypes.TEXT.type;\r\n        const inputStep = newParametersInputTypes.TEXT.step;\r\n        parentParamsTypes[p] = { type: inputType, step: inputStep };\r\n      } else if (parentParams[p] === newParametersTypes.INT[languageCode]) {\r\n        const inputType = newParametersInputTypes.INT.type;\r\n        const inputStep = newParametersInputTypes.INT.step;\r\n        parentParamsTypes[p] = { type: inputType, step: inputStep };\r\n      } else if (parentParams[p] === newParametersTypes.FLOAT[languageCode]) {\r\n        const inputType = newParametersInputTypes.FLOAT.type;\r\n        const inputStep = newParametersInputTypes.FLOAT.step;\r\n        parentParamsTypes[p] = { type: inputType, step: inputStep };\r\n      }\r\n    }\r\n\r\n    inputTypesDoc[\r\n      newParametersEntities.parent[languageCode]\r\n    ] = parentParamsTypes;\r\n  }\r\n\r\n  if (childParams != null) {\r\n    for (let p in childParams) {\r\n      if (childParams[p] === newParametersTypes.TEXT[languageCode]) {\r\n        const inputType = newParametersInputTypes.TEXT.type;\r\n        const inputStep = newParametersInputTypes.TEXT.step;\r\n        childParamsTypes[p] = { type: inputType, step: inputStep };\r\n      } else if (childParams[p] === newParametersTypes.INT[languageCode]) {\r\n        const inputType = newParametersInputTypes.INT.type;\r\n        const inputStep = newParametersInputTypes.INT.step;\r\n        childParamsTypes[p] = { type: inputType, step: inputStep };\r\n      } else if (childParams[p] === newParametersTypes.FLOAT[languageCode]) {\r\n        const inputType = newParametersInputTypes.FLOAT.type;\r\n        const inputStep = newParametersInputTypes.FLOAT.step;\r\n        childParamsTypes[p] = { type: inputType, step: inputStep };\r\n      }\r\n    }\r\n\r\n    inputTypesDoc[\r\n      newParametersEntities.student[languageCode]\r\n    ] = childParamsTypes;\r\n  }\r\n\r\n  // like:  {\"um parametro\":{\"type\":\"text\",\"step\":null},\"PÃ³lo\":{\"type\":\"text\",\"step\":null},\"Modalidade\":{\"type\":\"text\",\"step\":null},\"Regime\":{\"type\":\"text\",\"step\":null},\"Grau\":{\"type\":\"number\",\"step\":\"1\"}}\r\n  return inputTypesDoc;\r\n}\r\n\r\nfunction updateEducando(parentEmail, educandoDoc, oldName) {\r\n  console.log(\"educandoDoc -> \" + JSON.stringify(educandoDoc));\r\n\r\n  let localUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\r\n  let children = localUser[parentsParameters.CHILDREN[languageCode]];\r\n\r\n  for (let i in children) {\r\n    let currentChild = children[i];\r\n    // find child with that name to update it\r\n    if (currentChild[studentsParameters.NAME[languageCode]] === oldName) {\r\n      children[i] = educandoDoc;\r\n      break;\r\n    }\r\n  }\r\n  const childrenDesignation = parentsParameters.CHILDREN[languageCode];\r\n  const newChildrenField = { [childrenDesignation]: children };\r\n\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/updateParent?\" +\r\n    \"id=\" +\r\n    parentEmail +\r\n    \"&doc=\" +\r\n    encodeURIComponent(JSON.stringify(newChildrenField));\r\n\r\n  const request = async () => {\r\n    let updatedParent = {};\r\n    await fetch(uri)\r\n      .then((resp) => resp.json()) // Transform the data into json\r\n      .then(function (data) {\r\n        console.log(\r\n          \"parentUpdated no request update child -> \",\r\n          JSON.stringify(data)\r\n        );\r\n        updatedParent = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n\r\n    return updatedParent;\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\nfunction updateParent(parentEmail, parentDoc) {\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/updateParent?\" +\r\n    \"id=\" +\r\n    parentEmail +\r\n    \"&doc=\" +\r\n    encodeURIComponent(JSON.stringify(parentDoc));\r\n\r\n  const request = async () => {\r\n    let updatedParent = {};\r\n    await fetch(uri)\r\n      .then((resp) => resp.json()) // Transform the data into json\r\n      .then(function (data) {\r\n        console.log(\r\n          \"parentUpdated no request update info -> \",\r\n          JSON.stringify(data)\r\n        );\r\n        updatedParent = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n\r\n    return updatedParent;\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\nfunction uploadProfilePhoto(photoFile) {\r\n  // unique file name\r\n  const newPhotoPath = \"profilePhotos/\" + uuidv4() + \"-\" + photoFile.name;\r\n  const newPhotoRef = storageRef.child(newPhotoPath);\r\n  return newPhotoRef.put(photoFile);\r\n}\r\n\r\nfunction uploadChildPhoto(photoFile) {\r\n  // unique file name\r\n  const newPhotoPath = \"childPhotos/\" + uuidv4() + \"-\" + photoFile.name;\r\n  const newPhotoRef = storageRef.child(newPhotoPath);\r\n  return newPhotoRef.put(photoFile);\r\n}\r\n\r\nfunction uploadAssocLogo(photoFile) {\r\n  // unique file name\r\n  const newPhotoPath = \"logo/\" + uuidv4() + \"-\" + photoFile.name;\r\n  const newPhotoRef = storageRef.child(newPhotoPath);\r\n  return newPhotoRef.put(photoFile);\r\n}\r\n\r\n/*\r\n * function to add a child to a parent\r\n * */\r\nfunction addEducandoToParent(parentEmail, newChild, photo) {\r\n  console.log(\"newChild received -> \" + JSON.stringify(newChild));\r\n\r\n  let childJson = newChild;\r\n  childJson[studentsParameters.PHOTO[languageCode]] = photo;\r\n\r\n  console.log(\"childJson with photo -> \" + JSON.stringify(childJson));\r\n\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/addEducando?\" +\r\n    \"id=\" +\r\n    parentEmail +\r\n    \"&educando=\" +\r\n    encodeURIComponent(JSON.stringify(childJson));\r\n\r\n  const request = async () => {\r\n    let updatedParent = {};\r\n    await fetch(uri)\r\n      .then((resp) => resp.json()) // Transform the data into json\r\n      .then(function (data) {\r\n        console.log(\r\n          \"parentUpdated no request add child -> \",\r\n          JSON.stringify(data)\r\n        );\r\n        updatedParent = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n\r\n    return updatedParent;\r\n  };\r\n\r\n  return request();\r\n\r\n  /*\r\n  let parentRef = firestore.collection('parents').doc(parentEmail);\r\n  const childrenDesignation = parentsParameters.CHILDREN[languageCode];\r\n\r\n  return parentRef.get()\r\n    .then((doc) => {\r\n      if (!doc.exists) {\r\n        console.log('No such document for parent <' + parentEmail + '> !');\r\n      }\r\n      else {\r\n        let parent = doc.data();\r\n\r\n        let children = parent[childrenDesignation];\r\n        console.log(\"children array -> \" + JSON.stringify(children));\r\n        children.push(childJson);\r\n        console.log(\"children novo -> \" + JSON.stringify(childJson));\r\n        parent[childrenDesignation] = children;\r\n        console.log(\"parent final -> \" + JSON.stringify(parent));\r\n\r\n        return parent;\r\n      }\r\n    })\r\n    .then((parent) => {\r\n      return parentRef.update({[childrenDesignation] : parent[childrenDesignation]})\r\n        .then(() => {return parent});\r\n    })\r\n    .catch((err) => {\r\n      console.log('Error getting parent <' + parentEmail + '> : ' + err);\r\n    });*/\r\n}\r\n\r\nfunction deleteEducandoFromParent(parentEmail, childName) {\r\n  console.log(\"childName to erase received -> \" + childName);\r\n\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/removeEducando?\" +\r\n    \"id=\" +\r\n    encodeURIComponent(parentEmail) +\r\n    \"&nome_educando=\" +\r\n    encodeURIComponent(childName);\r\n\r\n  const request = async () => {\r\n    let updatedParent = {};\r\n    await fetch(uri)\r\n      .then((resp) => resp.json()) // Transform the data into json\r\n      .then(function (data) {\r\n        //console.log(\"parentUpdated no request delete child -> \", JSON.stringify(data));\r\n        updatedParent = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n\r\n    return updatedParent;\r\n  };\r\n\r\n  return request();\r\n\r\n  /*let parentRef = firestore.collection('parents').doc(parentEmail);\r\n  const childrenDesignation = parentsParameters.CHILDREN[languageCode];\r\n\r\n  return parentRef.get()\r\n    .then((doc) => {\r\n      if (!doc.exists) {\r\n        console.log('No such document for parent <' + parentEmail + '> !');\r\n      }\r\n      else {\r\n        let parent = doc.data();\r\n\r\n        let children = parent[childrenDesignation];\r\n\r\n        for(let i in children){\r\n          const currentName = children[i][studentsParameters.NAME[languageCode]];\r\n          console.log(\"currentName -> \" + currentName);\r\n          if(currentName===childName){\r\n            console.log(\"SPLICE!\");\r\n            children.splice(i,1);\r\n            break;\r\n          }\r\n        }\r\n\r\n        console.log(\"children array novo -> \" + JSON.stringify(children));\r\n        parent[childrenDesignation] = children;\r\n        console.log(\"parent final -> \" + JSON.stringify(parent));\r\n\r\n        return parent;\r\n      }\r\n    })\r\n    .then((parent) => {\r\n      return parentRef.update({[childrenDesignation] : parent[childrenDesignation]})\r\n        .then(() => {return parent});\r\n    })\r\n    .catch((err) => {\r\n      console.log('Error getting parent <' + parentEmail + '> : ' + err);\r\n    });*/\r\n}\r\n\r\n/*\r\n * function to check if the current email exists in Firebase auth\r\n * */\r\n\r\nfunction emailExistsInFBAuth(email) {\r\n  return firebase_auth\r\n    .fetchSignInMethodsForEmail(email)\r\n    .then((providers) => {\r\n      // if no providers, then user does no exist\r\n      return !(!providers || providers.length === 0);\r\n    })\r\n    .catch((e) => {\r\n      return false;\r\n    });\r\n}\r\n\r\n/*\r\n * function to check if an email exists in DB\r\n * */\r\nfunction emailExistsInDB(email) {\r\n  console.log(\"email to check in DB: \" + email);\r\n\r\n  // in case of, for some reason, the current email is not in the DB\r\n  let parentRef = firestore.collection(\"parents\").doc(email);\r\n\r\n  return parentRef\r\n    .get()\r\n    .then((doc) => {\r\n      console.log(\"doc para DB <\" + email + \">: \" + JSON.stringify(doc.data()));\r\n      if (!doc.exists) {\r\n        console.log(\"doc para <\" + email + \"> nÃ£o existe\");\r\n        return false;\r\n      }\r\n      return true;\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"erro para DB <\" + email + \">: \" + JSON.stringify(error));\r\n      return false;\r\n    });\r\n}\r\n\r\nfunction updateParentEmail(currentEmail, newEmail) {\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/alterParentEmail?\" +\r\n    \"email=\" +\r\n    encodeURIComponent(currentEmail) +\r\n    \"&new_email=\" +\r\n    encodeURIComponent(newEmail);\r\n\r\n  const request = async () => {\r\n    let updatedParent = {};\r\n    await fetch(uri)\r\n      .then((resp) => resp.json()) // Transform the data into json\r\n      .then(function (data) {\r\n        console.log(\r\n          \"parentUpdated no request update email -> \",\r\n          JSON.stringify(data)\r\n        );\r\n        updatedParent = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n\r\n    return updatedParent;\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\n/*\r\n * export PDF with parent data\r\n * */\r\nfunction exportParentToPDF(email) {\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/exportSingleParentPDF?\" +\r\n    \"id=\" +\r\n    encodeURIComponent(email);\r\n\r\n  const request = async () => {\r\n    let file = new Blob();\r\n    await fetch(uri)\r\n      .then((resp) => resp.blob()) // Transform the data into blob / file\r\n      .then(function (data) {\r\n        console.log(\"Export PDF success\");\r\n        file = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"Export error: \" + error);\r\n      });\r\n\r\n    return file;\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\n/*\r\n * export CSV with parent data\r\n * */\r\nfunction exportParentToCSV(email) {\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/exportSingleParentCSV?\" +\r\n    \"id=\" +\r\n    encodeURIComponent(email);\r\n\r\n  const request = async () => {\r\n    let file = null;\r\n    await fetch(uri)\r\n      .then((resp) => resp.blob()) // Transform the data into blob / file\r\n      .then(function (data) {\r\n        console.log(\"Export CSV success\");\r\n        file = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"Export error: \" + error);\r\n      });\r\n\r\n    return file;\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\n/*\r\n * export all parents data to a CSV\r\n * */\r\nfunction exportAllParentsToCSV() {\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/exportParentCSV\";\r\n\r\n  const request = async () => {\r\n    let file = null;\r\n    await fetch(uri)\r\n      .then((resp) => resp.blob()) // Transform the data into blob / file\r\n      .then(function (data) {\r\n        console.log(\"Export parents CSV success\");\r\n        file = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"Export error: \" + error);\r\n      });\r\n\r\n    return file;\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\n/*\r\n * export all children data to a CSV\r\n * */\r\nfunction exportAllChildrenToCSV() {\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/exportEducandosCSV\";\r\n\r\n  const request = async () => {\r\n    let file = null;\r\n    await fetch(uri)\r\n      .then((resp) => resp.blob()) // Transform the data into blob / file\r\n      .then(function (data) {\r\n        console.log(\"Export children CSV success\");\r\n        file = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"Export error: \" + error);\r\n      });\r\n\r\n    return file;\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\n/*\r\n * export cases to PDF\r\n * */\r\nfunction exportAllCasosToPDF() {\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/exportCasosPDF\";\r\n\r\n  const request = async () => {\r\n    let file = new Blob();\r\n    await fetch(uri)\r\n      .then((resp) => resp.blob()) // Transform the data into blob / file\r\n      .then(function (data) {\r\n        console.log(\"Export PDF success\");\r\n        file = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"Export error: \" + error);\r\n      });\r\n\r\n    return file;\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\n/*\r\n * delete user account\r\n * */\r\nfunction deleteAccount(email) {\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/deleteAccount?\" +\r\n    \"email=\" +\r\n    encodeURIComponent(email);\r\n\r\n  const request = async () => {\r\n    let deletedParent = {};\r\n    await fetch(uri)\r\n      .then((resp) => resp.json()) // Transform the data into blob / file\r\n      .then(function (data) {\r\n        if(data.error==null){\r\n          console.log(\"Parent removed successfully\");\r\n        }\r\n        else{\r\n          console.log(data.error);\r\n        }\r\n        deletedParent = data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"Delete account error: \" + error);\r\n      });\r\n\r\n    return deletedParent;\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\nfunction deleteAccountEmailNotification(nome, email) {\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/sendAccountEliminationEmail?\" +\r\n    \"email=\" +\r\n    email +\r\n    \"&\" +\r\n    \"nome=\" +\r\n    nome;\r\n\r\n  const request = async () => {\r\n    await fetch(uri)\r\n      .then()\r\n      .catch(function (error) {\r\n        console.log(\"Error sending account delete email: \" + error);\r\n      });\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\n/*\r\n * send email to parent to notify it was imported to platform\r\n */\r\nasync function sendChangeEmailAuth(nome, email) {\r\n  const project_id = firebaseConfig.projectId;\r\n  let uri =\r\n    \"https://us-central1-\" +\r\n    project_id +\r\n    \".cloudfunctions.net/api/sendAuthenticationEmailAfterEmailChange?\" +\r\n    \"email=\" +\r\n    encodeURIComponent(email) +\r\n    \"&\" +\r\n    \"nome=\" +\r\n    encodeURIComponent(nome);\r\n\r\n  window.localStorage.setItem(\"emailForSignIn\", email);\r\n\r\n  const request = async () => {\r\n    await fetch(uri)\r\n      .then(() => {})\r\n      .catch(function (error) {\r\n        console.log(\"Error sending newEmail email: \" + error);\r\n      });\r\n  };\r\n\r\n  return request();\r\n}\r\n\r\nexport {\r\n  fetchUserDoc,\r\n  userLogOut,\r\n  mapParamsToInputType,\r\n  getNewParams,\r\n  addEducandoToParent,\r\n  deleteEducandoFromParent,\r\n  updateEducando,\r\n  updateParent,\r\n  uploadProfilePhoto,\r\n  uploadChildPhoto,\r\n  emailExistsInFBAuth,\r\n  emailExistsInDB,\r\n  updateParentEmail,\r\n  sendChangeEmailAuth,\r\n  exportParentToPDF,\r\n  exportParentToCSV,\r\n  exportAllParentsToCSV,\r\n  exportAllChildrenToCSV,\r\n  deleteAccount,\r\n  uploadAssocLogo,\r\n  exportAllCasosToPDF,\r\n  deleteAccountEmailNotification,\r\n};\r\n"]},"metadata":{},"sourceType":"module"}