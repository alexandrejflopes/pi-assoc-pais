{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\views\\\\CasoDetailed.js\";\n\n/* eslint jsx-a11y/anchor-is-valid: 0 */\n// suporte para o jQuery\n\n/*eslint-env jquery*/\nimport React from \"react\";\nimport { Container, Row, Col, Card, CardHeader, CardBody, CardFooter, Form, FormTextarea, FormInput, Badge, Button, ButtonGroup } from \"shards-react\";\nimport { Redirect } from \"react-router\";\nimport { languageCode, parentsParameters, showToast, toastTypes } from \"../utils/general_utils\";\nimport { addDocTitleMissing, addDocLinkMissing, addDocError, addCommentMissing, deleteCommentError, sucessoGeral } from \"../utils/messages_strings\";\nimport { firebaseConfig } from \"../firebase-config\";\nimport PageTitle from \"../components/common/PageTitle\";\nimport { initCasosExemplo, showAvailableCasos } from \"../firebase_scripts/casos\";\nimport CasoDetailOverview from \"../components/caso-detail/CasoDetailOverview\";\nimport * as moment from \"moment\";\n\nvar dateFormat = require(\"dateformat\");\n\nvar Casos = /*#__PURE__*/function (_React$Component) {\n  _inherits(Casos, _React$Component);\n\n  var _super = _createSuper(Casos);\n\n  function Casos(props) {\n    var _this;\n\n    _classCallCheck(this, Casos);\n\n    _this = _super.call(this, props); //console.log(\"Props: \" + JSON.stringify(props));\n\n    var redirect = \"\";\n    var title = \"\";\n    var id = \"\";\n    var username = \"\";\n    var descricao = \"\";\n    var data = \"\";\n    var arquivado = false;\n    var ficheiros = [];\n    var comentarios = [];\n    var membros = [];\n\n    if (!props.history.location.state) {\n      //Buscar id ao url\n      //console.log(window.location.href);\n      var url = window.location.href;\n      var urlParts = url.toString().split(\"/\");\n      id = urlParts[urlParts.length - 1];\n    } else {\n      var caso = props.history.location.state.caso;\n      id = caso.id;\n      title = caso.titulo;\n      /*\r\n      data = new Date(caso.data_criacao._seconds * 1000).toString();\r\n      data = moment(data).format(\"DD/MM/YYYY\").toString();\r\n      username = caso.autor.nome;\r\n      descricao = caso.descricao;\r\n      arquivado = caso.arquivado;\r\n      ficheiros = caso.ficheiros;\r\n      comentarios = caso.observacoes;\r\n      */\n    }\n\n    _this.state = {\n      //redirect: null,\n      loading: true,\n      currentUsername: \"\",\n      id: id,\n      title: title,\n      data: data,\n      username: username,\n      descricao: descricao,\n      redirect: redirect,\n      docs: ficheiros,\n      arquivado: arquivado,\n      comments: comentarios,\n      membros: membros,\n      addingDoc: false,\n      addingComment: false,\n      titleToAdd: \"\",\n      linkToAdd: \"\",\n      commentToAdd: \"\",\n      descricaoToAdd: \"\",\n      buttonSave: \"Gravar\",\n      buttonCommentSave: \"Gravar\",\n      buttonSaveDescription: \"Gravar\",\n      buttonDisabled: false,\n      buttonCommentDisabled: false,\n      editingComment: false,\n      buttonsEditDeleteDisable: false,\n      commentEditingID: \"\",\n      buttonEditDisabled: false,\n      editingDescription: false,\n      buttonEditDescriptionDisabled: false,\n      buttonsEditDescriptionDisabled: false,\n      emailAutor: \"\"\n    };\n    _this.getCasoWithoutFiles = _this.getCasoWithoutFiles.bind(_assertThisInitialized(_this));\n    _this.getCaso = _this.getCaso.bind(_assertThisInitialized(_this));\n    _this.addDoc = _this.addDoc.bind(_assertThisInitialized(_this));\n    _this.addComment = _this.addComment.bind(_assertThisInitialized(_this));\n    _this.cancelDoc = _this.cancelDoc.bind(_assertThisInitialized(_this));\n    _this.cancelComment = _this.cancelComment.bind(_assertThisInitialized(_this));\n    _this.finalizeAddDoc = _this.finalizeAddDoc.bind(_assertThisInitialized(_this));\n    _this.finalizeAddComment = _this.finalizeAddComment.bind(_assertThisInitialized(_this));\n    _this.handleTitleToAddChange = _this.handleTitleToAddChange.bind(_assertThisInitialized(_this));\n    _this.handleLinkToAddChange = _this.handleLinkToAddChange.bind(_assertThisInitialized(_this));\n    _this.handleCommentToAddChange = _this.handleCommentToAddChange.bind(_assertThisInitialized(_this));\n    _this.deleteComment = _this.deleteComment.bind(_assertThisInitialized(_this));\n    _this.editComment = _this.editComment.bind(_assertThisInitialized(_this));\n    _this.cancelEditComment = _this.cancelEditComment.bind(_assertThisInitialized(_this));\n    _this.finalizeEditComment = _this.finalizeEditComment.bind(_assertThisInitialized(_this));\n    _this.editDescription = _this.editDescription.bind(_assertThisInitialized(_this));\n    _this.cancelEditDescription = _this.cancelEditDescription.bind(_assertThisInitialized(_this));\n    _this.finalizeEditDescription = _this.finalizeEditDescription.bind(_assertThisInitialized(_this));\n    _this.handleDescricaoToAddChange = _this.handleDescricaoToAddChange.bind(_assertThisInitialized(_this));\n    _this.arquiveOrReverse = _this.arquiveOrReverse.bind(_assertThisInitialized(_this));\n    _this.updateTitle = _this.updateTitle.bind(_assertThisInitialized(_this));\n    _this.updateMembers = _this.updateMembers.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Casos, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n\n      if (currentUser !== null) {\n        var user = currentUser.Nome;\n        this.setState({\n          currentUsername: user\n        }); //No get caso devemos ver se currentUsername está nos membros, se não estiver, fazer redirect para casos\n      } else {\n        //Redirect to login\n        var redirect = /*#__PURE__*/React.createElement(Redirect, {\n          to: {\n            pathname: \"/\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 9\n          }\n        });\n        this.setState({\n          redirect: redirect\n        });\n      } //Get caso from db\n\n\n      this.getCaso();\n    }\n  }, {\n    key: \"getCaso\",\n    value: function getCaso() {\n      var _this$state = this.state,\n          id = _this$state.id,\n          currentUsername = _this$state.currentUsername;\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n\n      if (currentUser != null || currentUsername != \"\") {\n        var admin = false;\n\n        if (currentUser != null) {\n          admin = currentUser.Admin;\n        }\n\n        var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getCaso?\" + \"id=\" + id;\n\n        var request = /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return fetch(uri).then(function (resp) {\n                      return resp.json();\n                    }) // Transform the data into json\n                    .then(function (data) {\n                      var docNonExisting = false;\n\n                      if (data != null) {\n                        if (data.error != null) {\n                          docNonExisting = true;\n                        }\n                      }\n\n                      var redirect = null;\n\n                      if (docNonExisting) {\n                        redirect = /*#__PURE__*/React.createElement(Redirect, {\n                          to: {\n                            pathname: \"/casos\"\n                          },\n                          __self: this,\n                          __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 206,\n                            columnNumber: 17\n                          }\n                        });\n                        this_.setState({\n                          redirect: redirect,\n                          loading: false\n                        });\n                      } else {\n                        var title = data.titulo;\n                        var date = new Date(data.data_criacao._seconds * 1000).toString();\n                        date = moment(date).format(\"DD/MM/YYYY\").toString();\n                        var username = data.autor.nome;\n                        var emailAutor = data.autor.id;\n                        var descricao = data.descricao;\n                        var arquivado = data.arquivado;\n                        var ficheiros = data.ficheiros;\n                        var comentarios = data.observacoes;\n                        var membros = data.membros;\n                        var privado = data.privado;\n                        var userInCaso = true;\n\n                        if (privado && !admin) {\n                          userInCaso = false;\n\n                          for (var i = 0; i < membros.length; i++) {\n                            if (membros[i].nome == currentUsername || membros[i].nome == currentUser.Nome) {\n                              userInCaso = true;\n                              break;\n                            }\n                          }\n                        }\n\n                        if (userInCaso == false) {\n                          redirect = /*#__PURE__*/React.createElement(Redirect, {\n                            to: {\n                              pathname: \"/casos\"\n                            },\n                            __self: this,\n                            __source: {\n                              fileName: _jsxFileName,\n                              lineNumber: 247,\n                              columnNumber: 19\n                            }\n                          });\n                        }\n\n                        this_.setState({\n                          redirect: redirect,\n                          title: title,\n                          data: date,\n                          username: username,\n                          descricao: descricao,\n                          arquivado: arquivado,\n                          docs: ficheiros,\n                          comments: comentarios,\n                          membros: membros,\n                          emailAutor: emailAutor,\n                          loading: false\n                        });\n                      }\n                    }).catch(function (error) {\n                      console.log(error);\n                      this_.setState({\n                        loading: false\n                      });\n                    });\n\n                  case 2:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function request() {\n            return _ref.apply(this, arguments);\n          };\n        }();\n\n        request();\n      } else {\n        //Redirect to login\n        var redirect = /*#__PURE__*/React.createElement(Redirect, {\n          to: {\n            pathname: \"/\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 9\n          }\n        });\n        this.setState({\n          redirect: redirect\n        });\n      }\n    }\n  }, {\n    key: \"getCasoWithoutFiles\",\n    value: function getCasoWithoutFiles() {\n      var id = this.state.id;\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getCaso?\" + \"id=\" + id;\n\n      var request = /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return fetch(uri).then(function (resp) {\n                    return resp.json();\n                  }) // Transform the data into json\n                  .then(function (data) {\n                    var title = data.titulo;\n                    var date = new Date(data.data_criacao._seconds * 1000).toString();\n                    date = moment(date).format(\"DD/MM/YYYY\").toString();\n                    var username = data.autor.nome;\n                    var descricao = data.descricao;\n                    var arquivado = data.arquivado;\n                    var comentarios = data.observacoes;\n                    this_.setState({\n                      title: title,\n                      data: date,\n                      username: username,\n                      descricao: descricao,\n                      arquivado: arquivado,\n                      comments: comentarios\n                    });\n                  }).catch(function (error) {\n                    console.log(error);\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function request() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n\n      request();\n    }\n  }, {\n    key: \"handleDescricaoToAddChange\",\n    value: function handleDescricaoToAddChange(e) {\n      this.setState({\n        descricaoToAdd: e.target.value\n      });\n    }\n  }, {\n    key: \"handleTitleToAddChange\",\n    value: function handleTitleToAddChange(e) {\n      this.setState({\n        titleToAdd: e.target.value\n      });\n    }\n  }, {\n    key: \"handleLinkToAddChange\",\n    value: function handleLinkToAddChange(e) {\n      this.setState({\n        linkToAdd: e.target.value\n      });\n    }\n  }, {\n    key: \"handleCommentToAddChange\",\n    value: function handleCommentToAddChange(e) {\n      this.setState({\n        commentToAdd: e.target.value\n      });\n    }\n  }, {\n    key: \"addComment\",\n    value: function addComment() {\n      this.setState({\n        addingComment: true\n      });\n    }\n  }, {\n    key: \"addDoc\",\n    value: function addDoc() {\n      this.setState({\n        addingDoc: true\n      });\n    }\n  }, {\n    key: \"cancelDoc\",\n    value: function cancelDoc() {\n      this.setState({\n        titleToAdd: \"\",\n        linkToAdd: \"\",\n        addingDoc: false\n      });\n    }\n  }, {\n    key: \"cancelComment\",\n    value: function cancelComment() {\n      this.setState({\n        commentToAdd: \"\",\n        addingComment: false\n      });\n    }\n  }, {\n    key: \"finalizeAddDoc\",\n    value: function finalizeAddDoc() {\n      var _this$state2 = this.state,\n          id = _this$state2.id,\n          titleToAdd = _this$state2.titleToAdd,\n          linkToAdd = _this$state2.linkToAdd;\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n\n      if (id != \"\") {\n        if (titleToAdd == \"\") {\n          showToast(addDocTitleMissing[languageCode], 5000, toastTypes.ERROR);\n        } else if (linkToAdd == \"\") {\n          showToast(addDocLinkMissing[languageCode], 5000, toastTypes.ERROR);\n        } else {\n          this_.setState({\n            buttonSave: \"A gravar...\",\n            buttonDisabled: true\n          }); //Guardar na base de dados\n\n          var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/addAnexoCaso?\" + \"id=\" + id + \"&\" + \"nome_ficheiro=\" + encodeURIComponent(titleToAdd) + \"&\" + \"referencia=\" + linkToAdd;\n\n          var request = /*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n              return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                while (1) {\n                  switch (_context3.prev = _context3.next) {\n                    case 0:\n                      _context3.next = 2;\n                      return fetch(uri).then(function (data) {\n                        showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\n                        var documentos = this_.state.docs;\n                        var novoDoc = {};\n                        novoDoc.referencia = linkToAdd;\n                        novoDoc.nome = titleToAdd;\n                        documentos.push(novoDoc);\n                        this_.setState({\n                          titleToAdd: \"\",\n                          linkToAdd: \"\",\n                          addingDoc: false,\n                          docs: documentos,\n                          buttonDisabled: false\n                        }, function () {\n                          this_.getCasoWithoutFiles();\n                        });\n                      }).catch(function (error) {\n                        console.log(error);\n                        showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\n                        this_.setState({\n                          buttonSave: \"Gravar\",\n                          buttonDisabled: false\n                        });\n                      });\n\n                    case 2:\n                    case \"end\":\n                      return _context3.stop();\n                  }\n                }\n              }, _callee3);\n            }));\n\n            return function request() {\n              return _ref3.apply(this, arguments);\n            };\n          }();\n\n          request();\n        }\n      }\n    }\n  }, {\n    key: \"finalizeAddComment\",\n    value: function finalizeAddComment() {\n      var _this$state3 = this.state,\n          id = _this$state3.id,\n          commentToAdd = _this$state3.commentToAdd;\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\n\n      if (currentUser !== null) {\n        var userID = currentUser.id;\n        var username = currentUser.Nome;\n        var photo = currentUser.photo;\n\n        if (id != \"\") {\n          if (commentToAdd == \"\") {\n            showToast(addCommentMissing[languageCode], 5000, toastTypes.ERROR);\n          } else {\n            this_.setState({\n              buttonCommentSave: \"A gravar...\",\n              buttonCommentDisabled: true\n            }); //Guardar na base de dados\n\n            var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/addCommentCaso?\" + \"id=\" + id + \"&\" + \"user_id=\" + userID + \"&\" + \"user_name=\" + username + \"&\" + \"observacao=\" + encodeURIComponent(commentToAdd) + \"&photo=\" + encodeURIComponent(photo);\n\n            var request = /*#__PURE__*/function () {\n              var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n                return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                  while (1) {\n                    switch (_context4.prev = _context4.next) {\n                      case 0:\n                        _context4.next = 2;\n                        return fetch(uri).then(function (data) {\n                          if (data.status && data.status == 200) {\n                            showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\n                            this_.setState({\n                              commentToAdd: \"\",\n                              buttonCommentSave: \"Gravar\",\n                              addingComment: false,\n                              buttonCommentDisabled: false\n                            }, function () {\n                              return this_.getCaso();\n                            });\n                          } else {\n                            showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\n                            this_.setState({\n                              buttonCommentSave: \"Gravar\",\n                              buttonCommentDisabled: false\n                            });\n                          }\n                        }).catch(function (error) {\n                          console.log(error);\n                          showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\n                          this_.setState({\n                            buttonCommentSave: \"Gravar\",\n                            buttonCommentDisabled: false\n                          });\n                        });\n\n                      case 2:\n                      case \"end\":\n                        return _context4.stop();\n                    }\n                  }\n                }, _callee4);\n              }));\n\n              return function request() {\n                return _ref4.apply(this, arguments);\n              };\n            }();\n\n            request();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"deleteComment\",\n    value: function deleteComment(e) {\n      var this_ = this;\n      var id = e.target.id;\n      var project_id = firebaseConfig.projectId;\n      var comment = this.state.comments[id];\n\n      if (comment === undefined) {\n        showToast(deleteCommentError[languageCode], 5000, toastTypes.ERROR);\n      } else {\n        var idCaso = this.state.id;\n        var user_id = comment.user.id;\n        var seconds = comment.tempo._seconds;\n        var nanoseconds = comment.tempo._nanoseconds;\n\n        if (idCaso !== undefined) {\n          var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/removeCommentCaso?\" + \"id=\" + idCaso + \"&user_id=\" + user_id + \"&seconds=\" + seconds + \"&nanoseconds=\" + nanoseconds;\n\n          var request = /*#__PURE__*/function () {\n            var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n              return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                while (1) {\n                  switch (_context5.prev = _context5.next) {\n                    case 0:\n                      _context5.next = 2;\n                      return fetch(uri).then(function (resp) {\n                        return resp.json();\n                      }) // Transform the data into json\n                      .then(function (data) {\n                        showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\n                        var comments = this_.state.comments;\n                        comments.splice(id, 1);\n                        this_.setState({\n                          comments: comments\n                        });\n                      }).catch(function (error) {\n                        console.log(error);\n                      });\n\n                    case 2:\n                    case \"end\":\n                      return _context5.stop();\n                  }\n                }\n              }, _callee5);\n            }));\n\n            return function request() {\n              return _ref5.apply(this, arguments);\n            };\n          }();\n\n          request();\n        } else {\n          console.log(\"erro com id\");\n        }\n      }\n    }\n  }, {\n    key: \"editComment\",\n    value: function editComment(e) {\n      var id = e.target.id;\n      var comment = this.state.comments[id];\n      var conteudo = comment.conteudo;\n      this.setState({\n        editingComment: true,\n        buttonsEditDeleteDisable: true,\n        commentToAdd: conteudo,\n        commentEditingID: id\n      });\n    }\n  }, {\n    key: \"cancelEditComment\",\n    value: function cancelEditComment() {\n      this.setState({\n        editingComment: false,\n        buttonsEditDeleteDisable: false,\n        commentToAdd: \"\",\n        commentEditingID: \"\"\n      });\n    }\n  }, {\n    key: \"finalizeEditComment\",\n    value: function finalizeEditComment(e) {\n      var this_ = this;\n      var id = e.target.id;\n      var comment = this.state.comments[id];\n      var conteudo = this.state.commentToAdd;\n      var idCaso = this.state.id;\n      var user_id = comment.user.id;\n      var seconds = comment.tempo._seconds;\n      var nanoseconds = comment.tempo._nanoseconds;\n      var project_id = firebaseConfig.projectId;\n      this_.setState({\n        buttonCommentSave: \"A gravar...\",\n        buttonEditDisabled: true\n      }); //Guardar na base de dados\n\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/editCommentCaso?\" + \"id=\" + idCaso + \"&\" + \"user_id=\" + user_id + \"&\" + \"seconds=\" + seconds + \"&\" + \"nanoseconds=\" + nanoseconds + \"&\" + \"observacao=\" + conteudo;\n\n      var request = /*#__PURE__*/function () {\n        var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n          return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n            while (1) {\n              switch (_context6.prev = _context6.next) {\n                case 0:\n                  _context6.next = 2;\n                  return fetch(uri).then(function (data) {\n                    showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\n                    console.log(data.status);\n                    var comments = this_.state.comments;\n                    comments[id].conteudo = conteudo;\n                    this_.setState({\n                      commentToAdd: \"\",\n                      editingComment: false,\n                      buttonsEditDeleteDisable: false,\n                      buttonEditDisabled: false,\n                      commentEditingID: \"\",\n                      buttonCommentSave: \"Gravar\",\n                      comments: comments\n                    });\n                  }).catch(function (error) {\n                    console.log(error);\n                    showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\n                    this_.setState({\n                      buttonCommentSave: \"Gravar\",\n                      buttonEditDisabled: false\n                    });\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context6.stop();\n              }\n            }\n          }, _callee6);\n        }));\n\n        return function request() {\n          return _ref6.apply(this, arguments);\n        };\n      }();\n\n      request();\n    }\n  }, {\n    key: \"editDescription\",\n    value: function editDescription(e) {\n      var descricaoToAdd = this.state.descricao;\n      this.setState({\n        editingDescription: true,\n        buttonEditDescriptionDisabled: true,\n        descricaoToAdd: descricaoToAdd\n      });\n    }\n  }, {\n    key: \"cancelEditDescription\",\n    value: function cancelEditDescription(e) {\n      this.setState({\n        editingDescription: false,\n        buttonEditDescriptionDisabled: false,\n        descricaoToAdd: \"\"\n      });\n    }\n  }, {\n    key: \"finalizeEditDescription\",\n    value: function finalizeEditDescription(e) {\n      var this_ = this;\n      var id = this.state.id;\n      var project_id = firebaseConfig.projectId;\n      var descricao = this.state.descricaoToAdd;\n      this_.setState({\n        buttonSaveDescription: \"A gravar...\",\n        buttonsEditDescriptionDisabled: true\n      }); //Guardar na base de dados\n\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/editDescricaoCaso?\" + \"id=\" + id + \"&\" + \"descricao=\" + descricao;\n\n      var request = /*#__PURE__*/function () {\n        var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n          return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n            while (1) {\n              switch (_context7.prev = _context7.next) {\n                case 0:\n                  _context7.next = 2;\n                  return fetch(uri).then(function (data) {\n                    if (data.status && data.status == 200) {\n                      showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\n                      console.log(data.status);\n                      this_.setState({\n                        descricao: descricao,\n                        descricaoToAdd: \"\",\n                        editingDescription: false,\n                        buttonEditDescriptionDisabled: false,\n                        buttonsEditDescriptionDisabled: false,\n                        buttonSaveDescription: \"Gravar\"\n                      });\n                    } else {\n                      showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\n                      this_.setState({\n                        buttonSaveDescription: \"Gravar\",\n                        buttonsEditDescriptionDisabled: false\n                      });\n                    }\n                  }).catch(function (error) {\n                    console.log(error);\n                    showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\n                    this_.setState({\n                      buttonSaveDescription: \"Gravar\",\n                      buttonsEditDescriptionDisabled: false\n                    });\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }\n          }, _callee7);\n        }));\n\n        return function request() {\n          return _ref7.apply(this, arguments);\n        };\n      }();\n\n      request();\n    }\n  }, {\n    key: \"arquiveOrReverse\",\n    value: function arquiveOrReverse() {\n      var _this$state4 = this.state,\n          arquivado = _this$state4.arquivado,\n          id = _this$state4.id;\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var newValue = true;\n\n      if (arquivado) {\n        newValue = false;\n      }\n\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/archiveCaso?\" + \"id=\" + id + \"&\" + \"arquivado=\" + newValue;\n\n      var request = /*#__PURE__*/function () {\n        var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n          return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n            while (1) {\n              switch (_context8.prev = _context8.next) {\n                case 0:\n                  _context8.next = 2;\n                  return fetch(uri).then(function (data) {\n                    if (data.status && data.status == 200) {\n                      showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\n                      this_.setState({\n                        arquivado: newValue\n                      });\n                    } else {\n                      showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\n                    }\n                  }).catch(function (error) {\n                    showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context8.stop();\n              }\n            }\n          }, _callee8);\n        }));\n\n        return function request() {\n          return _ref8.apply(this, arguments);\n        };\n      }();\n\n      request();\n    }\n  }, {\n    key: \"updateTitle\",\n    value: function updateTitle(newTitle) {\n      this.setState({\n        title: newTitle\n      });\n    }\n  }, {\n    key: \"updateMembers\",\n    value: function updateMembers(newListOfMembers) {\n      this.setState({\n        membros: newListOfMembers\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.loading == true) {\n        return /*#__PURE__*/React.createElement(Container, {\n          fluid: true,\n          style: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignContent: \"center\",\n            alignItems: \"center\",\n            position: \"absolute\",\n            left: \"50%\",\n            top: \"50%\",\n            transform: \"translate(-50%, -50%)\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 773,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Row, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 786,\n            columnNumber: 11\n          }\n        }, this.state.redirect), \" \", /*#__PURE__*/React.createElement(\"h1\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 786,\n            columnNumber: 44\n          }\n        }, \"A carregar...\"));\n      } else {\n        return /*#__PURE__*/React.createElement(Container, {\n          fluid: true,\n          className: \"main-content-container px-4\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 791,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Row, {\n          noGutters: true,\n          className: \"page-header py-4\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 792,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(PageTitle, {\n          title: \"\",\n          md: \"12\",\n          className: \"ml-sm-auto mr-sm-auto\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 793,\n            columnNumber: 13\n          }\n        })), /*#__PURE__*/React.createElement(Row, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 795,\n            columnNumber: 11\n          }\n        }, this.state.redirect), /*#__PURE__*/React.createElement(Row, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 796,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Col, {\n          lg: \"6\",\n          style: {\n            \"margin-bottom\": \"15px\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 797,\n            columnNumber: 13\n          }\n        }, this.state.arquivado ? /*#__PURE__*/React.createElement(CasoDetailOverview, {\n          title: this.state.title,\n          id: this.state.id,\n          data: this.state.data,\n          username: this.state.username,\n          emailAutor: this.state.emailAutor,\n          arquivado: true,\n          membros: this.state.membros,\n          updateMembers: this.updateMembers,\n          arquiveOrReverse: this.arquiveOrReverse,\n          updateTitle: this.updateTitle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 799,\n            columnNumber: 17\n          }\n        }) : /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 812,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(CasoDetailOverview, {\n          id: this.state.id,\n          title: this.state.title,\n          data: this.state.data,\n          username: this.state.username,\n          emailAutor: this.state.emailAutor,\n          arquivado: false,\n          membros: this.state.membros,\n          updateMembers: this.updateMembers,\n          arquiveOrReverse: this.arquiveOrReverse,\n          updateTitle: this.updateTitle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 813,\n            columnNumber: 19\n          }\n        }))), /*#__PURE__*/React.createElement(Col, {\n          lg: \"6\",\n          style: {\n            \"margin-bottom\": \"15px\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 828,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Card, {\n          style: {\n            width: \"100%\",\n            \"margin-right\": \"60px\"\n          },\n          small: true,\n          className: \"mb-4 pt-3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 829,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(CardHeader, {\n          className: \"border-bottom text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 834,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"h4\", {\n          style: {\n            float: \"left\"\n          },\n          className: \"mb-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 835,\n            columnNumber: 19\n          }\n        }, \"Descri\\xE7\\xE3o\")), /*#__PURE__*/React.createElement(CardBody, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 839,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"text-muted d-block mb-12\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 840,\n            columnNumber: 19\n          }\n        }, this.state.descricao)), /*#__PURE__*/React.createElement(CardFooter, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 844,\n            columnNumber: 17\n          }\n        }, this.state.buttonEditDescriptionDisabled == false ? /*#__PURE__*/React.createElement(Button, {\n          disabled: this.state.arquivado == true ? true : false,\n          theme: \"white\",\n          id: \"\",\n          onClick: this.editDescription,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 846,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"text-light\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 852,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 853,\n            columnNumber: 25\n          }\n        }, \"edit\")), \" \", \"Editar\") : /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 858,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Form, {\n          className: \"add-new-post\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 859,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(FormTextarea, {\n          componentClass: \"textarea\",\n          size: \"lg\",\n          className: \"mb-3\",\n          placeholder: \"Descri\\xE7\\xE3o\",\n          type: \"text\",\n          value: this.state.descricaoToAdd,\n          onChange: this.handleDescricaoToAddChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 860,\n            columnNumber: 25\n          }\n        })), /*#__PURE__*/React.createElement(ButtonGroup, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 870,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          theme: \"white\",\n          id: \"\",\n          onClick: this.finalizeEditDescription,\n          disabled: this.state.buttonsEditDescriptionDisabled,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 871,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"text-success\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 877,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 878,\n            columnNumber: 29\n          }\n        }, \"check\")), \" \", this.state.buttonSaveDescription), /*#__PURE__*/React.createElement(Button, {\n          theme: \"white\",\n          id: \"\",\n          onClick: this.cancelEditDescription,\n          disabled: this.state.buttonsEditDescriptionDisabled,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 882,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"text-cancel\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 888,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 889,\n            columnNumber: 29\n          }\n        }, \"cancel\")), \" \", \"Cancelar\"))))))), /*#__PURE__*/React.createElement(Row, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 900,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Col, {\n          lg: \"6\",\n          style: {\n            \"margin-bottom\": \"15px\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 901,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Card, {\n          small: true,\n          style: {\n            width: \"100%\",\n            \"margin-right\": \"60px\"\n          },\n          className: \"mb-12 pt-3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 902,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(CardHeader, {\n          className: \"border-bottom text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 907,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"h4\", {\n          style: {\n            float: \"left\"\n          },\n          className: \"mb-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 908,\n            columnNumber: 19\n          }\n        }, \"Discuss\\xE3o\")), /*#__PURE__*/React.createElement(CardBody, {\n          className: \"p-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 913,\n            columnNumber: 17\n          }\n        }, this.state.comments.length != 0 ? this.state.comments.map(function (comment, idx) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            key: idx,\n            className: \"blog-comments__item d-flex p-3\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 916,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"blog-comments__avatar mr-3\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 921,\n              columnNumber: 27\n            }\n          }, /*#__PURE__*/React.createElement(\"img\", {\n            src: comment.user.photo,\n            alt: comment.user.photo,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 922,\n              columnNumber: 29\n            }\n          })), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"blog-comments__content\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 929,\n              columnNumber: 27\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"blog-comments__meta text-mutes\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 931,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(\"a\", {\n            className: \"text-secondary\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 932,\n              columnNumber: 31\n            }\n          }, comment.user.nome), \" - \", /*#__PURE__*/React.createElement(\"span\", {\n            className: \"text-mutes\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 936,\n              columnNumber: 31\n            }\n          }, moment(comment.tempo._seconds * 1000).format(\"DD/MM/YYYY HH:mm:ss\").toString())), /*#__PURE__*/React.createElement(\"p\", {\n            className: \"m-0 my-1 mb-2 text-muted\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 944,\n              columnNumber: 29\n            }\n          }, comment.conteudo), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"blog-comments__actions\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 949,\n              columnNumber: 29\n            }\n          }, _this2.state.currentUsername != \"\" && _this2.state.currentUsername === comment.user.nome ? /*#__PURE__*/React.createElement(ButtonGroup, {\n            size: \"sm\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 953,\n              columnNumber: 33\n            }\n          }, /*#__PURE__*/React.createElement(Button, {\n            theme: \"white\",\n            id: idx,\n            onClick: _this2.editComment,\n            disabled: _this2.state.buttonsEditDeleteDisable,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 954,\n              columnNumber: 35\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"text-light\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 962,\n              columnNumber: 37\n            }\n          }, /*#__PURE__*/React.createElement(\"i\", {\n            className: \"material-icons\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 963,\n              columnNumber: 39\n            }\n          }, \"edit\")), \" \", \"Edit\"), /*#__PURE__*/React.createElement(Button, {\n            theme: \"white\",\n            id: idx,\n            onClick: _this2.deleteComment,\n            disabled: _this2.state.buttonsEditDeleteDisable,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 967,\n              columnNumber: 35\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"text-danger\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 975,\n              columnNumber: 37\n            }\n          }, /*#__PURE__*/React.createElement(\"i\", {\n            className: \"material-icons\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 976,\n              columnNumber: 39\n            }\n          }, \"clear\")), \" \", \"Delete\")) : \"\")));\n        }) : \"\"), /*#__PURE__*/React.createElement(CardFooter, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 990,\n            columnNumber: 17\n          }\n        }, this.state.addingComment == true || this.state.editingComment == true ? /*#__PURE__*/React.createElement(Form, {\n          className: \"add-new-post\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 993,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(FormInput, {\n          size: \"lg\",\n          className: \"mb-3\",\n          placeholder: \"Coment\\xE1rio\",\n          type: \"text\",\n          value: this.state.commentToAdd,\n          onChange: this.handleCommentToAddChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 994,\n            columnNumber: 23\n          }\n        })) : /*#__PURE__*/React.createElement(Button, {\n          disabled: this.state.arquivado == true ? true : false,\n          onClick: this.addComment,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1004,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1008,\n            columnNumber: 23\n          }\n        }, \"edit\"), \"Adicionar coment\\xE1rio\"), this.state.addingComment == true && this.state.editingComment == false ? /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1014,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          style: {\n            \"margin-right\": \"5px\"\n          },\n          theme: \"success\",\n          onClick: this.finalizeAddComment,\n          disabled: this.state.buttonCommentDisabled,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1015,\n            columnNumber: 23\n          }\n        }, this.state.buttonCommentSave), /*#__PURE__*/React.createElement(Button, {\n          theme: \"danger\",\n          disabled: this.state.buttonCommentDisabled,\n          onClick: this.cancelComment,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1023,\n            columnNumber: 23\n          }\n        }, \"Cancelar\")) : this.state.editingComment == true ? /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1032,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          style: {\n            \"margin-right\": \"5px\"\n          },\n          theme: \"success\",\n          id: this.state.commentEditingID,\n          onClick: this.finalizeEditComment,\n          disabled: this.state.buttonEditDisabled,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1033,\n            columnNumber: 23\n          }\n        }, this.state.buttonCommentSave), /*#__PURE__*/React.createElement(Button, {\n          theme: \"danger\",\n          disabled: this.state.buttonEditDisabled,\n          onClick: this.cancelEditComment,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1042,\n            columnNumber: 23\n          }\n        }, \"Cancelar\")) : \"\"))), /*#__PURE__*/React.createElement(Col, {\n          lg: \"6\",\n          style: {\n            \"margin-bottom\": \"15px\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1056,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Card, {\n          small: true,\n          style: {\n            width: \"100%\",\n            \"margin-right\": \"60px\"\n          },\n          className: \"mb-12 pt-3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1057,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(CardHeader, {\n          className: \"border-bottom text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1062,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"h4\", {\n          style: {\n            float: \"left\"\n          },\n          className: \"mb-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1063,\n            columnNumber: 19\n          }\n        }, \"Documentos\")), /*#__PURE__*/React.createElement(CardBody, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1067,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"text-muted d-block mb-12\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1068,\n            columnNumber: 19\n          }\n        }, this.state.docs.length != 0 ? this.state.docs.map(function (post, idx) {\n          return /*#__PURE__*/React.createElement(Row, {\n            style: {\n              width: \"100%\",\n              \"margin-left\": \"5px\"\n            },\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1071,\n              columnNumber: 27\n            }\n          }, /*#__PURE__*/React.createElement(\"a\", {\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            href: post.referencia,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1072,\n              columnNumber: 29\n            }\n          }, post.nome));\n        }) : \"Sem documentos para mostrar\")), /*#__PURE__*/React.createElement(CardFooter, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1084,\n            columnNumber: 17\n          }\n        }, this.state.addingDoc == true ? /*#__PURE__*/React.createElement(Form, {\n          className: \"add-new-post\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1086,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(FormInput, {\n          size: \"lg\",\n          className: \"mb-3\",\n          placeholder: \"T\\xEDtulo\",\n          type: \"text\",\n          value: this.state.titleToAdd,\n          onChange: this.handleTitleToAddChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1087,\n            columnNumber: 23\n          }\n        }), /*#__PURE__*/React.createElement(FormInput, {\n          size: \"lg\",\n          className: \"mb-3\",\n          placeholder: \"Link\",\n          value: this.state.linkToAdd,\n          onChange: this.handleLinkToAddChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1095,\n            columnNumber: 23\n          }\n        })) : /*#__PURE__*/React.createElement(Button, {\n          disabled: this.state.arquivado == true ? true : false,\n          onClick: this.addDoc,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1104,\n            columnNumber: 21\n          }\n        }, \" \", /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1109,\n            columnNumber: 23\n          }\n        }, \"edit\"), \" Adicionar documento\"), this.state.addingDoc == true ? /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1114,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          style: {\n            \"margin-right\": \"5px\"\n          },\n          theme: \"success\",\n          onClick: this.finalizeAddDoc,\n          disabled: this.state.buttonDisabled,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1115,\n            columnNumber: 23\n          }\n        }, this.state.buttonSave), /*#__PURE__*/React.createElement(Button, {\n          theme: \"danger\",\n          disabled: this.state.buttonDisabled,\n          onClick: this.cancelDoc,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1123,\n            columnNumber: 23\n          }\n        }, \"Cancelar\")) : \"\")))));\n      }\n    }\n  }]);\n\n  return Casos;\n}(React.Component);\n\nexport default Casos;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/views/CasoDetailed.js"],"names":["React","Container","Row","Col","Card","CardHeader","CardBody","CardFooter","Form","FormTextarea","FormInput","Badge","Button","ButtonGroup","Redirect","languageCode","parentsParameters","showToast","toastTypes","addDocTitleMissing","addDocLinkMissing","addDocError","addCommentMissing","deleteCommentError","sucessoGeral","firebaseConfig","PageTitle","initCasosExemplo","showAvailableCasos","CasoDetailOverview","moment","dateFormat","require","Casos","props","redirect","title","id","username","descricao","data","arquivado","ficheiros","comentarios","membros","history","location","state","url","window","href","urlParts","toString","split","length","caso","titulo","loading","currentUsername","docs","comments","addingDoc","addingComment","titleToAdd","linkToAdd","commentToAdd","descricaoToAdd","buttonSave","buttonCommentSave","buttonSaveDescription","buttonDisabled","buttonCommentDisabled","editingComment","buttonsEditDeleteDisable","commentEditingID","buttonEditDisabled","editingDescription","buttonEditDescriptionDisabled","buttonsEditDescriptionDisabled","emailAutor","getCasoWithoutFiles","bind","getCaso","addDoc","addComment","cancelDoc","cancelComment","finalizeAddDoc","finalizeAddComment","handleTitleToAddChange","handleLinkToAddChange","handleCommentToAddChange","deleteComment","editComment","cancelEditComment","finalizeEditComment","editDescription","cancelEditDescription","finalizeEditDescription","handleDescricaoToAddChange","arquiveOrReverse","updateTitle","updateMembers","currentUser","JSON","parse","localStorage","getItem","user","Nome","setState","pathname","this_","project_id","projectId","admin","Admin","uri","request","fetch","then","resp","json","docNonExisting","error","date","Date","data_criacao","_seconds","format","autor","nome","observacoes","privado","userInCaso","i","catch","console","log","e","target","value","ERROR","encodeURIComponent","SUCCESS","documentos","novoDoc","referencia","push","userID","photo","status","comment","undefined","idCaso","user_id","seconds","tempo","nanoseconds","_nanoseconds","splice","conteudo","newValue","newTitle","newListOfMembers","display","justifyContent","alignContent","alignItems","position","left","top","transform","width","float","map","idx","post","Component"],"mappings":"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","sourcesContent":["/* eslint jsx-a11y/anchor-is-valid: 0 */\r\n\r\n// suporte para o jQuery\r\n/*eslint-env jquery*/\r\n\r\nimport React from \"react\";\r\nimport {\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardHeader,\r\n  CardBody,\r\n  CardFooter,\r\n  Form,\r\n  FormTextarea,\r\n  FormInput,\r\n  Badge,\r\n  Button,\r\n  ButtonGroup,\r\n} from \"shards-react\";\r\nimport { Redirect } from \"react-router\";\r\nimport {\r\n  languageCode,\r\n  parentsParameters,\r\n  showToast,\r\n  toastTypes,\r\n} from \"../utils/general_utils\";\r\nimport {\r\n  addDocTitleMissing,\r\n  addDocLinkMissing,\r\n  addDocError,\r\n  addCommentMissing,\r\n  deleteCommentError,\r\n  sucessoGeral,\r\n} from \"../utils/messages_strings\";\r\n\r\nimport { firebaseConfig } from \"../firebase-config\";\r\n\r\nimport PageTitle from \"../components/common/PageTitle\";\r\nimport {\r\n  initCasosExemplo,\r\n  showAvailableCasos,\r\n} from \"../firebase_scripts/casos\";\r\nimport CasoDetailOverview from \"../components/caso-detail/CasoDetailOverview\";\r\nimport * as moment from \"moment\";\r\nvar dateFormat = require(\"dateformat\");\r\n\r\nclass Casos extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    //console.log(\"Props: \" + JSON.stringify(props));\r\n\r\n    var redirect = \"\";\r\n    var title = \"\";\r\n    var id = \"\";\r\n    var username = \"\";\r\n    var descricao = \"\";\r\n    var data = \"\";\r\n    var arquivado = false;\r\n    var ficheiros = [];\r\n    var comentarios = [];\r\n    var membros = [];\r\n\r\n    if (!props.history.location.state) {\r\n      //Buscar id ao url\r\n      //console.log(window.location.href);\r\n      var url = window.location.href;\r\n      var urlParts = url.toString().split(\"/\");\r\n      id = urlParts[urlParts.length - 1];\r\n    } else {\r\n      var caso = props.history.location.state.caso;\r\n      id = caso.id;\r\n\r\n      title = caso.titulo;\r\n\r\n      /*\r\n      data = new Date(caso.data_criacao._seconds * 1000).toString();\r\n      data = moment(data).format(\"DD/MM/YYYY\").toString();\r\n      username = caso.autor.nome;\r\n      descricao = caso.descricao;\r\n      arquivado = caso.arquivado;\r\n      ficheiros = caso.ficheiros;\r\n      comentarios = caso.observacoes;\r\n      */\r\n    }\r\n\r\n    this.state = {\r\n      //redirect: null,\r\n      loading: true,\r\n      currentUsername: \"\",\r\n      id: id,\r\n      title: title,\r\n      data: data,\r\n      username: username,\r\n      descricao: descricao,\r\n      redirect: redirect,\r\n      docs: ficheiros,\r\n      arquivado: arquivado,\r\n      comments: comentarios,\r\n      membros: membros,\r\n      addingDoc: false,\r\n      addingComment: false,\r\n      titleToAdd: \"\",\r\n      linkToAdd: \"\",\r\n      commentToAdd: \"\",\r\n      descricaoToAdd: \"\",\r\n      buttonSave: \"Gravar\",\r\n      buttonCommentSave: \"Gravar\",\r\n      buttonSaveDescription: \"Gravar\",\r\n      buttonDisabled: false,\r\n      buttonCommentDisabled: false,\r\n      editingComment: false,\r\n      buttonsEditDeleteDisable: false,\r\n      commentEditingID: \"\",\r\n      buttonEditDisabled: false,\r\n      editingDescription: false,\r\n      buttonEditDescriptionDisabled: false,\r\n      buttonsEditDescriptionDisabled: false,\r\n      emailAutor: \"\",\r\n    };\r\n\r\n    this.getCasoWithoutFiles = this.getCasoWithoutFiles.bind(this);\r\n    this.getCaso = this.getCaso.bind(this);\r\n    this.addDoc = this.addDoc.bind(this);\r\n    this.addComment = this.addComment.bind(this);\r\n    this.cancelDoc = this.cancelDoc.bind(this);\r\n    this.cancelComment = this.cancelComment.bind(this);\r\n    this.finalizeAddDoc = this.finalizeAddDoc.bind(this);\r\n    this.finalizeAddComment = this.finalizeAddComment.bind(this);\r\n    this.handleTitleToAddChange = this.handleTitleToAddChange.bind(this);\r\n    this.handleLinkToAddChange = this.handleLinkToAddChange.bind(this);\r\n    this.handleCommentToAddChange = this.handleCommentToAddChange.bind(this);\r\n    this.deleteComment = this.deleteComment.bind(this);\r\n    this.editComment = this.editComment.bind(this);\r\n    this.cancelEditComment = this.cancelEditComment.bind(this);\r\n    this.finalizeEditComment = this.finalizeEditComment.bind(this);\r\n    this.editDescription = this.editDescription.bind(this);\r\n    this.cancelEditDescription = this.cancelEditDescription.bind(this);\r\n    this.finalizeEditDescription = this.finalizeEditDescription.bind(this);\r\n    this.handleDescricaoToAddChange = this.handleDescricaoToAddChange.bind(\r\n      this\r\n    );\r\n    this.arquiveOrReverse = this.arquiveOrReverse.bind(this);\r\n    this.updateTitle = this.updateTitle.bind(this);\r\n    this.updateMembers = this.updateMembers.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\r\n\r\n    if (currentUser !== null) {\r\n      var user = currentUser.Nome;\r\n      this.setState({ currentUsername: user });\r\n\r\n      //No get caso devemos ver se currentUsername está nos membros, se não estiver, fazer redirect para casos\r\n    } else {\r\n      //Redirect to login\r\n      var redirect = (\r\n        <Redirect\r\n          to={{\r\n            pathname: \"/\",\r\n          }}\r\n        />\r\n      );\r\n      this.setState({ redirect: redirect });\r\n    }\r\n\r\n    //Get caso from db\r\n    this.getCaso();\r\n  }\r\n\r\n  getCaso() {\r\n    const { id, currentUsername } = this.state;\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\r\n    if (currentUser != null || currentUsername != \"\") {\r\n      var admin = false;\r\n      if (currentUser != null) {\r\n        admin = currentUser.Admin;\r\n      }\r\n\r\n      let uri =\r\n        \"https://us-central1-\" +\r\n        project_id +\r\n        \".cloudfunctions.net/api/getCaso?\" +\r\n        \"id=\" +\r\n        id;\r\n\r\n      const request = async () => {\r\n        await fetch(uri)\r\n          .then((resp) => resp.json()) // Transform the data into json\r\n          .then(function (data) {\r\n            var docNonExisting = false;\r\n            if (data != null) {\r\n              if (data.error != null) {\r\n                docNonExisting = true;\r\n              }\r\n            }\r\n            var redirect = null;\r\n            if (docNonExisting) {\r\n              redirect = (\r\n                <Redirect\r\n                  to={{\r\n                    pathname: \"/casos\",\r\n                  }}\r\n                />\r\n              );\r\n              this_.setState({\r\n                redirect: redirect,\r\n                loading: false,\r\n              });\r\n            } else {\r\n              var title = data.titulo;\r\n\r\n              var date = new Date(data.data_criacao._seconds * 1000).toString();\r\n              date = moment(date).format(\"DD/MM/YYYY\").toString();\r\n              var username = data.autor.nome;\r\n              var emailAutor = data.autor.id;\r\n\r\n              var descricao = data.descricao;\r\n              var arquivado = data.arquivado;\r\n              var ficheiros = data.ficheiros;\r\n              var comentarios = data.observacoes;\r\n              var membros = data.membros;\r\n              var privado = data.privado;\r\n\r\n              var userInCaso = true;\r\n              if (privado && !admin) {\r\n                userInCaso = false;\r\n                for (var i = 0; i < membros.length; i++) {\r\n                  if (\r\n                    membros[i].nome == currentUsername ||\r\n                    membros[i].nome == currentUser.Nome\r\n                  ) {\r\n                    userInCaso = true;\r\n                    break;\r\n                  }\r\n                }\r\n              }\r\n\r\n              if (userInCaso == false) {\r\n                redirect = (\r\n                  <Redirect\r\n                    to={{\r\n                      pathname: \"/casos\",\r\n                    }}\r\n                  />\r\n                );\r\n              }\r\n\r\n              this_.setState({\r\n                redirect: redirect,\r\n                title: title,\r\n                data: date,\r\n                username: username,\r\n                descricao: descricao,\r\n                arquivado: arquivado,\r\n                docs: ficheiros,\r\n                comments: comentarios,\r\n                membros: membros,\r\n                emailAutor: emailAutor,\r\n                loading: false,\r\n              });\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error);\r\n            this_.setState({ loading: false });\r\n          });\r\n      };\r\n\r\n      request();\r\n    } else {\r\n      //Redirect to login\r\n      var redirect = (\r\n        <Redirect\r\n          to={{\r\n            pathname: \"/\",\r\n          }}\r\n        />\r\n      );\r\n      this.setState({ redirect: redirect });\r\n    }\r\n  }\r\n\r\n  getCasoWithoutFiles() {\r\n    const { id } = this.state;\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    let uri =\r\n      \"https://us-central1-\" +\r\n      project_id +\r\n      \".cloudfunctions.net/api/getCaso?\" +\r\n      \"id=\" +\r\n      id;\r\n\r\n    const request = async () => {\r\n      await fetch(uri)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          var title = data.titulo;\r\n\r\n          var date = new Date(data.data_criacao._seconds * 1000).toString();\r\n          date = moment(date).format(\"DD/MM/YYYY\").toString();\r\n          var username = data.autor.nome;\r\n          var descricao = data.descricao;\r\n          var arquivado = data.arquivado;\r\n          var comentarios = data.observacoes;\r\n\r\n          this_.setState({\r\n            title: title,\r\n            data: date,\r\n            username: username,\r\n            descricao: descricao,\r\n            arquivado: arquivado,\r\n            comments: comentarios,\r\n          });\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    };\r\n\r\n    request();\r\n  }\r\n\r\n  handleDescricaoToAddChange(e) {\r\n    this.setState({ descricaoToAdd: e.target.value });\r\n  }\r\n\r\n  handleTitleToAddChange(e) {\r\n    this.setState({ titleToAdd: e.target.value });\r\n  }\r\n\r\n  handleLinkToAddChange(e) {\r\n    this.setState({ linkToAdd: e.target.value });\r\n  }\r\n\r\n  handleCommentToAddChange(e) {\r\n    this.setState({ commentToAdd: e.target.value });\r\n  }\r\n\r\n  addComment() {\r\n    this.setState({ addingComment: true });\r\n  }\r\n\r\n  addDoc() {\r\n    this.setState({ addingDoc: true });\r\n  }\r\n\r\n  cancelDoc() {\r\n    this.setState({ titleToAdd: \"\", linkToAdd: \"\", addingDoc: false });\r\n  }\r\n\r\n  cancelComment() {\r\n    this.setState({ commentToAdd: \"\", addingComment: false });\r\n  }\r\n\r\n  finalizeAddDoc() {\r\n    const { id, titleToAdd, linkToAdd } = this.state;\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    if (id != \"\") {\r\n      if (titleToAdd == \"\") {\r\n        showToast(addDocTitleMissing[languageCode], 5000, toastTypes.ERROR);\r\n      } else if (linkToAdd == \"\") {\r\n        showToast(addDocLinkMissing[languageCode], 5000, toastTypes.ERROR);\r\n      } else {\r\n        this_.setState({ buttonSave: \"A gravar...\", buttonDisabled: true });\r\n        //Guardar na base de dados\r\n        let uri =\r\n          \"https://us-central1-\" +\r\n          project_id +\r\n          \".cloudfunctions.net/api/addAnexoCaso?\" +\r\n          \"id=\" +\r\n          id +\r\n          \"&\" +\r\n          \"nome_ficheiro=\" +\r\n          encodeURIComponent(titleToAdd) +\r\n          \"&\" +\r\n          \"referencia=\" +\r\n          linkToAdd;\r\n\r\n        const request = async () => {\r\n          await fetch(uri)\r\n            .then(function (data) {\r\n              showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\r\n\r\n              var documentos = this_.state.docs;\r\n              var novoDoc = {};\r\n              novoDoc.referencia = linkToAdd;\r\n              novoDoc.nome = titleToAdd;\r\n              documentos.push(novoDoc);\r\n\r\n              this_.setState(\r\n                {\r\n                  titleToAdd: \"\",\r\n                  linkToAdd: \"\",\r\n                  addingDoc: false,\r\n                  docs: documentos,\r\n                  buttonDisabled: false,\r\n                },\r\n                () => {\r\n                  this_.getCasoWithoutFiles();\r\n                }\r\n              );\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n              showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\r\n              this_.setState({ buttonSave: \"Gravar\", buttonDisabled: false });\r\n            });\r\n        };\r\n\r\n        request();\r\n      }\r\n    }\r\n  }\r\n\r\n  finalizeAddComment() {\r\n    const { id, commentToAdd } = this.state;\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    var currentUser = JSON.parse(window.localStorage.getItem(\"userDoc\"));\r\n\r\n    if (currentUser !== null) {\r\n      var userID = currentUser.id;\r\n      var username = currentUser.Nome;\r\n      var photo = currentUser.photo;\r\n\r\n      if (id != \"\") {\r\n        if (commentToAdd == \"\") {\r\n          showToast(addCommentMissing[languageCode], 5000, toastTypes.ERROR);\r\n        } else {\r\n          this_.setState({\r\n            buttonCommentSave: \"A gravar...\",\r\n            buttonCommentDisabled: true,\r\n          });\r\n          //Guardar na base de dados\r\n          let uri =\r\n            \"https://us-central1-\" +\r\n            project_id +\r\n            \".cloudfunctions.net/api/addCommentCaso?\" +\r\n            \"id=\" +\r\n            id +\r\n            \"&\" +\r\n            \"user_id=\" +\r\n            userID +\r\n            \"&\" +\r\n            \"user_name=\" +\r\n            username +\r\n            \"&\" +\r\n            \"observacao=\" +\r\n            encodeURIComponent(commentToAdd) +\r\n            \"&photo=\" +\r\n            encodeURIComponent(photo);\r\n\r\n          const request = async () => {\r\n            await fetch(uri)\r\n              .then(function (data) {\r\n                if (data.status && data.status == 200) {\r\n                  showToast(\r\n                    sucessoGeral[languageCode],\r\n                    5000,\r\n                    toastTypes.SUCCESS\r\n                  );\r\n\r\n                  this_.setState(\r\n                    {\r\n                      commentToAdd: \"\",\r\n                      buttonCommentSave: \"Gravar\",\r\n                      addingComment: false,\r\n                      buttonCommentDisabled: false,\r\n                    },\r\n                    () => this_.getCaso()\r\n                  );\r\n                } else {\r\n                  showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\r\n                  this_.setState({\r\n                    buttonCommentSave: \"Gravar\",\r\n                    buttonCommentDisabled: false,\r\n                  });\r\n                }\r\n              })\r\n              .catch(function (error) {\r\n                console.log(error);\r\n                showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\r\n                this_.setState({\r\n                  buttonCommentSave: \"Gravar\",\r\n                  buttonCommentDisabled: false,\r\n                });\r\n              });\r\n          };\r\n\r\n          request();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  deleteComment(e) {\r\n    const this_ = this;\r\n    var id = e.target.id;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    var comment = this.state.comments[id];\r\n\r\n    if (comment === undefined) {\r\n      showToast(deleteCommentError[languageCode], 5000, toastTypes.ERROR);\r\n    } else {\r\n      var idCaso = this.state.id;\r\n      var user_id = comment.user.id;\r\n      var seconds = comment.tempo._seconds;\r\n      var nanoseconds = comment.tempo._nanoseconds;\r\n\r\n      if (idCaso !== undefined) {\r\n        let uri =\r\n          \"https://us-central1-\" +\r\n          project_id +\r\n          \".cloudfunctions.net/api/removeCommentCaso?\" +\r\n          \"id=\" +\r\n          idCaso +\r\n          \"&user_id=\" +\r\n          user_id +\r\n          \"&seconds=\" +\r\n          seconds +\r\n          \"&nanoseconds=\" +\r\n          nanoseconds;\r\n\r\n        const request = async () => {\r\n          await fetch(uri)\r\n            .then((resp) => resp.json()) // Transform the data into json\r\n            .then(function (data) {\r\n              showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\r\n              var comments = this_.state.comments;\r\n              comments.splice(id, 1);\r\n              this_.setState({ comments: comments });\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n            });\r\n        };\r\n\r\n        request();\r\n      } else {\r\n        console.log(\"erro com id\");\r\n      }\r\n    }\r\n  }\r\n\r\n  editComment(e) {\r\n    var id = e.target.id;\r\n\r\n    var comment = this.state.comments[id];\r\n    var conteudo = comment.conteudo;\r\n    this.setState({\r\n      editingComment: true,\r\n      buttonsEditDeleteDisable: true,\r\n      commentToAdd: conteudo,\r\n      commentEditingID: id,\r\n    });\r\n  }\r\n\r\n  cancelEditComment() {\r\n    this.setState({\r\n      editingComment: false,\r\n      buttonsEditDeleteDisable: false,\r\n      commentToAdd: \"\",\r\n      commentEditingID: \"\",\r\n    });\r\n  }\r\n\r\n  finalizeEditComment(e) {\r\n    const this_ = this;\r\n    var id = e.target.id;\r\n    var comment = this.state.comments[id];\r\n    var conteudo = this.state.commentToAdd;\r\n    var idCaso = this.state.id;\r\n    var user_id = comment.user.id;\r\n    var seconds = comment.tempo._seconds;\r\n    var nanoseconds = comment.tempo._nanoseconds;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    this_.setState({\r\n      buttonCommentSave: \"A gravar...\",\r\n      buttonEditDisabled: true,\r\n    });\r\n    //Guardar na base de dados\r\n    let uri =\r\n      \"https://us-central1-\" +\r\n      project_id +\r\n      \".cloudfunctions.net/api/editCommentCaso?\" +\r\n      \"id=\" +\r\n      idCaso +\r\n      \"&\" +\r\n      \"user_id=\" +\r\n      user_id +\r\n      \"&\" +\r\n      \"seconds=\" +\r\n      seconds +\r\n      \"&\" +\r\n      \"nanoseconds=\" +\r\n      nanoseconds +\r\n      \"&\" +\r\n      \"observacao=\" +\r\n      conteudo;\r\n    const request = async () => {\r\n      await fetch(uri)\r\n        .then(function (data) {\r\n          showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\r\n          console.log(data.status);\r\n\r\n          var comments = this_.state.comments;\r\n          comments[id].conteudo = conteudo;\r\n\r\n          this_.setState({\r\n            commentToAdd: \"\",\r\n            editingComment: false,\r\n            buttonsEditDeleteDisable: false,\r\n            buttonEditDisabled: false,\r\n            commentEditingID: \"\",\r\n            buttonCommentSave: \"Gravar\",\r\n            comments: comments,\r\n          });\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n          showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\r\n          this_.setState({\r\n            buttonCommentSave: \"Gravar\",\r\n            buttonEditDisabled: false,\r\n          });\r\n        });\r\n    };\r\n\r\n    request();\r\n  }\r\n\r\n  editDescription(e) {\r\n    let descricaoToAdd = this.state.descricao;\r\n\r\n    this.setState({\r\n      editingDescription: true,\r\n      buttonEditDescriptionDisabled: true,\r\n      descricaoToAdd: descricaoToAdd,\r\n    });\r\n  }\r\n\r\n  cancelEditDescription(e) {\r\n    this.setState({\r\n      editingDescription: false,\r\n      buttonEditDescriptionDisabled: false,\r\n      descricaoToAdd: \"\",\r\n    });\r\n  }\r\n\r\n  finalizeEditDescription(e) {\r\n    const this_ = this;\r\n    var id = this.state.id;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    var descricao = this.state.descricaoToAdd;\r\n\r\n    this_.setState({\r\n      buttonSaveDescription: \"A gravar...\",\r\n      buttonsEditDescriptionDisabled: true,\r\n    });\r\n    //Guardar na base de dados\r\n    let uri =\r\n      \"https://us-central1-\" +\r\n      project_id +\r\n      \".cloudfunctions.net/api/editDescricaoCaso?\" +\r\n      \"id=\" +\r\n      id +\r\n      \"&\" +\r\n      \"descricao=\" +\r\n      descricao;\r\n    const request = async () => {\r\n      await fetch(uri)\r\n        .then(function (data) {\r\n          if (data.status && data.status == 200) {\r\n            showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\r\n            console.log(data.status);\r\n\r\n            this_.setState({\r\n              descricao: descricao,\r\n              descricaoToAdd: \"\",\r\n              editingDescription: false,\r\n              buttonEditDescriptionDisabled: false,\r\n              buttonsEditDescriptionDisabled: false,\r\n              buttonSaveDescription: \"Gravar\",\r\n            });\r\n          } else {\r\n            showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\r\n            this_.setState({\r\n              buttonSaveDescription: \"Gravar\",\r\n              buttonsEditDescriptionDisabled: false,\r\n            });\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n          showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\r\n          this_.setState({\r\n            buttonSaveDescription: \"Gravar\",\r\n            buttonsEditDescriptionDisabled: false,\r\n          });\r\n        });\r\n    };\r\n\r\n    request();\r\n  }\r\n\r\n  arquiveOrReverse() {\r\n    var { arquivado, id } = this.state;\r\n    const this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n\r\n    var newValue = true;\r\n\r\n    if (arquivado) {\r\n      newValue = false;\r\n    }\r\n\r\n    let uri =\r\n      \"https://us-central1-\" +\r\n      project_id +\r\n      \".cloudfunctions.net/api/archiveCaso?\" +\r\n      \"id=\" +\r\n      id +\r\n      \"&\" +\r\n      \"arquivado=\" +\r\n      newValue;\r\n\r\n    const request = async () => {\r\n      await fetch(uri)\r\n        .then(function (data) {\r\n          if (data.status && data.status == 200) {\r\n            showToast(sucessoGeral[languageCode], 5000, toastTypes.SUCCESS);\r\n\r\n            this_.setState({\r\n              arquivado: newValue,\r\n            });\r\n          } else {\r\n            showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          showToast(addDocError[languageCode], 5000, toastTypes.ERROR);\r\n        });\r\n    };\r\n    request();\r\n  }\r\n\r\n  updateTitle(newTitle) {\r\n    this.setState({ title: newTitle });\r\n  }\r\n\r\n  updateMembers(newListOfMembers) {\r\n    this.setState({ membros: newListOfMembers });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.loading == true) {\r\n      return (\r\n        <Container\r\n          fluid\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignContent: \"center\",\r\n            alignItems: \"center\",\r\n            position: \"absolute\",\r\n            left: \"50%\",\r\n            top: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n          }}\r\n        >\r\n          <Row>{this.state.redirect}</Row> <h1>A carregar...</h1>\r\n        </Container>\r\n      );\r\n    } else {\r\n      return (\r\n        <Container fluid className=\"main-content-container px-4\">\r\n          <Row noGutters className=\"page-header py-4\">\r\n            <PageTitle title=\"\" md=\"12\" className=\"ml-sm-auto mr-sm-auto\" />\r\n          </Row>\r\n          <Row>{this.state.redirect}</Row>\r\n          <Row>\r\n            <Col lg=\"6\" style={{ \"margin-bottom\": \"15px\" }}>\r\n              {this.state.arquivado ? (\r\n                <CasoDetailOverview\r\n                  title={this.state.title}\r\n                  id={this.state.id}\r\n                  data={this.state.data}\r\n                  username={this.state.username}\r\n                  emailAutor={this.state.emailAutor}\r\n                  arquivado={true}\r\n                  membros={this.state.membros}\r\n                  updateMembers={this.updateMembers}\r\n                  arquiveOrReverse={this.arquiveOrReverse}\r\n                  updateTitle={this.updateTitle}\r\n                />\r\n              ) : (\r\n                <div>\r\n                  <CasoDetailOverview\r\n                    id={this.state.id}\r\n                    title={this.state.title}\r\n                    data={this.state.data}\r\n                    username={this.state.username}\r\n                    emailAutor={this.state.emailAutor}\r\n                    arquivado={false}\r\n                    membros={this.state.membros}\r\n                    updateMembers={this.updateMembers}\r\n                    arquiveOrReverse={this.arquiveOrReverse}\r\n                    updateTitle={this.updateTitle}\r\n                  />\r\n                </div>\r\n              )}\r\n            </Col>\r\n            <Col lg=\"6\" style={{ \"margin-bottom\": \"15px\" }}>\r\n              <Card\r\n                style={{ width: \"100%\", \"margin-right\": \"60px\" }}\r\n                small\r\n                className=\"mb-4 pt-3\"\r\n              >\r\n                <CardHeader className=\"border-bottom text-center\">\r\n                  <h4 style={{ float: \"left\" }} className=\"mb-0\">\r\n                    Descrição\r\n                  </h4>\r\n                </CardHeader>\r\n                <CardBody>\r\n                  <span className=\"text-muted d-block mb-12\">\r\n                    {this.state.descricao}\r\n                  </span>\r\n                </CardBody>\r\n                <CardFooter>\r\n                  {this.state.buttonEditDescriptionDisabled == false ? (\r\n                    <Button\r\n                      disabled={this.state.arquivado == true ? true : false}\r\n                      theme=\"white\"\r\n                      id={\"\"}\r\n                      onClick={this.editDescription}\r\n                    >\r\n                      <span className=\"text-light\">\r\n                        <i className=\"material-icons\">edit</i>\r\n                      </span>{\" \"}\r\n                      Editar\r\n                    </Button>\r\n                  ) : (\r\n                    <div>\r\n                      <Form className=\"add-new-post\">\r\n                        <FormTextarea\r\n                          componentClass=\"textarea\"\r\n                          size=\"lg\"\r\n                          className=\"mb-3\"\r\n                          placeholder=\"Descrição\"\r\n                          type=\"text\"\r\n                          value={this.state.descricaoToAdd}\r\n                          onChange={this.handleDescricaoToAddChange}\r\n                        />\r\n                      </Form>\r\n                      <ButtonGroup>\r\n                        <Button\r\n                          theme=\"white\"\r\n                          id={\"\"}\r\n                          onClick={this.finalizeEditDescription}\r\n                          disabled={this.state.buttonsEditDescriptionDisabled}\r\n                        >\r\n                          <span className=\"text-success\">\r\n                            <i className=\"material-icons\">check</i>\r\n                          </span>{\" \"}\r\n                          {this.state.buttonSaveDescription}\r\n                        </Button>\r\n                        <Button\r\n                          theme=\"white\"\r\n                          id={\"\"}\r\n                          onClick={this.cancelEditDescription}\r\n                          disabled={this.state.buttonsEditDescriptionDisabled}\r\n                        >\r\n                          <span className=\"text-cancel\">\r\n                            <i className=\"material-icons\">cancel</i>\r\n                          </span>{\" \"}\r\n                          Cancelar\r\n                        </Button>\r\n                      </ButtonGroup>\r\n                    </div>\r\n                  )}\r\n                </CardFooter>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col lg=\"6\" style={{ \"margin-bottom\": \"15px\" }}>\r\n              <Card\r\n                small\r\n                style={{ width: \"100%\", \"margin-right\": \"60px\" }}\r\n                className=\"mb-12 pt-3\"\r\n              >\r\n                <CardHeader className=\"border-bottom text-center\">\r\n                  <h4 style={{ float: \"left\" }} className=\"mb-0\">\r\n                    Discussão\r\n                  </h4>\r\n                </CardHeader>\r\n\r\n                <CardBody className=\"p-0\">\r\n                  {this.state.comments.length != 0\r\n                    ? this.state.comments.map((comment, idx) => (\r\n                        <div\r\n                          key={idx}\r\n                          className=\"blog-comments__item d-flex p-3\"\r\n                        >\r\n                          {/* Avatar */}\r\n                          <div className=\"blog-comments__avatar mr-3\">\r\n                            <img\r\n                              src={comment.user.photo}\r\n                              alt={comment.user.photo}\r\n                            />\r\n                          </div>\r\n\r\n                          {/* Content */}\r\n                          <div className=\"blog-comments__content\">\r\n                            {/* Content :: Title */}\r\n                            <div className=\"blog-comments__meta text-mutes\">\r\n                              <a className=\"text-secondary\">\r\n                                {comment.user.nome}\r\n                              </a>\r\n                              {\" - \"}\r\n                              <span className=\"text-mutes\">\r\n                                {moment(comment.tempo._seconds * 1000)\r\n                                  .format(\"DD/MM/YYYY HH:mm:ss\")\r\n                                  .toString()}\r\n                              </span>\r\n                            </div>\r\n\r\n                            {/* Content :: Body */}\r\n                            <p className=\"m-0 my-1 mb-2 text-muted\">\r\n                              {comment.conteudo}\r\n                            </p>\r\n\r\n                            {/* Content :: Actions */}\r\n                            <div className=\"blog-comments__actions\">\r\n                              {this.state.currentUsername != \"\" &&\r\n                              this.state.currentUsername ===\r\n                                comment.user.nome ? (\r\n                                <ButtonGroup size=\"sm\">\r\n                                  <Button\r\n                                    theme=\"white\"\r\n                                    id={idx}\r\n                                    onClick={this.editComment}\r\n                                    disabled={\r\n                                      this.state.buttonsEditDeleteDisable\r\n                                    }\r\n                                  >\r\n                                    <span className=\"text-light\">\r\n                                      <i className=\"material-icons\">edit</i>\r\n                                    </span>{\" \"}\r\n                                    Edit\r\n                                  </Button>\r\n                                  <Button\r\n                                    theme=\"white\"\r\n                                    id={idx}\r\n                                    onClick={this.deleteComment}\r\n                                    disabled={\r\n                                      this.state.buttonsEditDeleteDisable\r\n                                    }\r\n                                  >\r\n                                    <span className=\"text-danger\">\r\n                                      <i className=\"material-icons\">clear</i>\r\n                                    </span>{\" \"}\r\n                                    Delete\r\n                                  </Button>\r\n                                </ButtonGroup>\r\n                              ) : (\r\n                                \"\"\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ))\r\n                    : \"\"}\r\n                </CardBody>\r\n                <CardFooter>\r\n                  {this.state.addingComment == true ||\r\n                  this.state.editingComment == true ? (\r\n                    <Form className=\"add-new-post\">\r\n                      <FormInput\r\n                        size=\"lg\"\r\n                        className=\"mb-3\"\r\n                        placeholder=\"Comentário\"\r\n                        type=\"text\"\r\n                        value={this.state.commentToAdd}\r\n                        onChange={this.handleCommentToAddChange}\r\n                      />\r\n                    </Form>\r\n                  ) : (\r\n                    <Button\r\n                      disabled={this.state.arquivado == true ? true : false}\r\n                      onClick={this.addComment}\r\n                    >\r\n                      <i className=\"material-icons\">edit</i>\r\n                      Adicionar comentário\r\n                    </Button>\r\n                  )}\r\n                  {this.state.addingComment == true &&\r\n                  this.state.editingComment == false ? (\r\n                    <div>\r\n                      <Button\r\n                        style={{ \"margin-right\": \"5px\" }}\r\n                        theme=\"success\"\r\n                        onClick={this.finalizeAddComment}\r\n                        disabled={this.state.buttonCommentDisabled}\r\n                      >\r\n                        {this.state.buttonCommentSave}\r\n                      </Button>\r\n                      <Button\r\n                        theme=\"danger\"\r\n                        disabled={this.state.buttonCommentDisabled}\r\n                        onClick={this.cancelComment}\r\n                      >\r\n                        Cancelar\r\n                      </Button>\r\n                    </div>\r\n                  ) : this.state.editingComment == true ? (\r\n                    <div>\r\n                      <Button\r\n                        style={{ \"margin-right\": \"5px\" }}\r\n                        theme=\"success\"\r\n                        id={this.state.commentEditingID}\r\n                        onClick={this.finalizeEditComment}\r\n                        disabled={this.state.buttonEditDisabled}\r\n                      >\r\n                        {this.state.buttonCommentSave}\r\n                      </Button>\r\n                      <Button\r\n                        theme=\"danger\"\r\n                        disabled={this.state.buttonEditDisabled}\r\n                        onClick={this.cancelEditComment}\r\n                      >\r\n                        Cancelar\r\n                      </Button>\r\n                    </div>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                </CardFooter>\r\n              </Card>\r\n            </Col>\r\n            <Col lg=\"6\" style={{ \"margin-bottom\": \"15px\" }}>\r\n              <Card\r\n                small\r\n                style={{ width: \"100%\", \"margin-right\": \"60px\" }}\r\n                className=\"mb-12 pt-3\"\r\n              >\r\n                <CardHeader className=\"border-bottom text-center\">\r\n                  <h4 style={{ float: \"left\" }} className=\"mb-0\">\r\n                    Documentos\r\n                  </h4>\r\n                </CardHeader>\r\n                <CardBody>\r\n                  <span className=\"text-muted d-block mb-12\">\r\n                    {this.state.docs.length != 0\r\n                      ? this.state.docs.map((post, idx) => (\r\n                          <Row style={{ width: \"100%\", \"margin-left\": \"5px\" }}>\r\n                            <a\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                              href={post.referencia}\r\n                            >\r\n                              {post.nome}\r\n                            </a>\r\n                          </Row>\r\n                        ))\r\n                      : \"Sem documentos para mostrar\"}\r\n                  </span>\r\n                </CardBody>\r\n                <CardFooter>\r\n                  {this.state.addingDoc == true ? (\r\n                    <Form className=\"add-new-post\">\r\n                      <FormInput\r\n                        size=\"lg\"\r\n                        className=\"mb-3\"\r\n                        placeholder=\"Título\"\r\n                        type=\"text\"\r\n                        value={this.state.titleToAdd}\r\n                        onChange={this.handleTitleToAddChange}\r\n                      />\r\n                      <FormInput\r\n                        size=\"lg\"\r\n                        className=\"mb-3\"\r\n                        placeholder=\"Link\"\r\n                        value={this.state.linkToAdd}\r\n                        onChange={this.handleLinkToAddChange}\r\n                      />\r\n                    </Form>\r\n                  ) : (\r\n                    <Button\r\n                      disabled={this.state.arquivado == true ? true : false}\r\n                      onClick={this.addDoc}\r\n                    >\r\n                      {\" \"}\r\n                      <i className=\"material-icons\">edit</i> Adicionar documento\r\n                    </Button>\r\n                  )}\r\n\r\n                  {this.state.addingDoc == true ? (\r\n                    <div>\r\n                      <Button\r\n                        style={{ \"margin-right\": \"5px\" }}\r\n                        theme=\"success\"\r\n                        onClick={this.finalizeAddDoc}\r\n                        disabled={this.state.buttonDisabled}\r\n                      >\r\n                        {this.state.buttonSave}\r\n                      </Button>\r\n                      <Button\r\n                        theme=\"danger\"\r\n                        disabled={this.state.buttonDisabled}\r\n                        onClick={this.cancelDoc}\r\n                      >\r\n                        Cancelar\r\n                      </Button>\r\n                    </div>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                </CardFooter>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Casos;\r\n"]},"metadata":{},"sourceType":"module"}