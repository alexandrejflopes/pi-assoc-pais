{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ambiente de Trabalho\\\\Universidade\\\\Ano 3\\\\Semestre 2\\\\PI\\\\Projeto\\\\repos\\\\pi-assoc-pais\\\\develop\\\\src\\\\components\\\\approval-page\\\\ApprovalPagePaga.js\";\nimport React, { Component, Fragment } from \"react\";\nimport { ListGroup, ListGroupItem, Row, Col, Card, CardBody, CardFooter, Form, FormInput, FormGroup, FormCheckbox, Button, FormTextarea, FormFeedback } from \"shards-react\";\nimport { toast, Bounce } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { Label, Input, FormText } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport AssocLogoUpload from \"../config-inicial/AssocLogoUpload\";\nimport MembersFileUpload from \"../config-inicial/MembersFileUpload\";\nimport NewParamsFileUpload from \"../config-inicial/NewParamsFileUpload\";\nimport { saveRegistToDB } from \"../../firebase_scripts/installation\";\nimport StudentsFileUpload from \"../config-inicial/StudentsFileUpload\";\nimport { firestore, firebase_auth, firebase, firebaseConfig } from \"../../firebase-config\";\nimport ApprovalModal from \"./ApprovalModal\";\nimport { formFeedback, studentName, studentYear, languageCode } from \"../../utils/general_utils\";\n\nvar Approval_Page = /*#__PURE__*/function (_Component) {\n  _inherits(Approval_Page, _Component);\n\n  var _super = _createSuper(Approval_Page);\n\n  function Approval_Page(props) {\n    var _this;\n\n    _classCallCheck(this, Approval_Page);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      resgistosPorAprovarComPagamentoFeito: null,\n      dicionarioRegistos: null,\n      blocking: false,\n      errors: {},\n      extraParent: null,\n      extraStudent: null,\n      moreStudents: null,\n      studentNumber: 1,\n      //Counts number of students\n      extraVars: [{}],\n      extraPai: 0 //Counts number of extra parameters that belong to the parent part -> they are stored in extraVars[0] along with the extra values from the first student\n\n    };\n    _this.renderExtra = _this.renderExtra.bind(_assertThisInitialized(_this));\n    _this.reload = _this.reload.bind(_assertThisInitialized(_this));\n    _this.addStudent = _this.addStudent.bind(_assertThisInitialized(_this));\n    _this.getParentsToApprove = _this.getParentsToApprove.bind(_assertThisInitialized(_this));\n\n    _this.getParentsToApprove();\n\n    _this.renderExtra();\n\n    return _this;\n  }\n  /*********************************** LIFECYCLE ***********************************/\n\n\n  _createClass(Approval_Page, [{\n    key: \"reload\",\n    value: function reload() {\n      this.setState({\n        dicionarioRegistos: null,\n        resgistosPorAprovar: null\n      });\n      this.getParentsToApprove();\n      this.renderExtra();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true; // const user = UsersService.getCurrentUser();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n    /**\r\n      Function to add new student to form\r\n     */\n\n  }, {\n    key: \"addStudent\",\n    value: function addStudent() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          studentNumber = _this$state.studentNumber,\n          nomeAluno = _this$state.nomeAluno,\n          nomeAlunoFeedBack = _this$state.nomeAlunoFeedBack,\n          anoEscolaridade = _this$state.anoEscolaridade,\n          anoEscolaridadeFeedBack = _this$state.anoEscolaridadeFeedBack,\n          extraStudent = _this$state.extraStudent,\n          moreStudents = _this$state.moreStudents;\n      var this_ = this;\n      var dadosFinaisAluno = null; //Get student parameters from database\n\n      var extrasDoc = firestore.doc(\"initialConfigs/newParameters\");\n      extrasDoc.get().then(function (doc) {\n        if (doc.exists === true) {\n          var dataDoc = doc.data();\n          var studentData = dataDoc[\"aluno\"];\n\n          if (studentData !== undefined) {\n            var keys = Object.keys(studentData);\n            var dadosAluno = [];\n\n            var _loop = function _loop() {\n              valS = keys[i];\n              type = studentData[valS];\n              step = null;\n\n              if (type.includes(\"text\")) {\n                type = \"text\";\n              } else if (type.includes(\"int\")) {\n                type = \"number\";\n                step = \"1\";\n              } else if (type.includes(\"decimal\")) {\n                type = \"number\";\n                step = \"0.1\";\n              }\n\n              idS = valS + \"-\" + studentNumber; //Id now contains a unique number to identify it\n              //Create dictionary for this student's values and add it to extraVars\n\n              newArrayExtras1 = _this2.state.extraVars; //Get array of dictionaries\n\n              if (i == 0) {\n                newVar = _defineProperty({}, idS, \"\");\n              } else {\n                newVar = _objectSpread({}, _this2.state.extraVars[studentNumber], _defineProperty({}, idS, \"\"));\n              }\n\n              newArrayExtras1[studentNumber] = newVar;\n\n              _this2.setState({\n                extraVars: newArrayExtras1\n              });\n\n              var n = studentNumber; //Object to render\n\n              dado = /*#__PURE__*/React.createElement(FormGroup, {\n                __self: _this2,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 17\n                }\n              }, /*#__PURE__*/React.createElement(\"label\", {\n                htmlFor: idS,\n                __self: _this2,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 19\n                }\n              }, valS), /*#__PURE__*/React.createElement(FormInput, {\n                id: idS,\n                type: type,\n                step: step,\n                placeholder: valS,\n                onChange: function onChange(e) {\n                  var extrasArray = _this2.state.extraVars;\n\n                  var newExtraVars = _objectSpread({}, _this2.state.extraVars[n], _defineProperty({}, e.target.id, e.target.value));\n\n                  extrasArray[n] = newExtraVars;\n\n                  _this2.setState({\n                    extraVars: extrasArray\n                  });\n                },\n                __self: _this2,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 19\n                }\n              }));\n              dadosAluno.push(dado);\n            };\n\n            for (var i = 0; i < keys.length; i++) {\n              var valS;\n              var type;\n              var step;\n              var idS;\n              var newArrayExtras1;\n              var newVar;\n              var dado;\n\n              _loop();\n            }\n\n            dadosFinaisAluno = dadosAluno; //Similar process to name and year of student\n\n            var novoArrayAlunos = nomeAluno.concat(\"\");\n            var novoArrayNomeAlunoFeedBack = nomeAlunoFeedBack.concat(null); //not working, we are using alert method\n\n            var novoArrayAnoEscolaridade = anoEscolaridade.concat(\"\");\n            var novoArrayAnoEscolaridadeFeedBack = anoEscolaridadeFeedBack.concat(null);\n            this_.setState({\n              nomeAluno: novoArrayAlunos,\n              nomeAlunoFeedBack: novoArrayNomeAlunoFeedBack,\n              anoEscolaridade: novoArrayAnoEscolaridade,\n              anoEscolaridadeFeedBack: novoArrayAnoEscolaridadeFeedBack\n            });\n            var newName = \"studentName-\" + studentNumber;\n            var newNameFeedback = newName + \"FeedBack\";\n            var newYear = \"studentYear-\" + studentNumber;\n            var newYearFeedback = newYear + \"FeedBack\";\n            var x = studentNumber;\n            var add = /*#__PURE__*/React.createElement(Fragment, {\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 15\n              }\n            }, /*#__PURE__*/React.createElement(\"hr\", {\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }\n            }), /*#__PURE__*/React.createElement(FormGroup, {\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 17\n              }\n            }, /*#__PURE__*/React.createElement(\"label\", {\n              htmlFor: \"studentName\",\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 19\n              }\n            }, studentName[languageCode]), /*#__PURE__*/React.createElement(FormInput, {\n              invalid: this_.state.nomeAlunoFeedBack[x],\n              onChange: function onChange(e) {\n                var newAdd = novoArrayAlunos;\n                var n = e.target.id.split(\"-\")[1];\n                newAdd[n] = e.target.value;\n\n                _this2.setState({\n                  nomeAluno: newAdd\n                });\n              },\n              id: newName,\n              type: \"text\",\n              placeholder: \"Nome\",\n              required: true,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 19\n              }\n            }), /*#__PURE__*/React.createElement(FormFeedback, {\n              id: newNameFeedback,\n              valid: false,\n              style: {\n                display: \"d-block\"\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 19\n              }\n            }, formFeedback[languageCode])), /*#__PURE__*/React.createElement(FormGroup, {\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }\n            }, /*#__PURE__*/React.createElement(\"label\", {\n              htmlFor: \"studentYear\",\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }\n            }, studentYear[languageCode]), /*#__PURE__*/React.createElement(FormInput, {\n              invalid: this_.state.anoEscolaridadeFeedBack[x],\n              onChange: function onChange(e) {\n                var newAdd = novoArrayAnoEscolaridade;\n                var n = e.target.id.split(\"-\")[1];\n                newAdd[n] = e.target.value;\n\n                _this2.setState({\n                  anoEscolaridade: newAdd\n                });\n              },\n              id: newYear,\n              type: \"text\",\n              placeholder: \"5\\xBA\",\n              required: true,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }\n            }), /*#__PURE__*/React.createElement(FormFeedback, {\n              id: newYearFeedback,\n              valid: false,\n              style: {\n                display: \"d-block\"\n              },\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }\n            }, formFeedback[languageCode])), dadosFinaisAluno);\n            studentNumber++; //Increase studentNumber\n\n            var arrayAnterior = moreStudents;\n\n            if (moreStudents == null) {\n              arrayAnterior = [add];\n            } else {\n              arrayAnterior = [moreStudents].concat(add);\n            }\n\n            this_.setState({\n              moreStudents: arrayAnterior,\n              studentNumber: studentNumber\n            });\n          }\n        } else {\n          console.log(\"doc não existe\");\n        }\n      }).catch(function (err) {\n        alert(err);\n      });\n    }\n  }, {\n    key: \"getParentsToApprove\",\n    value: function getParentsToApprove() {\n      var this_ = this;\n      var project_id = firebaseConfig.projectId;\n      var uri = \"https://us-central1-\" + project_id + \".cloudfunctions.net/api/getParents\";\n\n      var request = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var resposta;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return fetch(uri).then(function (resp) {\n                    return resp.json();\n                  }) // Transform the data into json\n                  .then(function (data) {\n                    //console.log(\"ShowEmaildata: \", data);\n                    var resgistosPorAprovarComPagamentoFeito = [];\n                    var dicionarioRegistos = {};\n\n                    for (var i = 0; i < data.length; i++) {\n                      if (data[i][\"Validated\"] != undefined && data[i][\"Validated\"] != null && data[i][\"Validated\"].toString() == \"false\") {\n                        if (data[i][\"Quotas pagas\"] != undefined && data[i][\"Quotas pagas\"] != null && (data[i][\"Quotas pagas\"].toString() == \"Não\" || data[i][\"Quotas pagas\"].toString() == \"false\")) {} else {\n                          resgistosPorAprovarComPagamentoFeito.push(data[i]);\n                          var title = data[i][\"Email\"];\n                          dicionarioRegistos[title] = data[i];\n                        }\n                      }\n                    }\n\n                    this_.setState({\n                      dicionarioRegistos: dicionarioRegistos,\n                      resgistosPorAprovarComPagamentoFeito: resgistosPorAprovarComPagamentoFeito\n                    });\n                  }).catch(function (error) {\n                    console.log(error);\n                  });\n\n                case 2:\n                  return _context.abrupt(\"return\", resposta);\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function request() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      var dados = request();\n    }\n  }, {\n    key: \"showDetails\",\n    value: function showDetails(e) {}\n    /**\r\n      Function to get extra parameters for parent and students from firestore and load them\r\n     */\n\n  }, {\n    key: \"renderExtra\",\n    value: function renderExtra() {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          extraParent = _this$state2.extraParent,\n          extraStudent = _this$state2.extraStudent,\n          moreStudents = _this$state2.moreStudents,\n          extraVars = _this$state2.extraVars;\n      var this_ = this;\n      var dadosFinaisPai = null;\n      var dadosFinaisAluno = null;\n      var extrasDoc = firestore.doc(\"initialConfigs/newParameters\");\n      extrasDoc.get().then(function (doc) {\n        if (doc.exists === true) {\n          var dataDoc = doc.data(); //console.log(\"dados extras: \" + JSON.stringify(dataDoc));\n\n          var eeData = dataDoc[\"EE\"]; // Get parent dictionary of extra parameters\n\n          if (eeData !== undefined) {\n            var keys = Object.keys(eeData);\n            var extraPai = 0; // Counts number of extra parameters that belong to the parent part of the registry\n\n            var dadosPai = []; // Will store all objects to render from the parent side\n\n            for (var i = 0; i < keys.length; i++) {\n              extraPai++;\n              var val = keys[i]; // Actual name of parameter\n\n              var type = eeData[val]; //Type of parameter (text, inteiro, etc)\n              //Change type to html equivalent\n\n              if (type.includes(\"text\")) {\n                type = \"text\";\n              } else if (type.includes(\"int\")) {\n                type = \"number\";\n              } //These following lines add parameter to extraVars array of dictionaries (extraVars stores the actual user input)\n\n\n              var newArrayExtras = _this3.state.extraVars; // Array of dictionaries\n\n              var newVar = _objectSpread({}, _this3.state.extraVars[0], _defineProperty({}, val, \"\")); // Add parameter(val) to first dictionary\n\n\n              newArrayExtras[0] = newVar;\n\n              _this3.setState({\n                extraVars: newArrayExtras\n              }); // Objects to render\n\n\n              var dado = /*#__PURE__*/React.createElement(FormGroup, {\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 17\n                }\n              }, /*#__PURE__*/React.createElement(\"label\", {\n                htmlFor: val,\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 19\n                }\n              }, val), /*#__PURE__*/React.createElement(FormInput, {\n                id: val,\n                type: type,\n                placeholder: val,\n                onChange: function onChange(e) {\n                  var extrasArray = _this3.state.extraVars;\n\n                  var newExtraVars = _objectSpread({}, _this3.state.extraVars[0], _defineProperty({}, e.target.id, e.target.value));\n\n                  extrasArray[0] = newExtraVars;\n\n                  _this3.setState({\n                    extraVars: extrasArray\n                  });\n                },\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 19\n                }\n              }), /*#__PURE__*/React.createElement(FormFeedback, {\n                id: val + \"Feedback\",\n                valid: false,\n                style: {\n                  display: \"d-block\"\n                },\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 19\n                }\n              }, formFeedback[languageCode]));\n              dadosPai.push(dado); //Add object to array\n            }\n\n            dadosFinaisPai = dadosPai;\n          } // The following code follows the same parent logic, just for the student\n\n\n          var studentData = dataDoc[\"aluno\"];\n\n          if (studentData !== undefined) {\n            var keys = Object.keys(studentData);\n            var dadosAluno = [];\n\n            for (var i = 0; i < keys.length; i++) {\n              var valS = keys[i];\n              var type = studentData[valS];\n              var step = null;\n\n              if (type.includes(\"text\")) {\n                type = \"text\";\n              } else if (type.includes(\"int\")) {\n                type = \"number\";\n                step = \"1\";\n              } else if (type.includes(\"decimal\")) {\n                type = \"number\";\n                step = \"0.1\";\n              }\n\n              var newArrayExtras1 = _this3.state.extraVars;\n\n              var newVar = _objectSpread({}, _this3.state.extraVars[0], _defineProperty({}, keys[i], \"\"));\n\n              newArrayExtras1[0] = newVar;\n\n              _this3.setState({\n                extraVars: newArrayExtras1\n              }); //newVar\n\n\n              var dado = /*#__PURE__*/React.createElement(FormGroup, {\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 17\n                }\n              }, /*#__PURE__*/React.createElement(\"label\", {\n                htmlFor: valS,\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 19\n                }\n              }, valS), /*#__PURE__*/React.createElement(FormInput, {\n                id: valS,\n                type: type,\n                step: step,\n                placeholder: valS,\n                onChange: function onChange(e) {\n                  var extrasArray = _this3.state.extraVars;\n\n                  var newExtraVars = _objectSpread({}, _this3.state.extraVars[0], _defineProperty({}, e.target.id, e.target.value));\n\n                  extrasArray[0] = newExtraVars;\n\n                  _this3.setState({\n                    extraVars: extrasArray\n                  });\n                },\n                __self: _this3,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 19\n                }\n              }));\n              dadosAluno.push(dado);\n            }\n\n            dadosFinaisAluno = dadosAluno;\n          } // Save data to state\n\n\n          this_.setState({\n            extraParent: dadosFinaisPai,\n            extraStudent: dadosFinaisAluno,\n            extraPai: extraPai\n          });\n        } else {\n          console.log(\"doc não existe\");\n        }\n      }).catch(function (err) {\n        alert(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/React.createElement(ListGroup, {\n        flush: true,\n        value: \"titulo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 13\n        }\n      }, this.state.resgistosPorAprovarComPagamentoFeito && this.state.dicionarioRegistos ? this.state.resgistosPorAprovarComPagamentoFeito.map(function (post, idx) {\n        return /*#__PURE__*/React.createElement(Col, {\n          lg: \"4\",\n          key: idx,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Card, {\n          small: true,\n          className: \"card-post mb-4\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(CardBody, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"h5\", {\n          className: \"card-title\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 29\n          }\n        }, post.Nome), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"card-text text-muted\",\n          style: {\n            whiteSpace: \"nowrap\",\n            width: \"inherit\",\n            overflow: \"hidden\",\n            textOverflow: \"ellipsis\"\n          },\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 29\n          }\n        }, post.Email)), /*#__PURE__*/React.createElement(CardFooter, {\n          className: \"border-top d-flex\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"card-post__author d-flex\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 29\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"my-auto ml-auto\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(ApprovalModal, {\n          dados: _this4.state.dicionarioRegistos ? _this4.state.dicionarioRegistos[post.Email] : \"\",\n          parentComponent: _this4,\n          componentDidMount: _this4.componentDidMount,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 31\n          }\n        })))));\n      }) : null))));\n    }\n  }]);\n\n  return Approval_Page;\n}(Component);\n\nexport default Approval_Page;","map":{"version":3,"sources":["C:/Users/User/Desktop/Ambiente de Trabalho/Universidade/Ano 3/Semestre 2/PI/Projeto/repos/pi-assoc-pais/develop/src/components/approval-page/ApprovalPagePaga.js"],"names":["React","Component","Fragment","ListGroup","ListGroupItem","Row","Col","Card","CardBody","CardFooter","Form","FormInput","FormGroup","FormCheckbox","Button","FormTextarea","FormFeedback","toast","Bounce","Label","Input","FormText","Link","AssocLogoUpload","MembersFileUpload","NewParamsFileUpload","saveRegistToDB","StudentsFileUpload","firestore","firebase_auth","firebase","firebaseConfig","ApprovalModal","formFeedback","studentName","studentYear","languageCode","Approval_Page","props","state","resgistosPorAprovarComPagamentoFeito","dicionarioRegistos","blocking","errors","extraParent","extraStudent","moreStudents","studentNumber","extraVars","extraPai","renderExtra","bind","reload","addStudent","getParentsToApprove","setState","resgistosPorAprovar","_isMounted","nomeAluno","nomeAlunoFeedBack","anoEscolaridade","anoEscolaridadeFeedBack","this_","dadosFinaisAluno","extrasDoc","doc","get","then","exists","dataDoc","data","studentData","undefined","keys","Object","dadosAluno","valS","i","type","step","includes","idS","newArrayExtras1","newVar","n","dado","e","extrasArray","newExtraVars","target","id","value","push","length","novoArrayAlunos","concat","novoArrayNomeAlunoFeedBack","novoArrayAnoEscolaridade","novoArrayAnoEscolaridadeFeedBack","newName","newNameFeedback","newYear","newYearFeedback","x","add","newAdd","split","display","arrayAnterior","console","log","catch","err","alert","project_id","projectId","uri","request","fetch","resp","json","toString","title","error","resposta","dados","dadosFinaisPai","eeData","dadosPai","val","newArrayExtras","map","post","idx","Nome","whiteSpace","width","overflow","textOverflow","Email","componentDidMount"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SACEC,SADF,EAEEC,aAFF,EAGEC,GAHF,EAIEC,GAJF,EAKEC,IALF,EAMEC,QANF,EAOEC,UAPF,EAQEC,IARF,EASEC,SATF,EAUEC,SAVF,EAWEC,YAXF,EAYEC,MAZF,EAaEC,YAbF,EAcEC,YAdF,QAeO,cAfP;AAgBA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,gBAA9B;AACA,OAAO,uCAAP;AACA,SAASC,KAAT,EAAgBC,KAAhB,EAAuBC,QAAvB,QAAuC,YAAvC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,OAAOC,iBAAP,MAA8B,qCAA9B;AACA,OAAOC,mBAAP,MAAgC,uCAAhC;AACA,SAASC,cAAT,QAA+B,qCAA/B;AACA,OAAOC,kBAAP,MAA+B,sCAA/B;AACA,SACEC,SADF,EAEEC,aAFF,EAGEC,QAHF,EAIEC,cAJF,QAKO,uBALP;AAMA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SACEC,YADF,EAEEC,WAFF,EAGEC,WAHF,EAIEC,YAJF,QAKO,2BALP;;IAOMC,a;;;;;AACJ,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,oCAAoC,EAAE,IAD3B;AAEXC,MAAAA,kBAAkB,EAAE,IAFT;AAGXC,MAAAA,QAAQ,EAAE,KAHC;AAIXC,MAAAA,MAAM,EAAE,EAJG;AAMXC,MAAAA,WAAW,EAAE,IANF;AAOXC,MAAAA,YAAY,EAAE,IAPH;AAQXC,MAAAA,YAAY,EAAE,IARH;AASXC,MAAAA,aAAa,EAAE,CATJ;AASO;AAClBC,MAAAA,SAAS,EAAE,CAAC,EAAD,CAVA;AAWXC,MAAAA,QAAQ,EAAE,CAXC,CAWE;;AAXF,KAAb;AAcA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBC,IAAjB,+BAAnB;AACA,UAAKC,MAAL,GAAc,MAAKA,MAAL,CAAYD,IAAZ,+BAAd;AACA,UAAKE,UAAL,GAAkB,MAAKA,UAAL,CAAgBF,IAAhB,+BAAlB;AACA,UAAKG,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBH,IAAzB,+BAA3B;;AACA,UAAKG,mBAAL;;AACA,UAAKJ,WAAL;;AArBiB;AAsBlB;AAED;;;;;6BACS;AACP,WAAKK,QAAL,CAAc;AACZd,QAAAA,kBAAkB,EAAE,IADR;AAEZe,QAAAA,mBAAmB,EAAE;AAFT,OAAd;AAIA,WAAKF,mBAAL;AACA,WAAKJ,WAAL;AACD;;;wCACmB;AAClB,WAAKO,UAAL,GAAkB,IAAlB,CADkB,CAGlB;AACD;;;2CAEsB;AACrB,WAAKA,UAAL,GAAkB,KAAlB;AACD;AAED;;;;;;iCAGa;AAAA;;AAAA,wBASP,KAAKlB,KATE;AAAA,UAETQ,aAFS,eAETA,aAFS;AAAA,UAGTW,SAHS,eAGTA,SAHS;AAAA,UAITC,iBAJS,eAITA,iBAJS;AAAA,UAKTC,eALS,eAKTA,eALS;AAAA,UAMTC,uBANS,eAMTA,uBANS;AAAA,UAOThB,YAPS,eAOTA,YAPS;AAAA,UAQTC,YARS,eAQTA,YARS;AAWX,UAAIgB,KAAK,GAAG,IAAZ;AAEA,UAAIC,gBAAgB,GAAG,IAAvB,CAbW,CAeX;;AACA,UAAMC,SAAS,GAAGpC,SAAS,CAACqC,GAAV,CAAc,8BAAd,CAAlB;AACAD,MAAAA,SAAS,CACNE,GADH,GAEGC,IAFH,CAEQ,UAACF,GAAD,EAAS;AACb,YAAIA,GAAG,CAACG,MAAJ,KAAe,IAAnB,EAAyB;AACvB,cAAMC,OAAO,GAAGJ,GAAG,CAACK,IAAJ,EAAhB;AAEA,cAAMC,WAAW,GAAGF,OAAO,CAAC,OAAD,CAA3B;;AACA,cAAIE,WAAW,KAAKC,SAApB,EAA+B;AAC7B,gBAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYF,WAAZ,CAAX;AAEA,gBAAII,UAAU,GAAG,EAAjB;;AAH6B;AAKvBC,cAAAA,IAAI,GAAGH,IAAI,CAACI,CAAD,CALY;AAMvBC,cAAAA,IAAI,GAAGP,WAAW,CAACK,IAAD,CANK;AAOvBG,cAAAA,IAAI,GAAG,IAPgB;;AAS3B,kBAAID,IAAI,CAACE,QAAL,CAAc,MAAd,CAAJ,EAA2B;AACzBF,gBAAAA,IAAI,GAAG,MAAP;AACD,eAFD,MAEO,IAAIA,IAAI,CAACE,QAAL,CAAc,KAAd,CAAJ,EAA0B;AAC/BF,gBAAAA,IAAI,GAAG,QAAP;AACAC,gBAAAA,IAAI,GAAG,GAAP;AACD,eAHM,MAGA,IAAID,IAAI,CAACE,QAAL,CAAc,SAAd,CAAJ,EAA8B;AACnCF,gBAAAA,IAAI,GAAG,QAAP;AACAC,gBAAAA,IAAI,GAAG,KAAP;AACD;;AAEGE,cAAAA,GAAG,GAAGL,IAAI,GAAG,GAAP,GAAa7B,aAnBI,EAmBW;AAEtC;;AACImC,cAAAA,eAAe,GAAG,MAAI,CAAC3C,KAAL,CAAWS,SAtBN,EAsBiB;;AAE5C,kBAAI6B,CAAC,IAAI,CAAT,EAAY;AACVM,gBAAAA,MAAM,uBAAMF,GAAN,EAAY,EAAZ,CAAN;AACD,eAFD,MAEO;AACLE,gBAAAA,MAAM,qBAAQ,MAAI,CAAC5C,KAAL,CAAWS,SAAX,CAAqBD,aAArB,CAAR,sBAA8CkC,GAA9C,EAAoD,EAApD,EAAN;AACD;;AACDC,cAAAA,eAAe,CAACnC,aAAD,CAAf,GAAiCoC,MAAjC;;AACA,cAAA,MAAI,CAAC5B,QAAL,CAAc;AAAEP,gBAAAA,SAAS,EAAEkC;AAAb,eAAd;;AAEA,kBAAME,CAAC,GAAGrC,aAAV,CAhC2B,CAkC3B;;AACIsC,cAAAA,IAAI,gBACN,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BACE;AAAO,gBAAA,OAAO,EAAEJ,GAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAsBL,IAAtB,CADF,eAEE,oBAAC,SAAD;AACE,gBAAA,EAAE,EAAEK,GADN;AAEE,gBAAA,IAAI,EAAEH,IAFR;AAGE,gBAAA,IAAI,EAAEC,IAHR;AAIE,gBAAA,WAAW,EAAEH,IAJf;AAKE,gBAAA,QAAQ,EAAE,kBAACU,CAAD,EAAO;AACf,sBAAIC,WAAW,GAAG,MAAI,CAAChD,KAAL,CAAWS,SAA7B;;AACA,sBAAIwC,YAAY,qBACX,MAAI,CAACjD,KAAL,CAAWS,SAAX,CAAqBoC,CAArB,CADW,sBAEbE,CAAC,CAACG,MAAF,CAASC,EAFI,EAECJ,CAAC,CAACG,MAAF,CAASE,KAFV,EAAhB;;AAIAJ,kBAAAA,WAAW,CAACH,CAAD,CAAX,GAAiBI,YAAjB;;AACA,kBAAA,MAAI,CAACjC,QAAL,CAAc;AACZP,oBAAAA,SAAS,EAAEuC;AADC,mBAAd;AAGD,iBAfH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,CApCyB;AAyD3BZ,cAAAA,UAAU,CAACiB,IAAX,CAAgBP,IAAhB;AAzD2B;;AAI7B,iBAAK,IAAIR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,IAAI,CAACoB,MAAzB,EAAiChB,CAAC,EAAlC,EAAsC;AAAA,kBAChCD,IADgC;AAAA,kBAEhCE,IAFgC;AAAA,kBAGhCC,IAHgC;AAAA,kBAehCE,GAfgC;AAAA,kBAkBhCC,eAlBgC;AAAA,kBAmBhCC,MAnBgC;AAAA,kBA+BhCE,IA/BgC;;AAAA;AAsDrC;;AAEDtB,YAAAA,gBAAgB,GAAGY,UAAnB,CA5D6B,CA8D7B;;AACA,gBAAImB,eAAe,GAAGpC,SAAS,CAACqC,MAAV,CAAiB,EAAjB,CAAtB;AACA,gBAAIC,0BAA0B,GAAGrC,iBAAiB,CAACoC,MAAlB,CAAyB,IAAzB,CAAjC,CAhE6B,CAgEoC;;AACjE,gBAAIE,wBAAwB,GAAGrC,eAAe,CAACmC,MAAhB,CAAuB,EAAvB,CAA/B;AACA,gBAAIG,gCAAgC,GAAGrC,uBAAuB,CAACkC,MAAxB,CACrC,IADqC,CAAvC;AAIAjC,YAAAA,KAAK,CAACP,QAAN,CAAe;AACbG,cAAAA,SAAS,EAAEoC,eADE;AAEbnC,cAAAA,iBAAiB,EAAEqC,0BAFN;AAGbpC,cAAAA,eAAe,EAAEqC,wBAHJ;AAIbpC,cAAAA,uBAAuB,EAAEqC;AAJZ,aAAf;AAOA,gBAAIC,OAAO,GAAG,iBAAiBpD,aAA/B;AACA,gBAAIqD,eAAe,GAAGD,OAAO,GAAG,UAAhC;AACA,gBAAIE,OAAO,GAAG,iBAAiBtD,aAA/B;AACA,gBAAIuD,eAAe,GAAGD,OAAO,GAAG,UAAhC;AACA,gBAAME,CAAC,GAAGxD,aAAV;AAEA,gBAAIyD,GAAG,gBACL,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BACE;AAAO,cAAA,OAAO,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACGtE,WAAW,CAACE,YAAD,CADd,CADF,eAIE,oBAAC,SAAD;AACE,cAAA,OAAO,EAAE0B,KAAK,CAACvB,KAAN,CAAYoB,iBAAZ,CAA8B4C,CAA9B,CADX;AAEE,cAAA,QAAQ,EAAE,kBAACjB,CAAD,EAAO;AACf,oBAAImB,MAAM,GAAGX,eAAb;AACA,oBAAIV,CAAC,GAAGE,CAAC,CAACG,MAAF,CAASC,EAAT,CAAYgB,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAR;AACAD,gBAAAA,MAAM,CAACrB,CAAD,CAAN,GAAYE,CAAC,CAACG,MAAF,CAASE,KAArB;;AACA,gBAAA,MAAI,CAACpC,QAAL,CAAc;AACZG,kBAAAA,SAAS,EAAE+C;AADC,iBAAd;AAGD,eATH;AAUE,cAAA,EAAE,EAAEN,OAVN;AAWE,cAAA,IAAI,EAAC,MAXP;AAYE,cAAA,WAAW,EAAC,MAZd;AAaE,cAAA,QAAQ,MAbV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,eAmBE,oBAAC,YAAD;AACE,cAAA,EAAE,EAAEC,eADN;AAEE,cAAA,KAAK,EAAE,KAFT;AAGE,cAAA,KAAK,EAAE;AAAEO,gBAAAA,OAAO,EAAE;AAAX,eAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAKG1E,YAAY,CAACG,YAAD,CALf,CAnBF,CAFF,eA+BE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BACE;AAAO,cAAA,OAAO,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACGD,WAAW,CAACC,YAAD,CADd,CADF,eAIE,oBAAC,SAAD;AACE,cAAA,OAAO,EAAE0B,KAAK,CAACvB,KAAN,CAAYsB,uBAAZ,CAAoC0C,CAApC,CADX;AAEE,cAAA,QAAQ,EAAE,kBAACjB,CAAD,EAAO;AACf,oBAAImB,MAAM,GAAGR,wBAAb;AACA,oBAAIb,CAAC,GAAGE,CAAC,CAACG,MAAF,CAASC,EAAT,CAAYgB,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAR;AACAD,gBAAAA,MAAM,CAACrB,CAAD,CAAN,GAAYE,CAAC,CAACG,MAAF,CAASE,KAArB;;AACA,gBAAA,MAAI,CAACpC,QAAL,CAAc;AACZK,kBAAAA,eAAe,EAAE6C;AADL,iBAAd;AAGD,eATH;AAUE,cAAA,EAAE,EAAEJ,OAVN;AAWE,cAAA,IAAI,EAAC,MAXP;AAYE,cAAA,WAAW,EAAC,OAZd;AAaE,cAAA,QAAQ,MAbV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,eAmBE,oBAAC,YAAD;AACE,cAAA,EAAE,EAAEC,eADN;AAEE,cAAA,KAAK,EAAE,KAFT;AAGE,cAAA,KAAK,EAAE;AAAEK,gBAAAA,OAAO,EAAE;AAAX,eAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAKG1E,YAAY,CAACG,YAAD,CALf,CAnBF,CA/BF,EA0DG2B,gBA1DH,CADF;AA+DAhB,YAAAA,aAAa,GAlJgB,CAkJZ;;AAEjB,gBAAI6D,aAAa,GAAG9D,YAApB;;AACA,gBAAIA,YAAY,IAAI,IAApB,EAA0B;AACxB8D,cAAAA,aAAa,GAAG,CAACJ,GAAD,CAAhB;AACD,aAFD,MAEO;AACLI,cAAAA,aAAa,GAAG,CAAC9D,YAAD,EAAeiD,MAAf,CAAsBS,GAAtB,CAAhB;AACD;;AAED1C,YAAAA,KAAK,CAACP,QAAN,CAAe;AACbT,cAAAA,YAAY,EAAE8D,aADD;AAEb7D,cAAAA,aAAa,EAAEA;AAFF,aAAf;AAID;AACF,SApKD,MAoKO;AACL8D,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACD;AACF,OA1KH,EA2KGC,KA3KH,CA2KS,UAACC,GAAD,EAAS;AACdC,QAAAA,KAAK,CAACD,GAAD,CAAL;AACD,OA7KH;AA8KD;;;0CAEqB;AACpB,UAAIlD,KAAK,GAAG,IAAZ;AACA,UAAMoD,UAAU,GAAGnF,cAAc,CAACoF,SAAlC;AACA,UAAIC,GAAG,GACL,yBACAF,UADA,GAEA,oCAHF;;AAIA,UAAMG,OAAO;AAAA,4EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAERC,KAAK,CAACF,GAAD,CAAL,CACHjD,IADG,CACE,UAACoD,IAAD;AAAA,2BAAUA,IAAI,CAACC,IAAL,EAAV;AAAA,mBADF,EACyB;AADzB,mBAEHrD,IAFG,CAEE,UAAUG,IAAV,EAAgB;AACpB;AACA,wBAAI9B,oCAAoC,GAAG,EAA3C;AACA,wBAAIC,kBAAkB,GAAG,EAAzB;;AACA,yBAAK,IAAIoC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,IAAI,CAACuB,MAAzB,EAAiChB,CAAC,EAAlC,EAAsC;AACpC,0BACEP,IAAI,CAACO,CAAD,CAAJ,CAAQ,WAAR,KAAwBL,SAAxB,IACAF,IAAI,CAACO,CAAD,CAAJ,CAAQ,WAAR,KAAwB,IADxB,IAEAP,IAAI,CAACO,CAAD,CAAJ,CAAQ,WAAR,EAAqB4C,QAArB,MAAmC,OAHrC,EAIE;AACA,4BACEnD,IAAI,CAACO,CAAD,CAAJ,CAAQ,cAAR,KAA2BL,SAA3B,IACAF,IAAI,CAACO,CAAD,CAAJ,CAAQ,cAAR,KAA2B,IAD3B,KAECP,IAAI,CAACO,CAAD,CAAJ,CAAQ,cAAR,EAAwB4C,QAAxB,MAAsC,KAAtC,IACCnD,IAAI,CAACO,CAAD,CAAJ,CAAQ,cAAR,EAAwB4C,QAAxB,MAAsC,OAHxC,CADF,EAKE,CACD,CAND,MAMO;AACLjF,0BAAAA,oCAAoC,CAACoD,IAArC,CAA0CtB,IAAI,CAACO,CAAD,CAA9C;AACA,8BAAI6C,KAAK,GAAGpD,IAAI,CAACO,CAAD,CAAJ,CAAQ,OAAR,CAAZ;AACApC,0BAAAA,kBAAkB,CAACiF,KAAD,CAAlB,GAA4BpD,IAAI,CAACO,CAAD,CAAhC;AACD;AACF;AACF;;AACDf,oBAAAA,KAAK,CAACP,QAAN,CAAe;AACbd,sBAAAA,kBAAkB,EAAEA,kBADP;AAEbD,sBAAAA,oCAAoC,EAAEA;AAFzB,qBAAf;AAID,mBA7BG,EA8BHuE,KA9BG,CA8BG,UAAUY,KAAV,EAAiB;AACtBd,oBAAAA,OAAO,CAACC,GAAR,CAAYa,KAAZ;AACD,mBAhCG,CAFQ;;AAAA;AAAA,mDAmCPC,QAnCO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAH;;AAAA,wBAAPP,OAAO;AAAA;AAAA;AAAA,SAAb;;AAsCA,UAAIQ,KAAK,GAAGR,OAAO,EAAnB;AACD;;;gCAEW/B,C,EAAG,CAAE;AACjB;;;;;;kCAGc;AAAA;;AAAA,yBACiD,KAAK/C,KADtD;AAAA,UACNK,WADM,gBACNA,WADM;AAAA,UACOC,YADP,gBACOA,YADP;AAAA,UACqBC,YADrB,gBACqBA,YADrB;AAAA,UACmCE,SADnC,gBACmCA,SADnC;AAEZ,UAAIc,KAAK,GAAG,IAAZ;AAEA,UAAIgE,cAAc,GAAG,IAArB;AACA,UAAI/D,gBAAgB,GAAG,IAAvB;AAEA,UAAMC,SAAS,GAAGpC,SAAS,CAACqC,GAAV,CAAc,8BAAd,CAAlB;AACAD,MAAAA,SAAS,CACNE,GADH,GAEGC,IAFH,CAEQ,UAACF,GAAD,EAAS;AACb,YAAIA,GAAG,CAACG,MAAJ,KAAe,IAAnB,EAAyB;AACvB,cAAMC,OAAO,GAAGJ,GAAG,CAACK,IAAJ,EAAhB,CADuB,CAEvB;;AAEA,cAAMyD,MAAM,GAAG1D,OAAO,CAAC,IAAD,CAAtB,CAJuB,CAIO;;AAC9B,cAAI0D,MAAM,KAAKvD,SAAf,EAA0B;AACxB,gBAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYsD,MAAZ,CAAX;AAEA,gBAAI9E,QAAQ,GAAG,CAAf,CAHwB,CAGN;;AAElB,gBAAI+E,QAAQ,GAAG,EAAf,CALwB,CAKL;;AACnB,iBAAK,IAAInD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,IAAI,CAACoB,MAAzB,EAAiChB,CAAC,EAAlC,EAAsC;AACpC5B,cAAAA,QAAQ;AACR,kBAAIgF,GAAG,GAAGxD,IAAI,CAACI,CAAD,CAAd,CAFoC,CAEjB;;AACnB,kBAAIC,IAAI,GAAGiD,MAAM,CAACE,GAAD,CAAjB,CAHoC,CAGZ;AAExB;;AACA,kBAAInD,IAAI,CAACE,QAAL,CAAc,MAAd,CAAJ,EAA2B;AACzBF,gBAAAA,IAAI,GAAG,MAAP;AACD,eAFD,MAEO,IAAIA,IAAI,CAACE,QAAL,CAAc,KAAd,CAAJ,EAA0B;AAC/BF,gBAAAA,IAAI,GAAG,QAAP;AACD,eAVmC,CAYpC;;;AACA,kBAAIoD,cAAc,GAAG,MAAI,CAAC3F,KAAL,CAAWS,SAAhC,CAboC,CAaO;;AAC3C,kBAAImC,MAAM,qBAAQ,MAAI,CAAC5C,KAAL,CAAWS,SAAX,CAAqB,CAArB,CAAR,sBAAkCiF,GAAlC,EAAwC,EAAxC,EAAV,CAdoC,CAcoB;;;AACxDC,cAAAA,cAAc,CAAC,CAAD,CAAd,GAAoB/C,MAApB;;AACA,cAAA,MAAI,CAAC5B,QAAL,CAAc;AAAEP,gBAAAA,SAAS,EAAEkF;AAAb,eAAd,EAhBoC,CAkBpC;;;AACA,kBAAI7C,IAAI,gBACN,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BACE;AAAO,gBAAA,OAAO,EAAE4C,GAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAsBA,GAAtB,CADF,eAEE,oBAAC,SAAD;AACE,gBAAA,EAAE,EAAEA,GADN;AAEE,gBAAA,IAAI,EAAEnD,IAFR;AAGE,gBAAA,WAAW,EAAEmD,GAHf;AAIE,gBAAA,QAAQ,EAAE,kBAAC3C,CAAD,EAAO;AACf,sBAAIC,WAAW,GAAG,MAAI,CAAChD,KAAL,CAAWS,SAA7B;;AACA,sBAAIwC,YAAY,qBACX,MAAI,CAACjD,KAAL,CAAWS,SAAX,CAAqB,CAArB,CADW,sBAEbsC,CAAC,CAACG,MAAF,CAASC,EAFI,EAECJ,CAAC,CAACG,MAAF,CAASE,KAFV,EAAhB;;AAIAJ,kBAAAA,WAAW,CAAC,CAAD,CAAX,GAAiBC,YAAjB;;AACA,kBAAA,MAAI,CAACjC,QAAL,CAAc;AACZP,oBAAAA,SAAS,EAAEuC;AADC,mBAAd;AAGD,iBAdH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAkBE,oBAAC,YAAD;AACE,gBAAA,EAAE,EAAE0C,GAAG,GAAG,UADZ;AAEE,gBAAA,KAAK,EAAE,KAFT;AAGE,gBAAA,KAAK,EAAE;AAAEtB,kBAAAA,OAAO,EAAE;AAAX,iBAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKG1E,YAAY,CAACG,YAAD,CALf,CAlBF,CADF;AA4BA4F,cAAAA,QAAQ,CAACpC,IAAT,CAAcP,IAAd,EA/CoC,CA+Cf;AACtB;;AACDyC,YAAAA,cAAc,GAAGE,QAAjB;AACD,WA7DsB,CA+DvB;;;AACA,cAAMzD,WAAW,GAAGF,OAAO,CAAC,OAAD,CAA3B;;AACA,cAAIE,WAAW,KAAKC,SAApB,EAA+B;AAC7B,gBAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYF,WAAZ,CAAX;AAEA,gBAAII,UAAU,GAAG,EAAjB;;AACA,iBAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,IAAI,CAACoB,MAAzB,EAAiChB,CAAC,EAAlC,EAAsC;AACpC,kBAAID,IAAI,GAAGH,IAAI,CAACI,CAAD,CAAf;AACA,kBAAIC,IAAI,GAAGP,WAAW,CAACK,IAAD,CAAtB;AACA,kBAAIG,IAAI,GAAG,IAAX;;AAEA,kBAAID,IAAI,CAACE,QAAL,CAAc,MAAd,CAAJ,EAA2B;AACzBF,gBAAAA,IAAI,GAAG,MAAP;AACD,eAFD,MAEO,IAAIA,IAAI,CAACE,QAAL,CAAc,KAAd,CAAJ,EAA0B;AAC/BF,gBAAAA,IAAI,GAAG,QAAP;AACAC,gBAAAA,IAAI,GAAG,GAAP;AACD,eAHM,MAGA,IAAID,IAAI,CAACE,QAAL,CAAc,SAAd,CAAJ,EAA8B;AACnCF,gBAAAA,IAAI,GAAG,QAAP;AACAC,gBAAAA,IAAI,GAAG,KAAP;AACD;;AAED,kBAAIG,eAAe,GAAG,MAAI,CAAC3C,KAAL,CAAWS,SAAjC;;AACA,kBAAImC,MAAM,qBAAQ,MAAI,CAAC5C,KAAL,CAAWS,SAAX,CAAqB,CAArB,CAAR,sBAAkCyB,IAAI,CAACI,CAAD,CAAtC,EAA4C,EAA5C,EAAV;;AACAK,cAAAA,eAAe,CAAC,CAAD,CAAf,GAAqBC,MAArB;;AACA,cAAA,MAAI,CAAC5B,QAAL,CAAc;AAAEP,gBAAAA,SAAS,EAAEkC;AAAb,eAAd,EAlBoC,CAkBW;;;AAE/C,kBAAIG,IAAI,gBACN,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BACE;AAAO,gBAAA,OAAO,EAAET,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAuBA,IAAvB,CADF,eAEE,oBAAC,SAAD;AACE,gBAAA,EAAE,EAAEA,IADN;AAEE,gBAAA,IAAI,EAAEE,IAFR;AAGE,gBAAA,IAAI,EAAEC,IAHR;AAIE,gBAAA,WAAW,EAAEH,IAJf;AAKE,gBAAA,QAAQ,EAAE,kBAACU,CAAD,EAAO;AACf,sBAAIC,WAAW,GAAG,MAAI,CAAChD,KAAL,CAAWS,SAA7B;;AACA,sBAAIwC,YAAY,qBACX,MAAI,CAACjD,KAAL,CAAWS,SAAX,CAAqB,CAArB,CADW,sBAEbsC,CAAC,CAACG,MAAF,CAASC,EAFI,EAECJ,CAAC,CAACG,MAAF,CAASE,KAFV,EAAhB;;AAIAJ,kBAAAA,WAAW,CAAC,CAAD,CAAX,GAAiBC,YAAjB;;AACA,kBAAA,MAAI,CAACjC,QAAL,CAAc;AACZP,oBAAAA,SAAS,EAAEuC;AADC,mBAAd;AAGD,iBAfH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,CADF;AAsBAZ,cAAAA,UAAU,CAACiB,IAAX,CAAgBP,IAAhB;AACD;;AACDtB,YAAAA,gBAAgB,GAAGY,UAAnB;AACD,WAlHsB,CAoHvB;;;AACAb,UAAAA,KAAK,CAACP,QAAN,CAAe;AACbX,YAAAA,WAAW,EAAEkF,cADA;AAEbjF,YAAAA,YAAY,EAAEkB,gBAFD;AAGbd,YAAAA,QAAQ,EAAEA;AAHG,WAAf;AAKD,SA1HD,MA0HO;AACL4D,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACD;AACF,OAhIH,EAiIGC,KAjIH,CAiIS,UAACC,GAAD,EAAS;AACdC,QAAAA,KAAK,CAACD,GAAD,CAAL;AACD,OAnIH;AAoID;;;6BAEQ;AAAA;;AACP,0BACE,oBAAC,SAAD;AAAW,QAAA,KAAK,MAAhB;AAAiB,QAAA,KAAK,EAAE,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,aAAD;AAAe,QAAA,SAAS,EAAC,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKzE,KAAL,CAAWC,oCAAX,IACD,KAAKD,KAAL,CAAWE,kBADV,GAEG,KAAKF,KAAL,CAAWC,oCAAX,CAAgD2F,GAAhD,CACE,UAACC,IAAD,EAAOC,GAAP;AAAA,4BACE,oBAAC,GAAD;AAAK,UAAA,EAAE,EAAC,GAAR;AAAY,UAAA,GAAG,EAAEA,GAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,IAAD;AAAM,UAAA,KAAK,MAAX;AAAY,UAAA,SAAS,EAAC,gBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAI,UAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA4BD,IAAI,CAACE,IAAjC,CADF,eAEE;AACE,UAAA,SAAS,EAAC,sBADZ;AAEE,UAAA,KAAK,EAAE;AACLC,YAAAA,UAAU,EAAE,QADP;AAELC,YAAAA,KAAK,EAAE,SAFF;AAGLC,YAAAA,QAAQ,EAAE,QAHL;AAILC,YAAAA,YAAY,EAAE;AAJT,WAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WASGN,IAAI,CAACO,KATR,CAFF,CADF,eAeE,oBAAC,UAAD;AAAY,UAAA,SAAS,EAAC,mBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAK,UAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAEE;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,aAAD;AACE,UAAA,KAAK,EACH,MAAI,CAACpG,KAAL,CAAWE,kBAAX,GACI,MAAI,CAACF,KAAL,CAAWE,kBAAX,CAA8B2F,IAAI,CAACO,KAAnC,CADJ,GAEI,EAJR;AAME,UAAA,eAAe,EAAE,MANnB;AAOE,UAAA,iBAAiB,EAAE,MAAI,CAACC,iBAP1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAFF,CAfF,CADF,CADF;AAAA,OADF,CAFH,GAsCG,IAvCN,CADF,CADF,CADF,CADF;AAiDD;;;;EApeyB3I,S;;AAue5B,eAAeoC,aAAf","sourcesContent":["import React, { Component, Fragment } from \"react\";\r\nimport {\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  Form,\r\n  FormInput,\r\n  FormGroup,\r\n  FormCheckbox,\r\n  Button,\r\n  FormTextarea,\r\n  FormFeedback,\r\n} from \"shards-react\";\r\nimport { toast, Bounce } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { Label, Input, FormText } from \"reactstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AssocLogoUpload from \"../config-inicial/AssocLogoUpload\";\r\nimport MembersFileUpload from \"../config-inicial/MembersFileUpload\";\r\nimport NewParamsFileUpload from \"../config-inicial/NewParamsFileUpload\";\r\nimport { saveRegistToDB } from \"../../firebase_scripts/installation\";\r\nimport StudentsFileUpload from \"../config-inicial/StudentsFileUpload\";\r\nimport {\r\n  firestore,\r\n  firebase_auth,\r\n  firebase,\r\n  firebaseConfig,\r\n} from \"../../firebase-config\";\r\nimport ApprovalModal from \"./ApprovalModal\";\r\nimport {\r\n  formFeedback,\r\n  studentName,\r\n  studentYear,\r\n  languageCode,\r\n} from \"../../utils/general_utils\";\r\n\r\nclass Approval_Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resgistosPorAprovarComPagamentoFeito: null,\r\n      dicionarioRegistos: null,\r\n      blocking: false,\r\n      errors: {},\r\n\r\n      extraParent: null,\r\n      extraStudent: null,\r\n      moreStudents: null,\r\n      studentNumber: 1, //Counts number of students\r\n      extraVars: [{}],\r\n      extraPai: 0, //Counts number of extra parameters that belong to the parent part -> they are stored in extraVars[0] along with the extra values from the first student\r\n    };\r\n\r\n    this.renderExtra = this.renderExtra.bind(this);\r\n    this.reload = this.reload.bind(this);\r\n    this.addStudent = this.addStudent.bind(this);\r\n    this.getParentsToApprove = this.getParentsToApprove.bind(this);\r\n    this.getParentsToApprove();\r\n    this.renderExtra();\r\n  }\r\n\r\n  /*********************************** LIFECYCLE ***********************************/\r\n  reload() {\r\n    this.setState({\r\n      dicionarioRegistos: null,\r\n      resgistosPorAprovar: null,\r\n    });\r\n    this.getParentsToApprove();\r\n    this.renderExtra();\r\n  }\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n\r\n    // const user = UsersService.getCurrentUser();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  /**\r\n    Function to add new student to form\r\n   */\r\n  addStudent() {\r\n    var {\r\n      studentNumber,\r\n      nomeAluno,\r\n      nomeAlunoFeedBack,\r\n      anoEscolaridade,\r\n      anoEscolaridadeFeedBack,\r\n      extraStudent,\r\n      moreStudents,\r\n    } = this.state;\r\n\r\n    var this_ = this;\r\n\r\n    var dadosFinaisAluno = null;\r\n\r\n    //Get student parameters from database\r\n    const extrasDoc = firestore.doc(\"initialConfigs/newParameters\");\r\n    extrasDoc\r\n      .get()\r\n      .then((doc) => {\r\n        if (doc.exists === true) {\r\n          const dataDoc = doc.data();\r\n\r\n          const studentData = dataDoc[\"aluno\"];\r\n          if (studentData !== undefined) {\r\n            var keys = Object.keys(studentData);\r\n\r\n            var dadosAluno = [];\r\n            for (var i = 0; i < keys.length; i++) {\r\n              var valS = keys[i];\r\n              var type = studentData[valS];\r\n              var step = null;\r\n\r\n              if (type.includes(\"text\")) {\r\n                type = \"text\";\r\n              } else if (type.includes(\"int\")) {\r\n                type = \"number\";\r\n                step = \"1\";\r\n              } else if (type.includes(\"decimal\")) {\r\n                type = \"number\";\r\n                step = \"0.1\";\r\n              }\r\n\r\n              var idS = valS + \"-\" + studentNumber; //Id now contains a unique number to identify it\r\n\r\n              //Create dictionary for this student's values and add it to extraVars\r\n              var newArrayExtras1 = this.state.extraVars; //Get array of dictionaries\r\n              var newVar;\r\n              if (i == 0) {\r\n                newVar = { [idS]: \"\" };\r\n              } else {\r\n                newVar = { ...this.state.extraVars[studentNumber], [idS]: \"\" };\r\n              }\r\n              newArrayExtras1[studentNumber] = newVar;\r\n              this.setState({ extraVars: newArrayExtras1 });\r\n\r\n              const n = studentNumber;\r\n\r\n              //Object to render\r\n              var dado = (\r\n                <FormGroup>\r\n                  <label htmlFor={idS}>{valS}</label>\r\n                  <FormInput\r\n                    id={idS}\r\n                    type={type}\r\n                    step={step}\r\n                    placeholder={valS}\r\n                    onChange={(e) => {\r\n                      var extrasArray = this.state.extraVars;\r\n                      var newExtraVars = {\r\n                        ...this.state.extraVars[n],\r\n                        [e.target.id]: e.target.value,\r\n                      };\r\n                      extrasArray[n] = newExtraVars;\r\n                      this.setState({\r\n                        extraVars: extrasArray,\r\n                      });\r\n                    }}\r\n                  />\r\n                </FormGroup>\r\n              );\r\n              dadosAluno.push(dado);\r\n            }\r\n\r\n            dadosFinaisAluno = dadosAluno;\r\n\r\n            //Similar process to name and year of student\r\n            var novoArrayAlunos = nomeAluno.concat(\"\");\r\n            var novoArrayNomeAlunoFeedBack = nomeAlunoFeedBack.concat(null); //not working, we are using alert method\r\n            var novoArrayAnoEscolaridade = anoEscolaridade.concat(\"\");\r\n            var novoArrayAnoEscolaridadeFeedBack = anoEscolaridadeFeedBack.concat(\r\n              null\r\n            );\r\n\r\n            this_.setState({\r\n              nomeAluno: novoArrayAlunos,\r\n              nomeAlunoFeedBack: novoArrayNomeAlunoFeedBack,\r\n              anoEscolaridade: novoArrayAnoEscolaridade,\r\n              anoEscolaridadeFeedBack: novoArrayAnoEscolaridadeFeedBack,\r\n            });\r\n\r\n            var newName = \"studentName-\" + studentNumber;\r\n            var newNameFeedback = newName + \"FeedBack\";\r\n            var newYear = \"studentYear-\" + studentNumber;\r\n            var newYearFeedback = newYear + \"FeedBack\";\r\n            const x = studentNumber;\r\n\r\n            var add = (\r\n              <Fragment>\r\n                <hr />\r\n                <FormGroup>\r\n                  <label htmlFor=\"studentName\">\r\n                    {studentName[languageCode]}\r\n                  </label>\r\n                  <FormInput\r\n                    invalid={this_.state.nomeAlunoFeedBack[x]}\r\n                    onChange={(e) => {\r\n                      var newAdd = novoArrayAlunos;\r\n                      var n = e.target.id.split(\"-\")[1];\r\n                      newAdd[n] = e.target.value;\r\n                      this.setState({\r\n                        nomeAluno: newAdd,\r\n                      });\r\n                    }}\r\n                    id={newName}\r\n                    type=\"text\"\r\n                    placeholder=\"Nome\"\r\n                    required\r\n                  />\r\n                  <FormFeedback\r\n                    id={newNameFeedback}\r\n                    valid={false}\r\n                    style={{ display: \"d-block\" }}\r\n                  >\r\n                    {formFeedback[languageCode]}\r\n                  </FormFeedback>\r\n                </FormGroup>\r\n\r\n                {/* Descricao Textarea */}\r\n                <FormGroup>\r\n                  <label htmlFor=\"studentYear\">\r\n                    {studentYear[languageCode]}\r\n                  </label>\r\n                  <FormInput\r\n                    invalid={this_.state.anoEscolaridadeFeedBack[x]}\r\n                    onChange={(e) => {\r\n                      var newAdd = novoArrayAnoEscolaridade;\r\n                      var n = e.target.id.split(\"-\")[1];\r\n                      newAdd[n] = e.target.value;\r\n                      this.setState({\r\n                        anoEscolaridade: newAdd,\r\n                      });\r\n                    }}\r\n                    id={newYear}\r\n                    type=\"text\"\r\n                    placeholder=\"5º\"\r\n                    required\r\n                  />\r\n                  <FormFeedback\r\n                    id={newYearFeedback}\r\n                    valid={false}\r\n                    style={{ display: \"d-block\" }}\r\n                  >\r\n                    {formFeedback[languageCode]}\r\n                  </FormFeedback>\r\n                </FormGroup>\r\n                {dadosFinaisAluno}\r\n              </Fragment>\r\n            );\r\n\r\n            studentNumber++; //Increase studentNumber\r\n\r\n            var arrayAnterior = moreStudents;\r\n            if (moreStudents == null) {\r\n              arrayAnterior = [add];\r\n            } else {\r\n              arrayAnterior = [moreStudents].concat(add);\r\n            }\r\n\r\n            this_.setState({\r\n              moreStudents: arrayAnterior,\r\n              studentNumber: studentNumber,\r\n            });\r\n          }\r\n        } else {\r\n          console.log(\"doc não existe\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n      });\r\n  }\r\n\r\n  getParentsToApprove() {\r\n    var this_ = this;\r\n    const project_id = firebaseConfig.projectId;\r\n    let uri =\r\n      \"https://us-central1-\" +\r\n      project_id +\r\n      \".cloudfunctions.net/api/getParents\";\r\n    const request = async () => {\r\n      let resposta;\r\n      await fetch(uri)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          //console.log(\"ShowEmaildata: \", data);\r\n          var resgistosPorAprovarComPagamentoFeito = [];\r\n          var dicionarioRegistos = {};\r\n          for (var i = 0; i < data.length; i++) {\r\n            if (\r\n              data[i][\"Validated\"] != undefined &&\r\n              data[i][\"Validated\"] != null &&\r\n              data[i][\"Validated\"].toString() == \"false\"\r\n            ) {\r\n              if (\r\n                data[i][\"Quotas pagas\"] != undefined &&\r\n                data[i][\"Quotas pagas\"] != null &&\r\n                (data[i][\"Quotas pagas\"].toString() == \"Não\" ||\r\n                  data[i][\"Quotas pagas\"].toString() == \"false\")\r\n              ) {\r\n              } else {\r\n                resgistosPorAprovarComPagamentoFeito.push(data[i]);\r\n                var title = data[i][\"Email\"];\r\n                dicionarioRegistos[title] = data[i];\r\n              }\r\n            }\r\n          }\r\n          this_.setState({\r\n            dicionarioRegistos: dicionarioRegistos,\r\n            resgistosPorAprovarComPagamentoFeito: resgistosPorAprovarComPagamentoFeito,\r\n          });\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n      return resposta;\r\n    };\r\n\r\n    var dados = request();\r\n  }\r\n\r\n  showDetails(e) {}\r\n  /**\r\n    Function to get extra parameters for parent and students from firestore and load them\r\n   */\r\n  renderExtra() {\r\n    var { extraParent, extraStudent, moreStudents, extraVars } = this.state;\r\n    var this_ = this;\r\n\r\n    var dadosFinaisPai = null;\r\n    var dadosFinaisAluno = null;\r\n\r\n    const extrasDoc = firestore.doc(\"initialConfigs/newParameters\");\r\n    extrasDoc\r\n      .get()\r\n      .then((doc) => {\r\n        if (doc.exists === true) {\r\n          const dataDoc = doc.data();\r\n          //console.log(\"dados extras: \" + JSON.stringify(dataDoc));\r\n\r\n          const eeData = dataDoc[\"EE\"]; // Get parent dictionary of extra parameters\r\n          if (eeData !== undefined) {\r\n            var keys = Object.keys(eeData);\r\n\r\n            var extraPai = 0; // Counts number of extra parameters that belong to the parent part of the registry\r\n\r\n            var dadosPai = []; // Will store all objects to render from the parent side\r\n            for (var i = 0; i < keys.length; i++) {\r\n              extraPai++;\r\n              var val = keys[i]; // Actual name of parameter\r\n              var type = eeData[val]; //Type of parameter (text, inteiro, etc)\r\n\r\n              //Change type to html equivalent\r\n              if (type.includes(\"text\")) {\r\n                type = \"text\";\r\n              } else if (type.includes(\"int\")) {\r\n                type = \"number\";\r\n              }\r\n\r\n              //These following lines add parameter to extraVars array of dictionaries (extraVars stores the actual user input)\r\n              var newArrayExtras = this.state.extraVars; // Array of dictionaries\r\n              var newVar = { ...this.state.extraVars[0], [val]: \"\" }; // Add parameter(val) to first dictionary\r\n              newArrayExtras[0] = newVar;\r\n              this.setState({ extraVars: newArrayExtras });\r\n\r\n              // Objects to render\r\n              var dado = (\r\n                <FormGroup>\r\n                  <label htmlFor={val}>{val}</label>\r\n                  <FormInput\r\n                    id={val}\r\n                    type={type}\r\n                    placeholder={val}\r\n                    onChange={(e) => {\r\n                      var extrasArray = this.state.extraVars;\r\n                      var newExtraVars = {\r\n                        ...this.state.extraVars[0],\r\n                        [e.target.id]: e.target.value,\r\n                      };\r\n                      extrasArray[0] = newExtraVars;\r\n                      this.setState({\r\n                        extraVars: extrasArray,\r\n                      });\r\n                    }}\r\n                  />\r\n                  <FormFeedback\r\n                    id={val + \"Feedback\"}\r\n                    valid={false}\r\n                    style={{ display: \"d-block\" }}\r\n                  >\r\n                    {formFeedback[languageCode]}\r\n                  </FormFeedback>\r\n                </FormGroup>\r\n              );\r\n              dadosPai.push(dado); //Add object to array\r\n            }\r\n            dadosFinaisPai = dadosPai;\r\n          }\r\n\r\n          // The following code follows the same parent logic, just for the student\r\n          const studentData = dataDoc[\"aluno\"];\r\n          if (studentData !== undefined) {\r\n            var keys = Object.keys(studentData);\r\n\r\n            var dadosAluno = [];\r\n            for (var i = 0; i < keys.length; i++) {\r\n              var valS = keys[i];\r\n              var type = studentData[valS];\r\n              var step = null;\r\n\r\n              if (type.includes(\"text\")) {\r\n                type = \"text\";\r\n              } else if (type.includes(\"int\")) {\r\n                type = \"number\";\r\n                step = \"1\";\r\n              } else if (type.includes(\"decimal\")) {\r\n                type = \"number\";\r\n                step = \"0.1\";\r\n              }\r\n\r\n              var newArrayExtras1 = this.state.extraVars;\r\n              var newVar = { ...this.state.extraVars[0], [keys[i]]: \"\" };\r\n              newArrayExtras1[0] = newVar;\r\n              this.setState({ extraVars: newArrayExtras1 }); //newVar\r\n\r\n              var dado = (\r\n                <FormGroup>\r\n                  <label htmlFor={valS}>{valS}</label>\r\n                  <FormInput\r\n                    id={valS}\r\n                    type={type}\r\n                    step={step}\r\n                    placeholder={valS}\r\n                    onChange={(e) => {\r\n                      var extrasArray = this.state.extraVars;\r\n                      var newExtraVars = {\r\n                        ...this.state.extraVars[0],\r\n                        [e.target.id]: e.target.value,\r\n                      };\r\n                      extrasArray[0] = newExtraVars;\r\n                      this.setState({\r\n                        extraVars: extrasArray,\r\n                      });\r\n                    }}\r\n                  />\r\n                </FormGroup>\r\n              );\r\n              dadosAluno.push(dado);\r\n            }\r\n            dadosFinaisAluno = dadosAluno;\r\n          }\r\n\r\n          // Save data to state\r\n          this_.setState({\r\n            extraParent: dadosFinaisPai,\r\n            extraStudent: dadosFinaisAluno,\r\n            extraPai: extraPai,\r\n          });\r\n        } else {\r\n          console.log(\"doc não existe\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ListGroup flush value={\"titulo\"}>\r\n        <ListGroupItem className=\"p-3\">\r\n          <Col>\r\n            <Row>\r\n              {this.state.resgistosPorAprovarComPagamentoFeito &&\r\n              this.state.dicionarioRegistos\r\n                ? this.state.resgistosPorAprovarComPagamentoFeito.map(\r\n                    (post, idx) => (\r\n                      <Col lg=\"4\" key={idx}>\r\n                        <Card small className=\"card-post mb-4\">\r\n                          <CardBody>\r\n                            <h5 className=\"card-title\">{post.Nome}</h5>\r\n                            <p\r\n                              className=\"card-text text-muted\"\r\n                              style={{\r\n                                whiteSpace: \"nowrap\",\r\n                                width: \"inherit\",\r\n                                overflow: \"hidden\",\r\n                                textOverflow: \"ellipsis\",\r\n                              }}\r\n                            >\r\n                              {post.Email}\r\n                            </p>\r\n                          </CardBody>\r\n                          <CardFooter className=\"border-top d-flex\">\r\n                            <div className=\"card-post__author d-flex\"></div>\r\n                            <div className=\"my-auto ml-auto\">\r\n                              <ApprovalModal\r\n                                dados={\r\n                                  this.state.dicionarioRegistos\r\n                                    ? this.state.dicionarioRegistos[post.Email]\r\n                                    : \"\"\r\n                                }\r\n                                parentComponent={this}\r\n                                componentDidMount={this.componentDidMount}\r\n                              />\r\n                            </div>\r\n                          </CardFooter>\r\n                        </Card>\r\n                      </Col>\r\n                    )\r\n                  )\r\n                : null}\r\n            </Row>\r\n          </Col>\r\n        </ListGroupItem>\r\n      </ListGroup>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Approval_Page;\r\n"]},"metadata":{},"sourceType":"module"}